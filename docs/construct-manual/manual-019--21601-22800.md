# Manual Construct 3  Parte 19 (líneas 2160122800)

## Resumen
- succeeded or failed. If successful, achievement metadata (such as the achievement names (línea 7)
- and icons) is then available. (línea 8)
- On achievement revealed (línea 9)
- On achievement unlocked (línea 10)
- Triggered after the Reveal, Unlock or Increment actions when an achievement has (línea 12)
- successfully been revealed or unlocked. When incrementing achievements, the achievement (línea 13)
- is unlocked when it has incremented through every step. (línea 14)
- Is loaded (línea 15)
- True if the Google Play plugin has loaded and is ready to use. If false, no features of the (línea 17)
- plugin will work. (línea 18)
- Is signed in (línea 19)
- True if the user has been successfully signed in (possibly automatically). (línea 21)
- On auto-sign in failed (línea 22)
- Triggered upon the first visit, when the user cannot be automatically logged in. It is (línea 24)
- On sign in failed (línea 26)
- Triggered when an attempt to sign in fails, either due to an error or because the user (línea 28)
- cancelled the attempt. (línea 29)
- On error (línea 30)
- Triggered if an error occurs. The ErrorMessage expression will contain information about the (línea 36)
- error. (línea 37)

## Contenido

succeeded or failed. If successful, achievement metadata (such as the achievement names
and icons) is then available.
On achievement revealed
On achievement unlocked

Triggered after the Reveal, Unlock or Increment actions when an achievement has
successfully been revealed or unlocked. When incrementing achievements, the achievement
is unlocked when it has incremented through every step.
Is loaded

True if the Google Play plugin has loaded and is ready to use. If false, no features of the
plugin will work.
Is signed in

True if the user has been successfully signed in (possibly automatically).
On auto-sign in failed

Triggered upon the first visit, when the user cannot be automatically logged in. It is
necessary to display a 'Sign in' button and use the Sign in action to get the user to sign in.
On sign in failed

Triggered when an attempt to sign in fails, either due to an error or because the user
cancelled the attempt.
On error

Page 633 of 1146

Construct 3 Official Manual

Triggered if an error occurs. The ErrorMessage expression will contain information about the
error.
On player details received

Triggered after the Request player details action, when the player details have been
successfully received. The Player details category of expressions now are set to their correct
values for the currently signed in user.
On signed in
On signed out

Triggers when the user is signed in or signed out from Google Play Game Services.
On hi-score request success
On hi-score request fail

Triggered after the Request hi-scores action depending on whether the request succeeded or
failed. If successful, the hi-scores list is then available.
On score submit success
On score submit fail

Triggered after the Submit score action, depending on whether the submission succeeded or
failed. If successful the score should then appear in hi-score lists.

Google Play actions
Get metadata

Request metadata for the achievements list, such as the achievement names, descriptions
and icons. If successful, On achievement metadata success is triggered.
Increment

Add to, or set, the number of steps in an incremental achievement. Once the full number of
steps has been reached, the achievement is automatically unlocked.
List achievements

List the achievements for the currently signed in player. Optionally the list of achievements
can be filtered to only those in a given state (e.g. revealed). If successful, On achievement list
success triggers.
Show achievements (Android only)

Page 634 of 1146

Construct 3 Official Manual

Shows the native achievements dialog for the currently signed in player.
Reveal

If an achievement is hidden, set its state to 'revealed' for the currently signed in player. If
revealing for the first time, On achievement revealed will be triggered.
Unlock

If an achievement is not already unlocked, set its state to unlocked for the currently signed in
player. If unlocking for the first time, On achievement unlocked will be triggered.
Request player details

Request the details of the current player, such as their name and avatar image. If successful
On player details received triggers and the Player details category of expressions can be
used.
Sign in

If the player is not already signed in, pop up a window that allows them to sign in. Due to
popup blockers, this may only work in a user input event, such as On button clicked or On
touch start.
Sign out

If the player is already signed in, sign them out. This also allows for a different user to then
sign in.
Request hi-scores

Request a hi-score list for a given leaderboard. Scores can be returned for public results, or
"social" (from users connected to the currently signed in player), and a time limit can be
applied such as to return only the day's best scores so far. The top type returns the very
highest scores, and the window type returns the scores around the current player's own best
score, allowing them to see where they appear in the rankings.
Submit score

Submit a new hi-score to a leaderboard. A tag can be provided, which is just a short string
(up to 64 characters) associated with this score board entry, e.g. a short comment or an
alternative alias for the player. If successfully submitted, On score submit success triggers.
Show leaderboards(Android only)

Shows the native leaderboards dialog for the currently signed in player.

Page 635 of 1146

Construct 3 Official Manual

Show leaderboard (Android only)

Shows the native leaderboard dialog with the specified leaderboard for the currently signed
in player.

Google Play expressions
AchievementsCount

The total number of achievements available. The achievements list must already have been
successfully requested.
AchievementNameAt(index)
AchievementDescriptionAt(index)
AchievementIDAt(index)
AchievementStepsAt(index)
AchievementTotalStepsAt(index)
AchievementTypeAt(index)

Retrieve information about a given achievement in the achievements list. The achievements
list must already have been successfully requested.
AchievementUnlockedIconURLAt(index)
AchievementRevealedIconURLAt(index)

Retrieve the icon image URL for a given icon in either its unlocked or revealed state. This can
be displayed using the Sprite object's Load image from URL action.
ErrorMessage

In On error, the relevant error message if available.
HiScoreCount

The number of hi-scores in the current returned list of results.
HiScoreTotalCount

The total number of scores in the leaderboard, which may be greater than the number of
returned results (HiScoreCount).
HiScoreAt(index)
HiScoreFormattedAt(index)

Return a numerical value, or formatted string, for a score at a given index.
Page 636 of 1146

Construct 3 Official Manual

HiScoreRankAt(index)
HiScoreFormattedRankAt(index)

Return the numerical rank, or formatted string of the rank (e.g. "1st"), at a given index.
HiScoreNameAt(index)

Return the name of the player associated with the score at an index.
HiScoreTagAt(index)

Return the tag (a short string) that was submitted along with the score at an index.
HiScoreMyBest
HiScoreMyFormattedBest
HiScoreMyBestRank
HiScoreMyBestFormattedRank
HiScoreMyBestTag

Return the details for the current player's own best score, including the numerical and
formatted versions of the score and rank.

Page 637 of 1146

Construct 3 Official Manual

HTML ELEMENT
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/html-element

The HTML Element plugin allows you to include custom HTML content in your project. The
HTML content can also be styled with CSS to alter its appearance. This is a good way to display
content with more complex layout, such as tables, grids, and menus.
Construct creates a single HTML Element for each instance of the object, and sizes and
positions the element to match the object's size and position in the project. Beyond that the
content is entirely determined by the HTML you provide.
This guide will not teach how HTML and CSS work. However there is lots of information on the
web about them. For example take a look at the HTML basics article on the MDN Web Docs.
You can find several examples of using the HTML Element object in the Example Browser. Add
the HTML Element plugin as a filter and the list will display projects using it.

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IHTMLElementInstance script interface. This allows access in worker mode; when worker mode
is disabled, you can also use all the browser standard DOM APIs.

Layering HTML objects
As the name suggests, this object displays using a HTML element rather than drawing in to the
canvas. This means its layering works differently to other objects. To learn more about how to
layer HTML objects, see HTML layers.

CSS styling
If you only need a small number of custom CSS styles for HTML Element, these can be entered
in to the Style attribute property. However it's often more convenient to use a CSS file to write
styles in a more readable and easily editable way.
CSS styles can be added to the project by adding a stylesheet to the Files folder in the Project
Bar. See Project files for more details.
The HTML Element object has ID and Class properties. These can be filled in and then CSS
styles added for the corresponding ID or class, which will allow altering the appearance of the
main HTML element created by Construct. For example if the class is entered as myelement,
then CSS styles can be added for it with the rule .myelement { ... } .
Note that Construct sets the following styles on the HTML element via its style attribute. It is
best not to override these as they may cause the element to work incorrectly.
Page 638 of 1146

Construct 3 Official Manual

position
left , top , width

and height

box-sizing
display
color

if made invisible

and background-color if Set color and Set background color are enabled

font-size

if Auto font size is enabled

user-select

if Allow text selection is disabled

One useful technique is to put a wrapper element inside the HTML element that is sized to fill its
container. Then any custom styles or appearances can be used on that wrapper element without
accidentally affecting the element created by Construct. This would mean the HTML content is
something like this:
<div class="wrapper">
<!-- Content goes here -->
</div>

This can then be styled to fill its container. There are several ways to do this in CSS; here is one
approach using absolute positioning.
.wrapper {
position: absolute;
left: 0;
top: 0;
right: 0;
bottom: 0;
}

Now further styles can be added to the wrapper, such as font-size , without conflicting with the
styles added by Construct.

Scaling with Construct's canvas
Construct sets a CSS variable named --construct-scale on the root html element of the
document, with a number representing the canvas scale as a multiplier. You can use this with
calc() to scale CSS properties to match the displayed canvas size, e.g.:
.mybutton {
height: calc(var(--construct-scale) * 2em);
}

This sets .mybutton to have a height of 2em at 100% scale, but also adjusts the height to follow
Construct's fullscreen scaling.
Page 639 of 1146

Construct 3 Official Manual

Managing long HTML content
If you have a lot of HTML content to display, consider adding it as a HTML project file. Then use
the AJAX object to fetch the project file, and set the content of the HTML Element to the content
of the project file.

Scaling with the canvas
By default Auto font size is enabled. This means Construct sets a font-size style on the main
HTML element to an em size that scales with the displayed canvas size. For example at 100%
scale it will set font-size: 1em . Then if the window is resized to display twice as large, it will set
font-size: 2em .
This is useful for scaling your HTML content with the displayed size of the game. The key is to
use em units for sizing. Then everything will automatically scale with the canvas.
For example if you set border-radius: 20px , that will use a fixed 20px size regardless of how
large or small the window size is, meaning it will look wrong at some sizes. However if you set
border-radius: 2em , it will scale the size to match the canvas size, ensuring it looks consistent
at all sizes.
If you want to change the font-size for your HTML content, note that Construct sets that
property already. The best approach is to use a wrapper element as described above, and
change the font-size of the wrapper instead.

Using BBCode
HTML Element also sets supporting its content using simple formatting tags known as
"BBCode". This involves using square bracket tags such as [b] and [/b] around text to make bold,
e.g. [b]bold text[/b] . The tags you can use for BBCode in HTML Element are listed below.

Note these BBCode tags are different to those supported by the Text or SpriteFont objects.
Tag
Description
[b]...[/b]
Bold text
[i]...[/i]
Italic text
[s]...[/s]
Strikethrough text
[u]...[/u]
Underline text
[sub]...[/sub]
Subscript text
[sup]...[/sup]
Superscript text
[small]...[/small] Smaller text
[mark]...[/mark] Mark text with highlight
[code]...[/code] Format as code snippet
[h1]...[/h1]
Header 1
[h2]...[/h2]
Header 2
[h3]...[/h3]
Header 3
[h4]...[/h4]
Header 4
[item]
Item bullet point: •

Security
Page 640 of 1146

Construct 3 Official Manual

Be careful when adding user-provided values in to HTML. Read this section carefully if you
do this.
By default the HTML Element object interprets content as HTML. This is safe with content you've
written yourself. However it's common to insert user-provided values, such as the user's name, in
to HTML. This is a potential security risk and must be handled carefully.
Inserting a string like "<p>Your name is " & PlayerName & "!</p>" is dangerous, because the
player could enter HTML content for their name - which can even include script tags. For
example the player could enter their name as <script>runDangerousCode()</script> . Then in the
previous example the inserted HTML content will be <p>Your name is
<script>runDangerousCode()</script>!</p> which will execute the given JavaScript code, which
may be malicious.
The solution is to make sure all user-provided values are escaped. This makes sure that HTML
tags are displayed as text, rather than interpreted as HTML, replacing characters like < and >
with &lt; and &gt; . This is done with the EscapeHTML expression. For example the following
expression is now safe as it escapes the player name:
"<p>Your name is " & HTMLElement.EscapeHTML(PlayerName) & "!</p>"

Another alternative is to use BBCode or plain text as the content type. In both cases it is
impossible for users to insert unexpected HTML tags, so they are fundamentally safe.

HTML Element properties
Tag

The name of the HTML tag that Construct creates. By default this is div for a <div>
element, but it can be changed to any other HTML element.
Content

The text to use as the initial content of the HTML Element. The way this is interpreted is set
by the Content type property, which defaults to HTML. If you have a lot of content consider
using a project file instead - see Managing long HTML content above.
Content type

Choose how the initial content text is interpreted. The default is HTML. It can also be set to
BBCode (see the section on Using BBCode above), or Plain text to avoid interpreting any tags
on the text at all.
Initially visible

Page 641 of 1146

Construct 3 Official Manual

Set whether the HTML Element is visible upon creation. The element is made invisible by
setting the style display: none .

ID

The ID to set for the HTML Element.
Class

The class to set for the HTML Element. Like with the HTML class attribute, multiple classes
can be specified separated by spaces.
Allow context menu

Whether the browser's default context menu should be allowed on the HTML Element.
Typically this should be allowed for input elements, but often disallowing it is appropriate for
games, which may use controls like right-clicking for other purposes. If disallowed, Construct
will call preventDefault() on the "contextmenu" event.

Stop input events

Construct sometimes stops input events on HTML elements from reaching the rest of the
project. For example using arrow keys to move the caret inside a text input should not also
move the player if they are controlled by arrow keys. This also applies to mouse or touch
input. This is optional with the HTML Element object and has three modes:
No - no input events are stopped. All mouse, touch or keyboard input on the element will
reach the rest of the project.
Child elements only - input events reaching child elements of the main HTML element
will be stopped from reaching the rest of the project. However the main HTML element
will not stop any input.
Entire element - all input events on the entire HTML element will be stopped from
reaching the rest of the project.
Origin

Choose the position of the origin of the object relative to its unrotated bounding rectangle.
Set color
Default color

Enable Set color to set the color CSS style on the HTML element to the given color. This
changes the text color. Usually this is desirable as otherwise the text color may not be visible
Page 642 of 1146

Construct 3 Official Manual

against the background.
Set background color
Default background color

Enable Set background color to set the background-color style on the HTML element to the
given color.
Auto font size

Automatically set a font-size CSS style on the HTML element according to the display
scale of the canvas. This provides a convenient way to size HTML content with the canvas
by using em units. See the section Scaling with the canvas above for more details.

Allow text selection

Set whether dragging over text is allowed to create a selection. By default this is disabled,
which adds the CSS style user-select: none .

Style attribute

Additional CSS styles for the main HTML element can be added here, separated by
semicolons. This will be set via the style attribute of the HTML element. Consider using
CSS files if there are more than a couple of simple styles - see the section CSS styling above
for more details.

HTML Element conditions
On clicked

Triggered when any part of the HTML element is clicked. The TargetID and TargetClass
expressions are set to the ID and class of the clicked element.
On clicked class

Triggered when an element with a given list of CSS classes is clicked. This includes a click
on any child elements contained by the element with the given CSS classes. A single class
name can be specified, or multiple classes given separated by spaces, in which case the
clicked element must match all the given classes.
This does not use a CSS selector, so don't prefix class names with a dot.

On clicked ID

Page 643 of 1146

Construct 3 Official Manual

Triggered when an element with a given ID is clicked. This includes a click on any child
elements contained by the element with the given ID.
This does not use a CSS selector, so don't prefix the ID with # .

On CSS animation ended

Triggered when a CSS animation for any contained element finishes (i.e. the "animationend"
event). The animation name is specified by the @keyframes rule. The TargetID and
TargetClass expressions are set to the ID and class of the element that finished a CSS
animation. This trigger is useful for things like destroying the HTML element after a fade out
CSS animation has finished.

HTML Element actions
Note that some actions have the same name. Actions in the HTML element group are
common to all HTML-based plugins like Button and Text Input, and will only affect the main
HTML element. Actions in the HTML content group are unique to the HTML Element plugin
and can update the content of the object.

Create sprite image element

Creates an <img> element with the content of a given Sprite object's current image, and
inserts it to the HTML element. The location to insert is set by a CSS selector. This can be
left blank to insert in to the main HTML element. Alternatively a selector like ".myclass" will
mean to insert content to the child element with the class myclass. The element can be set
to inserted at the start or the end of the given element, or alternatively replacing all the
content of the given element with the image. The inserted image element can optionally also
be given an ID and class, which helps make it easy to style the inserted image with CSS.
This action provides a simple way to show a Sprite image on top of a HTML element,
since normally HTML elements always show on top of Sprites.

Insert content

Insert the given string of content inside the HTML element. The string is interpreted
according to the content type (HTML, BBCode or plain text). The position indicates whether
to insert at the start or the end of the given location. The location to insert is set by a CSS
selector. This can be left blank to insert in to the main HTML element. Alternatively a selector
like ".myclass" will mean to insert content to the child element with the class myclass; if
the Type is set to all, it will insert the same content to all elements matching the selector.

Page 644 of 1146

Construct 3 Official Manual

Be careful when inserting user-provided values as HTML. See the section on Security
above.

Position object at element

Sets the position and size of a given object to match the position and size of a specific
HTML element. The element is chosen by a CSS selector, e.g. ".myclass" to position an
object at an element with the class myclass.
This action provides a way to use invisible HTML and CSS for complex layouts, while
displaying the actual content with other objects, allowing for full use of Z order, effects
and so on.

Remove content

Either removes elements entirely, or clears their content to make them empty, according to
the given mode. The content to remove or clear is given by a CSS selector. This can be left
blank to clear the main HTML element. (Note the main HTML element cannot be removed, so
in this case it will be cleared instead.) Alternatively a selector like ".myclass" will mean an
element with the class myclass will be removed or cleared; if the Type is set to all, this will
remove or clear all elements matching the selector.
Set attribute

Either sets or removes a named attribute on a HTML element, according to the given mode.
The value is ignored if removing. The HTML element to alter attributes for is given by a CSS
selector. This can be left blank to alter attributes for the main HTML element. Alternatively a
selector like ".myclass" will update attributes for an element with the class myclass; if the
Type is set to all, this will update attributes for all elements matching the selector.
Set class

Either adds, toggles or removes classes on a HTML element, according to the given mode.
Multiple classes can be updated at once by separating their names with spaces. The HTML
element to alter classes for is given by a CSS selector. This can be left blank to alter classes
for the main HTML element. Alternatively a selector like ".myclass" will update the classes
for an element with the class myclass; if the Type is set to all, this will update classes for all
elements matching the selector.
Note that the Class parameter is not a selector so does not need class names to be
prefixed with a dot; however the Selector parameter is a CSS selector and so needs class
names to be prefixed with a dot.

Page 645 of 1146

Construct 3 Official Manual

Set content

Replaces some content inside the HTML element with the given string. The string is
interpreted according to the content type (HTML, BBCode or plain text). The location to
replace content is set by a CSS selector. This can be left blank to replace the content of the
entire main HTML element. Alternatively a selector like ".myclass" will mean to replace the
content of the child element with the class myclass; if the Type is set to all, it will replace the
content of all elements matching the selector.
Be careful when inserting user-provided values as HTML. See the section on Security
above.

Set CSS style

Set a single CSS style on the style attribute inside the HTML element, based on a CSS
property name and a string for its value. Setting the value to an empty string will remove the
property from the style attribute. The element to change the style for is set by a CSS selector.
This can be left blank to update the style attribute of the main HTML element. Alternatively a
selector like ".myclass" will mean to update the CSS style of the child element with the
class myclass; if the Type is set to all, it will update the style of all elements matching the
selector.
Set scroll position

Set the horizontal or vertical scroll position of an element. The HTML element to scroll is
given by a CSS selector. This can be left blank to scroll the main HTML element, or use a CSS
selector string like ".myclass" to scroll an element with the class myclass. This action only
scrolls one element matching the selector. The Direction specifies whether to set the scroll
top (vertical) or left (horizontal) position, and the Position value is the scroll position to set in
CSS pixels.

HTML element expressions
EscapeHTML(string)

Escapes any characters with meaning in HTML from the given string, such as replacing <
with &lt; . This is important for securely inserting user content in to HTML strings. See the
Security section above for more details.
HTMLContent
TextContent

A string with the complete content of the HTML element, either as a full HTML string, or plain
text only (with HTML tags removed).

Page 646 of 1146

Construct 3 Official Manual

Note that this does not update immediately after actions that change the HTML content
- use the Wait for previous actions to complete system action to ensure any modifying
actions have completed before reading updated content from these expressions.

TargetClass
TargetID

In a trigger like On clicked, these contain the class and ID of the affected HTML element.
Note that TargetClass can be a space-separated list of multiple classes, as per the class
HTML attribute.

Page 647 of 1146

Construct 3 Official Manual

IFRAME
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/iframe

The iframe object can display another web page, or a string of some HTML content, in your
project. It is named after the <iframe> element, which is what the object uses.
If you display a HTML string in the iframe instead of loading a URL, it is recommended to
check the Enable sandbox property, especially if the content includes any user-provided
content. This makes it safe to display untrusted HTML content, avoiding security problems
like XSS (cross-site scripting) where attackers can control or abuse your site.
This object can also be used to show embedded content, such as YouTube videos. For example
if you choose to share a YouTube video and select the "embed" option, it provides some HTML
code for an iframe element. The src attribute is the embed URL for the video, e.g.
https://www.youtube.com/embed/pWiC5Ln_0yA. This can be used in the URL property of
Construct's iframe object to show the video in your game.

Layering HTML objects
This object displays using a HTML element rather than drawing in to the canvas. This means its
layering works differently to other objects. To learn more about how to layer HTML objects, see
HTML layers.

iframe properties
URL

The URL of a web page to load inside the iframe.
HTML content

A string of HTML content to display inside the iframe. This loads the HTML locally and does
not request a separate web page. This is only used if the URL property is left empty.
Initially visible

Whether the object is initially visible at runtime.
ID

An optional id attribute to set on the iframe element. This may be useful if you have other
styles or JavaScript code that you want to use with the iframe.
Page 648 of 1146

Construct 3 Official Manual

Allow

An optional feature policy string to set in the iframe's allow attribute, which specifies what
the displayed page is allowed to do. The default is designed to allow embedded video
playback on services like YouTube, granting the video permission to enter fullscreen,
autoplay, and use encrypted media.
Enable sandbox
Sandbox

Check Enable sandbox to add the sandbox attribute on the iframe element, providing
enhanced security. The Sandbox property is then the string to use in the sandbox attribute.
Enabling the sandbox starts by removing a wide range of capabilities, and then each
capability can be re-enabled by adding it to the sandbox string. By default the sandbox string
allows JavaScript execution, but blocks forms, popups, same-origin access, top-document
navigation, and more. If you only display static HTML content, you can also remove the
default allow-scripts to block any JavaScript execution at all. For more information see
the iframe sandbox attribute on MDN.
Do not use both the allow-scripts and allow-same-origin in the sandbox string. This
allows scripts to remove the sandbox protection.

iframe conditions
The iframe object does not have any of its own conditions. See common conditions for features
shared between form control objects.

iframe actions
See common actions for features shared between form control objects.
Display HTML string

Load a string of HTML content in the iframe. This is similar to using the HTML content
property. If the iframe was previously displaying a URL, it will switch to the HTML content
instead.
Navigate to URL

Load a new URL in the iframe. If the iframe was previously displaying a string of HTML, it will
switch to loading this URL instead.

Page 649 of 1146

Construct 3 Official Manual

iframe expressions
The iframe object does not have any of its own expressions.

Page 650 of 1146

Construct 3 Official Manual

INSTANT GAMES
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/instant-games

The Instant Games plugin allows you to create games that integrate with the Facebook Instant
Games platform. These games can be played in Messenger, the Facebook news feed, and so on.
Don't use the Facebook plugin in Instant Games. You cannot publish Instant Games using
the Facebook API (the Instant Games API works separately). Only use the Instant Games
plugin.

Instant Games official documentation
For information specifically relating to the Instant Games platform, please also refer to the
official Instant Games developer documentation. Construct's Instant Games plugin handles
many of the details for you, but the official documentation also includes useful information on
setting up an app, managing web hosting and publishing, setting up ads, tips and best practices,
additional ways to test the app, and more.

Exporting for Instant Games
Make sure you use the Facebook Instant Games export option when publishing an Instant
Game. This will ensure additional files required by Instant Games are included with the export.
The resulting zip file can be directly uploaded to Facebook's web hosting service.

Instant Games properties
Navigation menu

The type of the navigation menu used by Instant Games to display. This corresponds to the
navigation_menu_version in the bundle configuration.

Instant Games conditions
On load ad success
On load ad error

Triggered after the Load ad action when an ad of the same type either successfully finishes
loading or has an error loading.
On show ad success
On show ad error

Page 651 of 1146

Construct 3 Official Manual

Triggered after the Show ad action when the user finishes viewing an ad of the same type or
if it fails to be shown.
Is available

True if the Instant Games platform is available. This will be false if the game is hosted
outside of the Instant Games platform or was not exported using the Facebook Instant
Games export option. Note Instant Games is also unavailable in preview mode.
On context changed
On context change cancelled

Triggered after the Change context action when the user changes context or cancels the
dialog. If the context changed, the context ID will change too.
On error

Triggered if an error occurs at any point using the Instant Games platform. Usually looking in
the browser console will provide more information about the problem.
On pause

Triggered when the Instant Games platform wants the game to pause in order to handle an
interruption, e.g. due to an incoming phone call.
On shortcut created
On shortcut failed

Triggered after the Create home screen shortcut action depending on whether the shortcut
was successfully created.
On leaderboard loaded

Triggered after the Load leaderboard scores action when the leaderboard score data has
been loaded. The leaderboard expressions can then be used to access the data.
On player score loaded

Triggered after the Load player score action when the player's score data has been loaded.
The player score expressions can then be used to access the data.
On score submitted

Triggered after the Set score action once the score has been submitted to the Instant Games
platform.

Page 652 of 1146

Construct 3 Official Manual

On connected players loaded

Triggered after the Load connected players action when the connected player's data has
been loaded. The connected player expressions can then be used to access the data.
On loaded player data

Triggered after the Load player data action when the player data has been loaded. The
PlayerData expression can then be used to access the data.

Instant Games actions
Load ad

Load an interstitial or rewarded video ad. The ad must have been created on Facebook's
advertising platform and the placement ID provided to this action. Ads must be loaded
before they can be shown. Only one ad of each type can be loaded at a time. On load ad
success/error will trigger depending on the outcome.
Show ad

Show an ad that has previously been successfully loaded. Note only the last successfully
loaded ad of the given type will be shown with this action. On show ad success/error will
trigger depending on the outcome.
Log event

Log an event to Facebook's analytics platform. This can help you learn more about how
players are interacting with your game. An optional value can be provided that will be
summed with the prior event value.
Change context

Opens a dialog allowing the player to change to a different Instant Games context. This
action corresponds to the chooseAsync() SDK method. If the user successfully changes
context, On context changed will trigger and the context ID will change. If the user cancels
the dialog, On context change cancelled will trigger.
Create home screen shortcut

(Android only) Request to create a home screen shortcut to the game on the user's device.
On shortcut created/failed will trigger depending on the outcome.
Custom update

Post a custom update in to a message thread. This can use a custom image and text for the
call-to-action (CTA) and other fields. This action corresponds to the updateAsync() SDK
Page 653 of 1146

Construct 3 Official Manual

method with a "CUSTOM" action.

Quit

Quit the game if it is being played in a context where exiting is possible.
Share

Show a dialog to invite, request, challenge or share, in a chat or timeline. An image must be
provided in the form of a Sprite object, whose currently showing image will be used.
There must be an instance of the chosen Sprite object on the layout, otherwise its image
will not be loaded and the share will not work.

The text to use in the share message can be provided. The content of the Data parameter will
be set to the EntryPointData expression if another user loads the game through that
particular share. This can be used to automatically join the other player to the sharing
player's game.
Subscribe to bot

Prompt the user to subscribe to a bot associated with the game, if one has been configured.
Switch game

Request that the client switch to a different Instant Game according to its App ID. The game
must belong to the same business as the current game. This action corresponds to the
switchGameAsync() SDK method.

Load leaderboard scores

Load a list of scores from a leaderboard. The leaderboard must have first been created for
the app. On leaderboard loaded will trigger once the scores are available, after which the
leaderboard expressions can be used to access the data.
Load player score

Load the current player's own score and rank. On player score loaded will trigger once
available, after which the player score expressions can be used to access the data.
Set score

Set the player's current score on a leaderboard. On score submitted will trigger once
submitted.
Share leaderboard update

Page 654 of 1146

Construct 3 Official Manual
Share leaderboard update

Post an update in a chat or timeline indicating the player's current score status for a given
leaderboard. This action corresponds to the updateAsync() SDK method with a
"LEADERBOARD" action.

Load connected players

Load a list of connected players (other users who have also interacted with this player in the
game). On connected players loaded will trigger once available, after which the connected
player expressions can be used to access the data.
Load player data

Load the last set data for the current player. On loaded player data will trigger once available,
after which the PlayerData expression can be used to access it.
Set player data

Store some data to associate with the current player on the Instant Games platform. This
data can later be requested using the Load player data action. Note the data should be kept
as short as possible, ideally under 1000 characters.

Instant Games expressions
ContextID

A unique identifier that identifies the current game context. Note this can change after the
Change context action completes.
ContextType

The type of the current game context. This can be one of "POST" , "THREAD" , "GROUP" or
"SOLO" . Note this can change after the Change context action completes.

EntryPointData

If the game is launched from a share, update or switch, then this expression returns the data
that was associated with the share.
Locale

The locale of the current player.
Platform

A description of the current platform the user is playing on. This can be one of "IOS" ,
"ANDROID" , "WEB" or "MOBILE_WEB" .
Page 655 of 1146

Construct 3 Official Manual

SDKVersion

The version of the Instant Games SDK in use.
LeaderboardResultCount
LeaderboardPlayerIDAt
LeaderboardPlayerNameAt
LeaderboardPlayerPhotoURLAt
LeaderboardRankAt
LeaderboardScoreAt

In On leaderboard loaded, return the number of results, and the player ID, name, photo URL,
rank and score for each entry in the list.
PlayerRank
PlayerScore

In On player score loaded, the current player's rank and score on the leaderboard.
ConnectedPlayerCount
ConnectedPlayerIDAt
ConnectedPlayerNameAt
ConnectedPlayerPhotoURLAt

In On connected players loaded, return the number of results, and the connected player ID,
name and photo URL for each entry in the list.
PlayerData

In On loaded player data, the string of the last set player data that was stored to the Instant
Games platform.
PlayerID
PlayerName
PlayerPhotoURL

Retrieve basic information about the current player, including their unique ID, their name and
a URL to their profile picture.

Page 656 of 1146

Construct 3 Official Manual

INTERNATIONALIZATION
View online: https://www.construct.net/en/make-games/manuals/construct-3/pluginreference/internationalization

The Internationalization plugin provides tools to manage the localization of a project. This
includes facilitating translations, pluralization, formatting dates for the user's locale, and so on.
See the built-in example project for a thorough example showing the various internationalization
features.
Internationalization is sometimes written as the shorthand i18n, referring to the fact the
word starts with an I, ends with an N, and has 18 other letters in between.

Scripting
When using JavaScript or TypeScript coding, the string lookup features of this plugin can be
accessed via the Internationalization script interface. Note however many other features of this
plugin merely access the browser-provided Intl APIs, so those are not duplicated in the script
interface, as you can access them directly instead.

Locales
Locales - which specify a region, language or dialect - are specified using standardized BCP 47
language tag, also known as just a language tag. For example en-US refers to US English, enGB refers to British English, pt-BR refers to Brazilian Portuguese, and so on.

The translation file
The plugin can be loaded with translation information through event sheets, but the most
common use case is to have all the strings for a given language in a separate file and load that
using the Load from JSON action. A bare-bones example of such file would be as follows:
{
"locale": "en-GB",
"strings": {
"foo": "example localized string",
"bar": {
"baz": "more localized text"
}
}
}

Page 657 of 1146

Construct 3 Official Manual

A language file is a JSON file, with two distinct keys.
The "strings" key is mandatory, all the localized text should be nested inside it. It can contain
any valid JSON - how it is organized is entirely up to the user to decide what is more convenient.
Trying to load a file without this key will result in an error.
The "locale" key is optional and is used when loading to indicate to what language the file
corresponds to. If the key is not present then the content of the file will be associated with the
locale the Internationalization plugin is currently set to. If the key contains a value which can not
be parsed into a valid locale, an error will be thrown when loading.

Loading an Internationalization file
To load an internationalization file do the following:
1

Use the AJAX plugin to request the file.

2

In the AJAX On Complete trigger, use the Load from JSON action of the Internationalization
plugin to load the AJAX data.

Following those steps it is possible to load a localization file for each locale that needs it.
When loading files like in the example above, the file needs to have the "locale" key so the
plugin can know to which locale the data belongs to without any further event blocks.

Looking up localized strings
Once the plugin has the data for the required locales, the next step is to look up the strings to
use them where needed. To do that do the following:
1

Use the Set locale action

2

Use the Lookup expression with the appropriate path

If the example localization file at the beginning of this document was loaded, that look up
would yield the string "example localized string".

Page 658 of 1146

Construct 3 Official Manual

Nesting, Push and Pop
In the case of having a few strings that need to be localized it can be easy enough to just have all
of them at the root of the "strings" key in the localization file. As the amount of text that needs
localization increases it can be useful to group related strings together to keep the localization
files tidy.
To make the lookup for a nested string you can do two things:

Absolute path
Include the absolute path to the string you are looking for in the argument of the Lookup
expression. Dots can be used to navigate to nested JSON keys.

This option is straight forward and can be convenient in isolated cases.

Relative path
Push the context where the strings you are looking for are in the localization file and then use
relative paths when using the Lookup expression. A relative path begins with a dot, and is
appended to the current context.

In the case of having many strings in the same context it can be useful to use relative paths to
avoid duplication.
When using relative paths always remember to have a corresponding Pop context action for
each Push context action.
The previous examples assume the example localization file at the beginning of the
document has been loaded.

Note that absolute paths never have a preceding "." and that relative paths always have a
preceding "."

Substitutions
By using substitutions it is possible to produce dynamic results at runtime, take the following
example:

Page 659 of 1146

Construct 3 Official Manual

{
"locale": "en-GB",
"strings": {
"test": "Hello {0} {1}"
}
}

The string has two placeholders that can be replaced at runtime if additional values are provided
when using the Lookup expression. There can be any amount of placeholders and the number in
between the curly braces refers to the order of the arguments passed to Lookup.
Example 1

The output of that example is the string "Hello Good Morning".
If there are more placeholders than arguments, like in the example bellow, then the placeholders
with no matching argument are left unchanged in the final result
Example 2

The output of that example is the string "Hello Good {1}".

Plural rules
Following is a simple example of a localization file set up with a plural rule for British English.
{
"locale": "en-GB",
"strings": {
"plural-example": {
"one": "{0} Pig",
"other": "{0} Pigs"
}
}
}

In order to look up the plural form the LookupPlural expression is used passing in an additional
value which is used to decide which plural form will be used.
Example 1

Page 660 of 1146

Construct 3 Official Manual

That example would yield the string "1 Pig".
Example 2

That example would yield the string "2 Pigs".
The placeholder {0} in plural strings is always substituted by the second argument of the
expression. The placeholder is optional - if it is removed from the localization string the
correct plural form will still be picked.

LookupPlural can also have any amount of additional placeholders for substitution just like
Lookup

Pluralization in other languages other than English
English is a relatively simple language when it comes to pluralization, as there are only two plural
categories: "one" and "other" which refer to single units and more than one (or zero) respectively.
Other languages might be more complex in this regard. To find out how many categories and the
name each category has, use the following expressions to print out the values and see what
keys your localization files need.
PluralCategoryCount will return the total amount of categories for the current locale.
PluralCategoryAt(index) will return the name of the plural category with the provided zero-based
index.
Make sure to use the Set locale action with the locale you want that information before
using the expressions.
As an example, the locale "ar-EG" (Egypt Arabic) has six different plural categories, "few", "many",
"one", "two", "zero" and "other". So a localization file for this language which uses plural rules
should provide translations for each category.

Internationalization conditions
Compare to current locale

Test the passed in locale value against the locale the plugin is currently configured with.

Internationalization actions
Page 661 of 1146

Construct 3 Official Manual

Set locale

Set the locale the plugin will use.
Set context

Set a context to get strings from. An absolute context overwrites any existing context and a
relative context is appended to the existing one.
Push context

Push a context to get strings from. This helps to avoid duplication in the case of having to
look up multiple strings in the same context.
Pop context

Remove the existing context from the stack.
Add string

Dynamically add a localized string to the provided context in the localization data for the
current locale.
Load from JSON

Load the plugin with localization data for the current locale or the locale defined in the
passed in JSON.

Internationalization expressions
Locale

Returns the locale string the plugin is currently using.
DefaultLocale

Return the default locale for the current system. This can be used to select the default
language.
Lookup(Context [, ...])

Looks up a localized string based on the current locale and a passed in context. Supports a
variable list of arguments for substitution.
LookupPlural(Context, Count [, ...])

Page 662 of 1146

Construct 3 Official Manual

Looks up the plural form of a localized string based on the current locale a passed in context
and a number to decide which plural form to return. Supports a variable list of arguments for
substitution.
CurrentContext

Return the current context of the plugin.
SelectPlural(number)

Returns the name of the plural form based on the current locale and the passed in number.
PluralCategoryCount

Returns the total amount of plural categories for the current locale.
PluralCategoryAt(index)

Returns the plural category name based on the current locale and the provided zero-based
index.
SaveToJSON

Returns a JSON representation of the plugin internal state.
FormatNumberAsDecimal(number)

Format the passed in number as a decimal based on the current locale.
FormatNumberAsPercent(number)