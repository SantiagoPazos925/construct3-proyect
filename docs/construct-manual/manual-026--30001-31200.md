# Manual Construct 3  Parte 26 (líneas 3000131200)

## Resumen
- Loops can be stopped with the Stop Loop system action. (línea 8)
- For (línea 9)
- Repeat the event a number of times, using an index variable over a range of values. The (línea 11)
- index can be retrieved with the LoopIndex system expression and passing the name of the (línea 12)
- loop. (línea 13)
- For Each (línea 14)
- For Each (ordered) (línea 15)
- Repeat the event once per picked instance. This only repeats for instances that have been (línea 17)
- picked by prior conditions. See how events work for more information on picking. For Each is (línea 18)
- commonly mis-used or used redundantly - actions already apply for each instance picked by (línea 19)
- conditions, so it often is simply not needed. However, if you fully understand how the event (línea 20)
- system works, it can be used to force the event to apply once per instance where the event (línea 21)
- are iterated in to be defined by an expression. For example, ordering by Sprite.Y ascending (línea 23)
- will iterate the top instances on the screen first, moving downwards. (línea 24)
- Repeat (línea 25)
- Simply repeat the event a given number of times. This tests any conditions following it on (línea 27)
- every repeat, and if those conditions are met also runs the actions and any sub-events on (línea 28)
- every repeat. (línea 29)
- While (línea 30)
- Repeat the event until one of the other following conditions in the event becomes false or a (línea 32)

## Contenido


Loops can be stopped with the Stop Loop system action.
For

Repeat the event a number of times, using an index variable over a range of values. The
index can be retrieved with the LoopIndex system expression and passing the name of the
loop.
For Each
For Each (ordered)

Repeat the event once per picked instance. This only repeats for instances that have been
picked by prior conditions. See how events work for more information on picking. For Each is
commonly mis-used or used redundantly - actions already apply for each instance picked by
conditions, so it often is simply not needed. However, if you fully understand how the event
system works, it can be used to force the event to apply once per instance where the event
system would not normally do that. The 'ordered' variant allows the order that the instances
are iterated in to be defined by an expression. For example, ordering by Sprite.Y ascending
will iterate the top instances on the screen first, moving downwards.
Repeat

Simply repeat the event a given number of times. This tests any conditions following it on
every repeat, and if those conditions are met also runs the actions and any sub-events on
every repeat.
While

Repeat the event until one of the other following conditions in the event becomes false or a
Stop loop action is used. Be careful not to create infinite loops which will cause the project to
hang.

Memory management
Is loading images

True while any of the memory management 'Load' actions are in the process of loading
images.
On image loading complete

Triggered when all memory management 'Load' actions that were started have finished
loading their images.

Pick instances

Page 851 of 1146

Construct 3 Official Manual

Pick all

Reset the picked objects back to all of them. Subsequent conditions will pick from all
instances again instead of filtering from only those meeting all the conditions so far. See
How events work for more information on how instances are picked in events. Useful in
subevents to start affecting different instances again.
Pick by comparison

Pick the individual instances of an object type that meet a comparison. For example, it is
possible to pick all instances where Object.X * 2 is less than Object.Y + 100 , which is not
possible with either the Compare X or Compare Y conditions.
Pick by evaluate

Pick the individual instances of an object type where the expression evaluates to a nonzero
value. In other words, for each instance if the expression is 0, it is not picked, else it is picked.
This is most useful with the comparison and logical operators (see Expressions). For
example, it's possible to pick instances using the following expression (where & means "and"
and | means "or"): (Object.X > 100 & Object.Y > 100) | (Object.X < -100 & Object.Y <
-100)

Pick by highest/lowest

Pick a single instance of a given object type for which the given expression evaluates to the
highest or lowest number. This evaluates the provided expression repeatedly for each
individual instance of the object type, and uses the resulting values to determine which
instance had the highest or lowest result, and then picks that instance. For example picking
the instance with the highest expression Object.X will pick the single instance furthest to
the right. Where there is a tie, an arbitrary single instance is chosen - it will never pick more
than once instance.
Pick last created

Pick the most recently created instance of an object type or family. This is useful with the
Create object (by name) system action. For example if you know the created object must
belong to a family, then you can use Pick last created to pick the created instance from the
family.
Pick Nth instance

Pick the instance at a given place in the internal list of picked objects. This is most useful
used in sub-events to act on separate instances. For example, in a "Sprite collided with
Sprite" event, Pick 0th instance and Pick 1st instance can be used to act on each instance
involved in the collision separately.

Page 852 of 1146

Construct 3 Official Manual

If all objects are currently picked, this condition can also be used to pick an object by its
index ID (IID).
Pick overlapping point

Pick all instances of a given object type that are overlapping a point in the layout. The given X
and Y position in the layout will be tested against the instance's collision polygons.
Pick random instance

Pick a random instance from the currently picked objects. In other words, if Pick random
instance follows another condition, it will pick a random instance from the instances meeting
the prior condition. Otherwise it picks a random instance from all the instances.

Save & Load
For more information on using savegames, see the tutorial How to make savegames.
On load complete

Triggered after the Load system action successfully completes.
On load failed

Triggered after the Load system action fails to complete, usually because the slot has not
been saved to yet.
On save complete

Triggered after the Save or Save to JSON system actions successfully complete. In both
cases, a string of the resulting JSON data can be accessed in this trigger with the
SaveStateJSON system expression.
On save failed

Triggered if the Save system action fails to complete. This can occur if the browser has
reached the limit of its storage quota, or the user has withdrawn permission for the page or
app to write to storage.

Special conditions
Else

Run if the previous event did not run. Note that this condition does not pick any objects: if it
follows an event that picks objects, in the Else event all instances revert to picked again. Else
can only follow normal (non-triggered) events. It can also follow another Else event with
other conditions to make an "if - else if - else" chain.
Page 853 of 1146

Construct 3 Official Manual

Is in preview

True when running the project from a preview in Construct, and false when running after
being exported. Useful to add debug or diagnostic features for previewing only.
Trigger once while true

Turn an ordinary event (which is tested every tick) in to a trigger. For example, if an event
plays a sound when lives equals 0, normally this event runs every tick. This plays about 60
sounds a second and would sound pretty bad. Adding Trigger once while true after the other
conditions makes the event run just once when it first becomes true. This makes the
previous example only play a sound once the first time your lives reaches 0. It should be the
last condition in an event.

Start & end
Is suspended

True if the runtime is currently suspended, i.e. in between On suspended and On resumed.
This normally means the browser/app is in the background and is not currently running.
On suspended
On resumed

Triggered when the browser/app suspends and resumes execution. Normally when the app
goes in to the background (e.g. minimized, or switched back to the home screen), execution
of the app is suspended to conserve system resources and save battery power, triggering On
suspended. When the app is reopened, On resumed triggers and execution resumes.
On end of layout

Triggered when the layout is ending. This can happen when the project goes to a different
layout or when the project closes.
On loader layout complete

Triggered on a loader layout when the progress reaches 100%. For more information see
How to use loader layouts to make custom loading screens.
On start of layout

Triggered when the layout begins. Use this event to run any actions that need to be done on
start-up.

Time

Page 854 of 1146

Construct 3 Official Manual

Compare time

Compare the time, in seconds, since the project started. For example, events can be set up
to run when the time reaches (equals) 10 seconds.
Every X seconds

Run the event regularly at a given time interval in seconds. This can also be used beneath
other conditions to only run the event at a given time interval while the other conditions are
true, e.g. "Player is holding spacebar AND every 0.5 seconds: fire laser".
Every X seconds does not run more than once per tick. This means very short time
periods may not work like you expect. For example many displays use a 60 Hz refresh
rate, in which case Every 0.01 seconds will run 60 times a second, not 100 times a
second. To avoid such unexpected results, don't use this condition with short time
periods - prefer to just use Every tick instead, and if necessary check delta-time (dt) to
see how much time passed in the last tick.

On signal

Triggered when the Signal system action is run with a matching tag (case insensitive).

Templates
Template exists

Check if an object type has a template with the provided name.

Page 855 of 1146

Construct 3 Official Manual

SYSTEM ACTIONS
View online: https://www.construct.net/en/make-games/manuals/construct-3/system-reference/systemactions

This section describes all the actions in the built-in System object in Construct. They are listed in
the order they appear in the Add Action dialog.

Display
Set canvas size

Set the size of the canvas area in the page, if appearing inline to the page (i.e. a fullscreen
mode is not used). If a fullscreen mode is in use, this effectively changes the size of the
Viewport size project property, which adjusts the size of the viewport.
Set fullscreen scaling

Set the Fullscreen quality project property. This allows the quality setting to be adjusted at
runtime.
Set pixel rounding

Set the Pixel rounding project property at runtime.
Snapshot canvas

Take a screenshot of the current display. A subset of the canvas area can be saved (e.g. for
saving a cropped image) by specifying the X, Y, Width and Height parameters, all given in
device pixels. The Platform Info expressions CanvasDeviceWidth and CanvasDeviceHeight
give the size of the canvas in device pixels. The default (leaving all values as zero) will save
the entire canvas area. This action triggers On canvas snapshot when the snapshot is ready,
and the resulting image can be accessed with the CanvasSnapshot system expression. This
can then be loaded in to a sprite or tiled background, sent to a server, or opened with the
Browser object in a new tab.

General
Create object

Create a new instance of an object type on a layer at a given position. If a family is chosen, a
random object type from the family is picked, and an instance created for that. Tick Create
hierarchy when creating the root object in a hierarchy to automatically create the rest of the
scene graph hierarchy with connections in place. Choose a valid Template name so the new
instance is created based on the template rather than an arbitrary instance.
Page 856 of 1146

Construct 3 Official Manual

See Setting up a hierarchy in the Layout View manual entry for more information about
hierarchies.

When Create hierarchy is ticked, the additional objects created are also picked. This
means subsequent actions for those objects will only affect the newly created ones.

When using this action with a family a Template name can be used, but will only take
effect if the object type
that is going to be created has that template name, otherwise it will be ignored.

See the Templates manual entry for more information on what templates are and how to
start using them.

Create object (by name)

As with Create object, but allows using a string of the name of the object type to create. This
allows using an expression to dynamically pick which kind of object to create. The Pick last
created condition is sometimes useful to pick the resulting instance in a sub-event.
Reset persisted objects

Across the entire project, reset all objects using the Persist behavior to their initial state (as if
the layout has not been visited yet). This is useful when restarting from the beginning again.
Set collision cell size

Construct optimizes collision checks by sorting all objects in to "cells". The default cell size is
the viewport size. Changing the collision cell size adjusts the trade-off between collision
performance, memory use, and overhead of moving objects. Usually the default works well
for most projects, but projects where there are large numbers of objects testing collisions in
a small area, such as "bullet hell" style games, may benefit from a smaller collision cell size.
Use performance measurements to identify the optimal size.
Set group active

Set an event group active or inactive. None of the events in an inactive group run until it is
activated again. The event group is identified by its name.
Sort Z order

Page 857 of 1146

Construct 3 Official Manual

Sort the Z order of instances of a given object according to an instance variable. This
effectively removes all instances from their Z order, sorts them, then inserts the sorted
sequence back in to the holes left behind. This means if the instances are spread across a
range of layers, they will be sorted in the same Z order locations, maintaining the same order
relative to other instances on those layers. Note this action is much faster than using an
ordered For each with an action like Send to front/back, so this action should be the preferred
way to sort the Z order of large numbers of instances.
Stop loop

Stop a Repeat, For or For each loop currently running. These loops are system conditions.
The rest of the event's actions and subevents will still complete, but the loop will not run any
further after that.

Global & local variables
Add to
Subtract from
Set value

Alter the value stored by a number or text type global or local variable.
Reset

Reset an individual global variable in the project to its initial value.
Reset global variables

Reset all the global variables in the project to their initial value. If Reset static is checked,
then all static local variables in the project will also be reset to their initial value.
Set boolean
Toggle boolean

Set or toggle a boolean type global or local variable.

Layers
For more information about the effect actions, see Effects.
Add layer

Create a new layer and insert it to the layer tree at runtime (also known as a dynamic layer).
Layer name is the name to use for the added layer, which must be different to all existing
layers already added, including other dynamic layers. Insert by is the name or index of

Page 858 of 1146

Construct 3 Official Manual

another layer to insert the new layer relative to. Where specifies where to insert the new layer
relative to the Insert by layer; Above and Below add it as a sibling layer adjacent to the Insert
by layer, whereas Add top/bottom sub-layer inserts the new layer as a sub-layer of the Insert
by layer. The Insert by layer may be left empty when Where is Add top/bottom sub-layer, in
which case the new layer is added as the top or bottom layer at the root level of the layer
tree.
Move layer

Remove and re-insert a layer to a new location in the layer tree. This works similarly to Add
layer, except the specified layer must already exist; otherwise the Insert by and Where
parameters are used in the same way.
Remove layer

Remove a layer from the layer tree by its name or index. This also removes any sub-layers of
the removed layer, and all objects on the layer or any of its sub-layers will be destroyed. A
layout must have at least one layer, so the last top-level layer cannot be removed.
Remove all dynamic layers

Removes all layers added using the Add layer action, leaving only the layers added in the
editor. All objects on the removed layers will be destroyed. This can be useful to reset the
state of dynamic layers.
Set layer scroll
Restore layer scroll

Independently scroll a layer, regardless of where the layout is scrolled to. By default layers all
follow the layout scroll position. Upon using the Set layer scroll action, a layer will stop
following the layout scroll position, and remain scrolled at the position provided. The Restore
layer scroll action reverts the layer to the default mode where it follows the layout scroll
position.
Set layer angle

Rotate an entire layer by a number of degrees.
Set layer background color

Set the background color of a layer. Note if the layer is transparent, setting the background
won't change the appearance unless you also make the layer opaque.
Set layer blend mode

Set the blend mode of a layer. See the Effects section for a description of the available blend
modes.
Page 859 of 1146

Construct 3 Official Manual

Set layer effect enabled

Enable or disable one of the effects added to a layer on the current layout. This action cannot
be used to alter layers from other layouts.
Set layer effect parameter

Change the value of one of the parameters for an effect added to a layer on the current
layout. This action cannot be used to alter layers from other layouts. The parameter to
change is specified by its zero-based index, i.e. 0 to change the first parameter, 1 to change
the second parameter, and so on. To set the value of a color parameter, use the rgb system
expression.
Set layer force own texture

Change a layer's Force own texture property at runtime. For more information see the
property in the Layers manual entry.
Set layer HTML

Set whether a layer acts as a HTML layer. For more information see HTML layers.
Set layer interactive

Set whether the content on the layer responds to mouse and touch input.
Set layer opacity

Set the opacity (or semitransparency) of an entire layer.
Set layer parallax

Set the horizontal and vertical parallax rates of a layer.
Set layer rendering mode

Set the Rendering mode layer property to either 2D or 3D mode. This allows dynamically
changing a layer between rendering modes at runtime.
Set layer scale

Set the scale (or zoom) of an entire layer, taking in to account its scale rate property.
Set layer scale rate

Set the scale rate property of a layer, which affects how quickly it scales (if at all).

Page 860 of 1146

Construct 3 Official Manual

Set layer transparent

Set the transparent property of a layer. If transparent, the background color is ignored.
Set layer visible

Show or hide an entire layer.
Note a sub-layer cannot be made visible if one of its parent layers is invisible. All its
parent layers must be made visible too for it to appear.

Set layer Z elevation

Set the Z elevation of an entire layer. By default the camera is at Z = 100, and looking down
to Z = 0. The default Z elevation is 0. Increasing it will move the layer upwards (towards the
camera) and decreasing it will move it downwards (away from the camera).
The layer order takes precedence over Z elevation. In other words, Z elevating a layer
above a layer on top of it will not make it appear above that layer.

Layout
Go to layout
Go to layout (by name)

Switch to another layout in the project. Note that global variables keep their current value they are not reset. To reset them use the system action Reset global variables.
Go to next/previous layout

Switch to the next or previous layout in the project. The order as they appear in the Project
Bar is used, where layouts at the top are first and layouts at the bottom are last. If on the first
layout, trying to go to the previous layout does nothing, and if on the last layout, trying to go
to the next layout does nothing. Note that global variables keep their current value - they are
not reset. To reset them use the system action Reset global variables.
Recreate initial objects

Recreate the objects in a rectangular area of the layout as they appear in the Layout View. In
other words, this restores a section of the initial level design. Note that this does not destroy
any existing objects, so if used repeatedly will create multiple objects sitting on top of each
other. Only objects of the given type are created, or alternatively a family can be passed and
all objects belonging to that family are recreated. The initial objects to create can also
optionally be sourced from a different layout by specifying a layout name (leaving it empty
Page 861 of 1146

Construct 3 Official Manual

will use the current layout). A specific layer can also be chosen by entering a layer name or
number; the default of using -1 will use objects from all layers. The created instances can
also optionally be placed on a specific layer with the Destination layer parameter (-1 means
to try to match the source layer), and also offset from their default positions so they are
created at a different location. As with the Create object action, all the created instances are
also picked so subsequent actions can further alter them. Tick Create hierarchy when
creating root objects in a hierarchy to automatically create the rest of the scene graph
hierarchy with connections in place.
Restart layout

Restart the current layout. Note that unlike Go to layout, this action resets all event groups to
their initial activation state. Global variables keep their current value - they are not reset. To
reset them use the system action Reset global variables.
Set layout angle

Rotate an entire layout by a number of degrees. This rotates all the layers in the layout.
Set layout effect enabled

Enable or disable one of the effects added to the current layout. This action cannot be used
to alter other layouts.
Set layout effect parameter

Change the value of one of the parameters for an effect added to the current layout. This
action cannot be used to alter other layouts. The parameter to change is specified by its
zero-based index, i.e. 0 to change the first parameter, 1 to change the second parameter, and
so on. To set the value of a color parameter, use the rgb system expression.
Set layout projection

Change whether the layout uses a perspective or orthographic projection. See the Projection
property in Layout Properties for more information.
Set layout scale

Set the scale (or zoom) of an entire layout. This scales all the layers in the layout, taking in to
account their scale rate property.
Set layout vanishing point

Change the location of the vanishing point in the viewport for this layout, using a percentage
in the range 0-100. This affects how perspective appears for 3D features such as Z elevation
and the 3D shape object. For more information refer to the Vanishing point layout property.

Page 862 of 1146

Construct 3 Official Manual

Memory management
By default Construct loads and releases memory automatically, so normally you do not need to
worry about how memory is managed in your project. However very large projects may need to
control when objects are loaded in to and released from memory. These actions provide control
over the loaded image memory. Note that spritesheeting combines different images on to the
same spritesheets; the spritesheet will be loaded in to memory if any single image on it is
loaded, and only released when no images on it are loaded.
Load layout images
Load layout images (by name)

Load all the images used by a layout in to memory. The layout can be chosen either from a
list or using a string of its name.
Normally Construct will already have the current layout loaded in to memory. Since this
action causes two layout's images to all be loaded in memory at once, it can cause a
spike in memory use, risking an out-of-memory error. To mitigate this only use it on
minimal layouts, such as a loading screen.

Load object images
Load object images (by name)

Load all the images used by an object in to memory. The object can be chosen either by an
object picker or a string of its name. If it's already loaded, this has no effect.
Objects can only be loaded as a whole. Loading a Sprite will load all animation frames
from all its animations. Avoid using objects with a great many animation frames since it
forces Construct to load them all. Consider using multiple Sprites instead and using
Families to keep the events simple.

Unload object images
Unload object images (by name)

Unload all the images used by an object from memory. The object can be chosen either by
an object picker or a string of its name. If it is not yet loaded, this has no effect. If there are
still instances of the object in use (i.e. the object's instance count is greater than 0), then this
has no effect, since the images are still in use and cannot yet be released.
Note that destroying objects does not really release them until the end of the next toplevel event. This means destroying all instances of an object and unloading its images
simulatenously will not work. Use a Wait action to ensure an object's instances have
been fully destroyed before unloading memory.

Page 863 of 1146

Construct 3 Official Manual

Unload unused images

Automatically unload the images for any objects that have their images loaded, but currently
have had all their instances destroyed (so the instance count is 0).
If an object is only temporarily unused, e.g. an explosion that currently has no instances
but will be created later, then this action will unload it and force Construct to load it onthe-fly when it is next created. This is inefficient and can jank the project. Use this action
with care, when you know any currently unused objects definitely won't be created again.

Save & Load
For more information on using savegames, see the tutorial How to make savegames.
Load

Load the state of the project from a save slot. When completed, this triggers On load
complete, or On load failed if the save slot has not been saved to before.
Load from JSON

Load the state of the project from a string of JSON data previously returned by the
SaveStateJSON system expression.
Save

Save the state of the game to a save slot. When completed, this triggers On save complete.
Save to JSON

Save the state of the game to a string of JSON data. When completed, this triggers On save
complete, and the resulting string of JSON data can be accessed with the SaveStateJSON
system expression.

Scrolling
To scroll, the size of the layout must be bigger than the size of the viewport, or the layout's
Unbounded scrolling property must be enabled. Otherwise there is nowhere to scroll to and
scrolling will have no effect.
Scroll to object

Center the view on a given object. This scrolls all layers taking in to account their parallax
property.
Scroll to position

Page 864 of 1146

Construct 3 Official Manual
p
Scroll to X
Scroll to Y

Set the X and Y positions to center the view on. This scrolls all layers taking in to account
their parallax property.

Time
Set object time scale
Restore object time scale

Change the rate time passes for a specific object. This affects the object's behaviors and its
own dt expression. Restoring the object's time scale returns it to the same time scale the
rest of the project is using. See the tutorial on Delta-time and framerate independence for
more information.
Set framerate mode

Change the project Framerate mode property at runtime. For more details, see the
corresponding project property.
Set min/max delta-time

Set the limits on the delta-time (dt) measurement. If the real-world delta-time increases
above the maximum delta-time, it stops increasing the measurement used by Construct,
corresponding to a dropping framerate causing the project to run in slow-motion. Conversely
if the real-world delta-time decreases below the minimum delta-time, it stops decreasing the
measurement used by Construct, corresponding to an increasing framerate causing the
project to run in fast-forward. The defaults are a minimum delta-time of 0 (meaning the
project never goes in to fast-forward mode) and a maximum delta-time of 1 / 30
(corresponding to a framerate of 30 FPS), meaning the project begins to go in to slowmotion as the framerate drops below 30 FPS. Going in to fast-forward can be useful for a
"catch-up time" mode, and going in to slow-motion with low framerates is useful to prevent
objects stepping too far every frame which can result in skipped collisions and unstable
gameplay.
Note the inverse relationship between the framerate and delta-time: an increasing
framerate results in an decreasing delta-time, and a decreasing framerate results in
increasing delta-time.

Set time scale

Change the rate time passes at in the project. Useful for slow-motion or pausing effects. See
the tutorial on Delta-time and framerate independence for more information.

Page 865 of 1146

Construct 3 Official Manual

Signal

Resume any events paused with a Wait for signal action with the given tag.
Wait

Wait a number of seconds before continuing on to the next action or sub-events. Other
events continue to run in the meantime.
Note this does not stop loops. The rest of the events continue to run, including the
remaining loop iterations.
The Use time scale parameter determines whether the time scale affects the wait time. If
unchecked, then the time waited is in real-world (wall clock) time ignoring the time scale.
This can be useful when pausing by setting the time scale to 0: in this case waits using the
time scale are paused indefinitely, but waits not using the time scale will still complete in
real-world time.
Wait for previous actions to complete

Wait until any previous actions have completed before continuing on to the next action or
sub-events. Other events continue to run in the meantime. This only applies to asynchronous
actions, which show with a special icon. Normally these types of action take a while to
complete and run a trigger like On completed when the action has finished. However using
Wait for previous actions to complete is often more convenient, since it allows you to keep
everything within the same event block.
If JavaScript code using the await keyword precedes this action, it will also wait for the
JavaScript code block to finish. See the section Using 'Await' in Scripts in event sheets.

Wait for signal

Wait indefinitely until the Signal action is used with the same tag. Other events continue to
run in the meantime.

Page 866 of 1146

Construct 3 Official Manual

SYSTEM EXPRESSIONS
View online: https://www.construct.net/en/make-games/manuals/construct-3/system-reference/systemexpressions

This section outlines the expressions in the built-in System object in Construct. Many are
common mathematical operations, and they can be listed with descriptions in the Expressions
dictionary, but they are included here for completeness.
This section does not list the operators or syntax that can be used in expressions - just the
expressions specific to the System object. For more general information on how to use
expressions in Construct, see Expressions.

Display
OriginalViewportWidth
OriginalViewportHeight

Get the original values of the Viewport size project property. The value of these expressions
does not change when using fullscreen modes like Scale inner and Scale outer that change
the viewport size depending on the available screen area. Note however that the system Set
canvas size action does modify the values returned by these expressions when in any
fullscreen mode other than Off, as in this case it has the effect of changing the Viewport size
project property.

Layers
In expressions where a layer is required, either its name (as a string) or index (as a number, zerobased) can be entered.
CanvasToLayerX(layer, x, y)
CanvasToLayerY(layer, x, y)

Calculate the layout co-ordinates underneath a position in canvas CSS co-ordinates for a
given layer.
The 3D Camera plugin also provides expressions with the same name that work in 3D.

LayerToCanvasX(layer, x, y)
LayerToCanvasY(layer, x, y)

Calculate the canvas CSS co-ordinates above a position in layout co-ordinates for a given
layer.
Page 867 of 1146

Construct 3 Official Manual

The 3D Camera plugin also provides expressions with the same name that work in 3D.

LayerToLayerX(fromLayer, toLayer, x, y)
LayerToLayerY(fromLayer, toLayer, x, y)

Calculate the position on a second layer (toLayer) that corresponds to a position given on a
first layer (fromLayer). This is a shorthand for converting a layer position to canvas CSS coordinates, and then back to a position on a different layer.
The 3D Camera plugin also provides expressions with the same name that work in 3D.

LayerAngle(layer)

Get the angle, in degrees, of a layer.
LayerIndex(layer)

Get the zero-based index of a layer from its name.
LayerOpacity(layer)

Get the opacity (or semitransparency) of a layer, from 0 (transparent) to 100 (opaque).
LayerParallaxX(layer)
LayerParallaxY(layer)

Get the current parallax X and Y components of a layer.
LayerScale(layer)

Get the current scale of the layer, not including the overall layout scale.
LayerScaleRate(layer)

Get the current scale rate of the layer, which defines how quickly it scales (if at all).
LayerScrollX(layer)
LayerScrollY(layer)

Get the current scroll position of a specific layer. Note this is always the same as the layout
scroll position (given by the ScrollX and ScrollY system expressions) unless a layer was
independently scrolled using the Set layer scroll system action.

Page 868 of 1146

Construct 3 Official Manual

LayerZElevation(layer)

Get the current elevation of the layer on the Z axis.
ViewportBottom(layer)
ViewportLeft(layer)
ViewportRight(layer)
ViewportTop(layer)

Return the viewport boundaries in layout co-ordinates of a given layer. Not all layers have the
same viewport if they are parallaxed, scaled or rotated separately.
The 3D Camera plugin also provides viewport expressions that work in 3D.

ViewportMidX(layer)
ViewportMidY(layer)

Return the mid-point of the viewport area in layout co-ordinates for a given layer.
ViewportWidth(layer)
ViewportHeight(layer)

Return the size of the viewport in layout co-ordinates for a given layer.

Layout
CanvasSnapshot

Contains the resulting image from a Snapshot canvas action after On canvas snapshot has
triggered. (Note this expression is not available immediately after the Snapshot canvas
action - you can only use it after On canvas snapshot triggers.) The expression returns a data
URI of the image file. This can be loaded in to a Sprite or Tiled Background object via Load
image from URL, sent to a server or stored locally, or opened with the Browser object in a
new tab to save to disk.
LayoutAngle

Get the angle, in degrees, of the current layout. This does not include the rotation of
individual layers.
LayoutScale

Get the current scale of the entire layout set by the Set layout scale action. This does not
include the scaling of individual layers.

Page 869 of 1146

Construct 3 Official Manual

LayoutWidth
LayoutHeight

Get the size of the current layout in pixels.
LayoutName

Get the name of the current layout.
ScrollX
ScrollY

Get the current position the view is centered on.
VanishingPointX
VanishingPointY

Get the current vanishing point in the layout, where the range 0-100 represents the viewport.
For more information refer to the Vanishing point layout property.

Math
These expressions are simply ordinary math functions like you find on calculators. However,
note that all functions using an angle take it in degrees, not radians. Angles start with 0 degrees
facing right and increment clockwise.
sin(x), cos(x), tan(x), asin(x), acos(x), atan(x) Trigonometric functions using angles in degrees.
abs(x) Absolute value of x e.g. abs(-5) = 5
angle(x1, y1, x2, y2) Calculate angle between two points
anglelerp(a, b, x) Linearly interpolate the angle a to b by x. Unlike the standard lerp, this takes in
to account the cyclical nature of angles.
anglediff(a1, a2) Return the smallest difference between two angles
anglerotate(start, end, step) Rotate angle start towards end by the angle step, all in degrees. If
start is less than step degrees away from end, it returns end.
ceil(x) Round up x e.g. ceil(5.1) = 6
cosp(a, b, x) Cosine interpolation of a to b by x. Calculates (a + b + (a - b) * cos(x * 180°)) / 2.
cubic(a, b, c, d, x) Cubic interpolation through a, b, c and d by x. Calculates lerp(qarp(a, b, c, x),
qarp(b, c, d, x), x).
distance(x1, y1, x2, y2) Calculate distance between two points

Page 870 of 1146

Construct 3 Official Manual

exp(x) Calculate e^x
floor(x) Round down x e.g. floor(5.9) = 5
infinity A floating point number value representing infinity.
lerp(a, b, x) Linear interpolation of a to b by x. Calculates a + x * (b - a).
unlerp(a, b, y) Reverse linear interpolation: if lerp(a, b, x) = y, then unlerp(a, b, y) = x. Calculates (y
- a) / (b - a).
ln(x) Log to base e of x.
log10(x) Log to base 10 of x.
max(a, b [, c...]), min(a, b [, c...]) Calculate maximum or minimum of the given numbers. Any
number of parameters can be used as long as there are at least two.
pi The mathematical constant pi (3.14159...)
qarp(a, b, c, x) Quadratic interpolation through a, b and c by x. Calculates lerp(lerp(a, b, x), lerp(b,
c, x), x).
round(x) Round x to the nearest whole number e.g. round(5.6) = 6
roundToDp(x, digits) Round x to a given number of decimal places, e.g. roundToDp(1.666666, 2)
= 1.67
sign(x) Retrieve the sign of x: -1 for any negative number, 1 for any positive number, or 0 if x is
zero.
sqrt(x) Calculate square root of x e.g. sqrt(25) = 5

getbit(x, n)

Get the nth bit of x represented as a 32-bit integer. For example getbit(7, 0) will get the
least significant bit of the number 7 when represented as a 32-bit integer. Returns either 0 or
1.
setbit(x, n, b)

Set the nth bit of x represented as a 32-bit integer to b (either 0 or 1). The resulting 32-bit
integer is returned.
togglebit(x, n)

Toggle the nth bit of x represented as a 32-bit integer. If that bit is 0, it is set to 1; if it is 1, it is
set to 0. The resulting 32-bit integer is returned.

Memory management
Page 871 of 1146

Construct 3 Official Manual

y

g

ImageLoadingProgress

Return the current loading progress of any memory management Load actions that are
currently busy, on a scale of 0-1.

Save & Load
SaveStateJSON

In On save complete or On load complete, returns a string of JSON data representing the
savegame data. This can later be loaded using the Load from JSON action. For more
information see How to make savegames.

System
CurrentEventNumber
CurrentEventSheetName

Return the number of the current event being run, and the name of the event sheet it belongs
to. These are useful for testing purposes, such as logging the current event number to the
browser console.
ImageMemoryUsage

Returns the estimated total memory usage, in megabytes, of all the currently-loaded images.
Note image memory is sometimes also referred to as "VRAM", but this is not strictly correct
since not all devices have video-specific memory. Also remember this expression does not
include the memory use of sounds, code, or other non-image resources.
LoadingProgress

Return the current load progress on a loader layout. The progress is returned as a number
from 0 to 1, e.g. 0.5 for half complete. For more information, see the tutorial how to make a
custom loading screen.
LoopIndex

Get the index (number of repeats so far) in any currently running loop.
LoopIndex(name)

Get the index (number of repeats so far) of the loop with the given name. Useful for getting
indices in nested loops.
ObjectCount

The total number of objects currently created.
Page 872 of 1146

Construct 3 Official Manual

ProjectID

Return the project ID as it appears in Project Properties.
ProjectName

Return the name of the project as it appears in Project Properties.
ProjectUniqueID

Return a string of random characters that Construct automatically generated to uniquely
identify this specific project.
ProjectVersion

Return the version entered in to Project Properties. Note that this is always returned as a
string, not a number.

Text
find(src, text)
findCase(src, text)

Find the first index within src that text occurs, else returns -1. find is case-insensitive, and
findCase is case-sensitive.
left(text, count)

Return the first count characters of text.
len(text)

Return the number of characters in text.
lowercase(text)

Convert the given text to all lowercase.
mid(text, index, count)

Return the count characters starting from index in text. Note count can be set to -1 to return
characters from index to the end of the string.
newline

A string containing a line break. Use to insert line breaks in to strings, e.g. "Hello" & newline
& "World"

Page 873 of 1146

Construct 3 Official Manual

RegexMatchAt(String, Regex, Flags, Index)

Process the regular expression Regex on String with Flags, and in the list of results, return
the entry at Index.
RegexMatchCount(String, Regex, Flags)

Process the regular expression Regex on String with Flags, and return the number of entries
in the list of results.
RegexReplace(String, Regex, Flags, Replace)

In String substitute matches for the regular expression Regex (with Flags) with the string
Replace. The replacement string can contain the following special characters: $$ (inserts a
$), $& (inserts the matched substring), $` (inserts the portion of the string that precedes the
matched substring), or $' (inserts the portion of the string that follows the matched
substring).
RegexSearch(String, Regex, Flags)

Return the index of the first character in String where a match for Regex with Flags could be
found.
replace(src, find, rep)

Find all occurrences of find in src and replace them with rep.
right(text, count)

Return the last count characters of text.
StringSub(text, sub1 [, sub2...])

Substitute placeholders of the form {n} in the given string. This expression accepts a
variable number of parameters. For example StringSub("Hello {0}!", "Sam") returns Hello
Sam!, as the placeholder {0} is replaced with the first provided additional parameter.
Further parameters can be provided by increasing the number in the placeholder, e.g.
StringSub("Hi {0}, your score is {1}!", "Sam", 100) returns Hi Sam, your score is 100!.
Note the substitutions can be either strings or numbers. If there are multiple occurrences of
the same placeholder, they are all replaced. If a placeholder is used for which a parameter is
not provided, then it is left as-is, e.g. StringSub("Hi {0}, your score is {1}!", "Sam")
returns Hi Sam, your score is {1}! as there is only one substitution provided.
tokenat(src, index, separator)

Page 874 of 1146

Construct 3 Official Manual

Return the Nth token from src, splitting the string by separator. For example,
tokenat("apples|oranges|bananas", 1, "|") returns oranges.
Use the Array object's Split string action for more flexibility. To better handle more
complex data, use a more robust data format like JSON.

tokencount(src, separator)

Count how many tokens occur in src using separator. For example,
tokencount("apples|oranges|bananas", "|") returns 3.

trim(src)

Return src with all whitespace (spaces, tabs etc.) removed from the beginning and end of the
string.
uppercase(text)

Convert the given text to all uppercase.
URLEncode(str)
URLDecode(str)

Convert to and from a string in a format suitable for including in a URL or POST data.
zeropad(number, digits)

Pad number out to a certain number of digits by adding zeroes in front of the number, then
returning the result as a string. For example, zeropad(45, 5) returns the string "00045".

Time
CPUUtilisation

The percentage of the last second that was spent in logic, such as running events or
processing behaviors. This is for performance measurements. Note on most devices the
rendering happens on the separate GPU and so is not counted by this measurement; for that
fps or GPUUtilisation is a better measure. Also note this measurement is based on timers so
should be treated as an approximation, and it only measures time on the main thread.
This measurement can be unreliable, especially when the system is largely idle. Most
modern devices deliberately slow down the CPU if not fully loaded in order to save
power. This means work takes longer to get done, and this expression will misleadingly
return a higher measurement, since it's based on timing how long the work takes. It will

Page 875 of 1146

Construct 3 Official Manual

generally only be reliable in the device's maximum performance mode, i.e. under full
load.

dt

Delta-time in seconds. See Delta-time and framerate independence.
fps

How many frames per second (FPS) the project is rendering. The most common display
refresh rate is 60 Hz, so typically an efficiently designed project will render at 60 FPS. Note
however if nothing is changing on-screen, then nothing is rendered, and so the FPS
measurement may fall to 0 or display a lower result; this does not indicate poor performance,
only that fewer frames are necessary to render. The TicksPerSecond expression of the
Platform Info object indicates how frequently the engine is stepping, which may be different
to the frames rendered per second.
GPUUtilisation

The percentage of the last second that was spent rendering graphics. This represents how
busy the graphics processing unit (GPU) is, which is useful for performance measurements.
This measurement is based on timers so should be treated as an approximation. The GPU
utilisation is only affected by the amount of rendering work to be done, such as the number
of objects visible on-screen, and also increases if the window size is larger. Note this
measurement is only available on certain systems. If it is not supported, it will return NaN (a
special value representing Not A Number) to indicate there is no value available.
See the note under CPUUtilisation about possibly unreliable measurements in some
circumstances. This also applies to the GPU and can affect this measurement too.

tickcount

The number of ticks that have run since the project started.
time

The number of seconds since the project started, taking in to account the time scale.
timescale

The current time scale.
wallclockdt

Page 876 of 1146

Construct 3 Official Manual

This is the same as the dt expression, but is not affected by the time scale. This can be
useful to still obtain the real-world delta-time value when the project is paused by setting the
time scale to 0, which causes dt to also become 0.
wallclocktime

The number of seconds since the project started, not taking in to account the time scale (i.e.
the real-world time).
Unlike other time expressions, wallclocktime can update during the same tick, such as
within a long loop. This means it can be used for things like performance measurements,
or doing work for a fixed period of time.

Values
choose(a, b [, c...])

Choose one of the given parameters at random. E.g. choose(1, 3, 9, 20) randomly picks
one of the four numbers and returns that. This also works with strings, e.g. choose("Hello",
"Goodbye") returns either Hello or Goodbye. Any number of parameters can be used as long
as there are at least two.
chooseindex(index, value0[, ...])

Choose one of the given parameters by a zero-based index. For example:
chooseindex(0, "foo", "bar", "baz")

returns "foo"

chooseindex(1, "foo", "bar", "baz")

returns "bar"

chooseindex(2, "foo", "bar", "baz")

returns "baz"

Any number of parameters can be included after the index (but there must be at least one). If
the index is out of range, it returns either the first or last value, e.g. in the above example an
index of -1 will still return "foo".
clamp(x, lower, upper)

Return lower if x is less than lower, upper if x is greater than upper, else return x.
float(x)

Convert the integer or text x to a float (fractional number). If x is text, non-numeric characters
are allowed after the number, but not before. For example float("3.1xx") returns 3.1, but

Page 877 of 1146

Construct 3 Official Manual

float("xx3.1")

returns 0.

int(x)

Convert the float or text x to an integer (whole number). If x is text, non-numeric characters
are allowed after the number, but not before. For example int("33xx") returns 33, but
int("xx33") returns 0.

random(x)

Generate a random float from 0 to x, not including x. E.g. random(4) can generate 0, 2.5,
3.29293, but not 4. Use floor(random(4)) to generate just the whole numbers 0, 1, 2, 3.

random(a, b)

Generate a random float between a and b, including a but not including b.
rgbEx(r, g, b)
rgbEx255(r, g, b)
rgba(r, g, b, a)
rgba255(r, g, b, a)

Generate a single number containing a color with the given red, green, blue and optionally
alpha components. rgbEx and rgba use components in the range 0-100, whereas rgbEx255
and rgba255 use components in the range 0-255. When an alpha is not provided, the
resulting color is opaque. These are useful for conditions or actions taking a color parameter.
str(x)

Convert the integer or float x to a string. Generally this is not necessary since strings can be
built using the & operator, e.g. "Your score is " & score

Page 878 of 1146

Construct 3 Official Manual

SCRIPTING OVERVIEW
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/overview

Construct supports writing JavaScript or TypeScript code in the place of actions and events, as
well as in separate JavaScript or TypeScript files. This is a great way to learn to code, as well as
taking advantage of the full power of modern industry-standard programming languages in your
projects.

JavaScript is not Java
Note Java is a completely different programming language to JavaScript. This is a common
point of confusion. Try not to get the two mixed up. For example if you search the web for help
on JavaScript, be sure to specifically search for JavaScript and not Java, otherwise you will get
results for the wrong programming language!

JavaScript vs. TypeScript
TypeScript is essentially an extension of JavaScript that adds static type features. Whereas
JavaScript is a dynamic language that allows variables and properties to hold any data and
change at any time, TypeScript uses type annotations to more strictly validate code. To illustrate
the difference, here is a sample JavaScript function:
function add(a, b)
{
return a + b;
}

This function is intended to add two numbers, but can actually be called with strings, objects, or
anything else - and it may then produce unintended results. The same function in TypeScript
looks like this:
function add(a: number, b: number)
{
return a + b;
}

The only difference is the addition of : number in the parameters, which specifies they must be
numbers. Then TypeScript will enforce this restriction, helping to avoid any mistakes.
Browsers can only directly run JavaScript, so TypeScript code is converted (or "compiled") to