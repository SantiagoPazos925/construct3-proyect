# Manual Construct 3  Parte 30 (líneas 3480136000)

## Resumen
- async function doTween(runtime) (línea 7)
- More examples (línea 20)
- Some examples of valid calls to startTween are shown below (assuming Tween represents this (línea 21)
- behavior). (línea 22)
- loop: true, (línea 34)
- pingPong: true (línea 35)
- startValue: 100 (línea 41)
- Tween properties (línea 45)
- When using the startTween method, the prop parameter must be one of the strings given in (línea 46)
- the table below. Each property also lists how many values are expected for the endValue (línea 47)
- Property (línea 49)
- Number of values (línea 51)
- 1 (in radians) (línea 77)
- 1 (in 0-1 range) (línea 78)
- 3 (RGB values in 0-1 range) (línea 79)
- Ease names (línea 83)
- When using the startTween method, the ease parameter must be one of the strings given in (línea 84)
- the table below, or the name of a custom ease in the project. (línea 85)
- Tween behavior APIs (línea 127)
- startTween(prop, endValue, time, ease, opts) (línea 128)

## Contenido

async function doTween(runtime)
{
// Get a Sprite instance with the Tween behavior
const inst = runtime.objects.Sprite.getFirstInstance();
// Create a tween that moves it to (300, 300) over 2 seconds

const tween = inst.behaviors.Tween.startTween("position", [300, 300], 2, "in-out-sine");
// Wait for the tween to finish
await tween.finished;
// Log to the console now the tween has finished
console.log("Tween finished");
}

More examples
Some examples of valid calls to startTween are shown below (assuming Tween represents this
behavior).
// Tween X position to 300 over 2 seconds linearly
Tween.startTween("x", 300, 2, "linear");

Page 981 of 1146

Construct 3 Official Manual

// Tween position to (300, 300) over 2 seconds with ease "in-out-sine"
Tween.startTween("position", [300, 300], 2, "in-out-sine");
// Looping ping-pong tween to size 200x200 every 0.5 seconds
Tween.startTween("size", [200, 200], 0.5, "out-sine", {
loop: true,
pingPong: true
});
// Tween color to blue over 1.5 seconds linearly
Tween.startTween("color", [0, 0, 1], 1.5, "linear");
// Value tween from 100 to 200 linearly over 3 seconds
const t = Tween.startTween("value", 200, 3, "linear", {
startValue: 100
});
// (then read t.value over time)

Tween properties
When using the startTween method, the prop parameter must be one of the strings given in
the table below. Each property also lists how many values are expected for the endValue
parameter; if more than 1, they should be passed as an array.
Property

Number of values

"x"
"y"
"position"
"width"
"height"
"x-scale"
"y-scale"
"size"
"scale"
"angle"
"opacity"
"color"
"z-elevation"
"value"

1
1
2
1
1
1
1
2
2
1 (in radians)
1 (in 0-1 range)
3 (RGB values in 0-1 range)
1
1

Ease names
When using the startTween method, the ease parameter must be one of the strings given in
the table below, or the name of a custom ease in the project.
"linear"
"in-sine"
"in-elastic"
"in-back"

"out-sine"
"out-elastic"
"out-back"

"in-out-sine"
"in-out-elastic"
"in-out-back"

Page 982 of 1146

Construct 3 Official Manual

"in-bounce"
"in-cubic"
"in-quadratic"
"in-quartic"
"in-quintic"
"in-circular"
"in-exponential"

"out-bounce"
"out-cubic"
"out-quadratic"
"out-quartic"
"out-quintic"
"out-circular"
"out-exponential"

"in-out-bounce"
"in-out-cubic"
"in-out-quadratic"
"in-out-quartic"
"in-out-quintic"
"in-out-circular"
"in-out-exponential"

Tween behavior APIs
startTween(prop, endValue, time, ease, opts)

Start a tween running for a property to a given end value, over a time given in seconds, with
an ease function specified by ease . Returns an ITweenState representing the running
tween.
must be a string of one of the property names given in the table in the section
Tween properties above.
prop

must be either a number, or an array of numbers, depending on prop . In the
table of properties above, where the Number of values is 1, this must be a number; where
it is greater than 1, it must be an array with that many values.
endValue

time

is the duration the tween will run for in seconds.

is a string of the name of one of the built-in eases in the section Ease names
above, or the name of a custom ease in the project.
ease

The opts parameter is optional for providing further parameters via object properties. The
following properties can be used:
tags : a list of tags to assign to the tween, specified either as a space-separated string,

or an array of strings
destroyOnComplete : a boolean indicating whether to automatically destroy the instance

once the tween completes (default false)
loop : a boolean indicating whether to repeat the tween when it reaches the end (default

false)
repeatCount : the number of times to repeat the tween (default 1).

pingPong : a boolean indicating whether to alternate the playback direction when

repeating (default false)
Page 983 of 1146

Construct 3 Official Manual

startValue : for value tweens only, specifies the start value (default 0).

See above for some code examples demonstrating some of the ways this method can be
called.
*allTweens()

Iterates all actively running tweens created by the behavior, represented with ITweenState.
*tweensByTags(tags)

Iterates all actively running tweens matching the given set of tags, represented with
ITweenState. The tags may be specified as either a space-separated string, or an array of
strings.
isEnabled

A boolean indicating if the behavior is enabled. If disabled, the behavior no longer has any
effect on the object.

Page 984 of 1146

Construct 3 Official Manual

IRENDERER SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/graphics-interfaces/irenderer-interface

The IRenderer script interface provides access to Construct's renderer in the runtime. The
same interface can be used regardless of the underlying rendering technology (e.g. WebGL or
WebGPU). The interface's methods provide high-level drawing commands implemented by
Construct, so you don't need to handle low-level concerns like vertex buffers.
can be used both in project code, such as with the ILayer events "beforedraw" and
"afterdraw" , and in the addon SDK for drawing plugins.
IRenderer

Renderer state
uses a persistent rendering state. Therefore to correctly render something, all the
intended state must be specified, otherwise it will use an undefined previous state. IRenderer
simplifies the renderer state to:
IRenderer

1

A blend mode. Typically a normal alpha blend mode is used.

2

A fill mode (internally, the current fragment shader). The fill modes can be color fill (draw a solid
color), texture fill (draw a texture), and smooth line fill (for drawing smooth lines).

3

A color set by setColor() or setColorRgba() . The alpha component of the color is used as the
opacity in texture fill mode.

4

A texture set by setTexture() . This is only used in texture fill mode.

There are two other states that are more applicable to 3D content:
The face culling mode, set by setCullFaceMode()
The front face winding that is also used by the face culling mode, set by
setFrontFaceWinding()

A drawing method should begin by at least specifying the blend mode, the fill mode, the color,
and the texture (if texture fill mode is used), before continuing to draw. The renderer efficiently
discards redundant calls, so if the state does not actually change then these calls have minimal
performance overhead.
Once all state is set up, quads can be issued using one of the rect() or quad() method
overloads. These methods draw using the currently set state.

Texture options

Page 985 of 1146

Construct 3 Official Manual

Some texture methods accept the same options objects to specify the texture parameters. To
avoid repeating them, the common options that can be specified are documented below.
wrapX : the texture horizontal wrap mode: one of "clamp-to-edge" , "repeat" , "mirrorrepeat"
wrapY : as with wrapX

but for the vertical wrap mode

sampling : the texture sampling mode, one of "nearest" , "bilinear"

or "trilinear"

(default)
mipMap : boolean indicating if mipmaps should be used for this texture, default true

Methods
setAlphaBlendMode()

Set the blend mode to a premultiplied alpha blending mode.
setBlendMode(blendMode)

Set the blend mode by a string which must be one of "normal" , "additive" , "copy" ,
"destination-over" , "source-in" , "destination-in" , "source-out" , "destination-out" ,
"source-atop" , "destination-atop" . Passing "normal" is equivalent to calling
setAlphaBlendMode() .

setColorFillMode()

Set the fill mode to draw a solid color, specified by the current color.
setTextureFillMode()

Set the fill mode to draw a texture, specified by the current texture, and using the alpha
component of the current color as the opacity.
setSmoothLineFillMode()

Set the fill mode to draw smooth lines using the current color.
setColor(color)

Set the current color from a four-element array representing the RGBA components in [0, 1]
range, e.g. [1, 0, 0, 1] for opaque red.

setColorRgba(r, g, b, a)

Set the current color by directly passing the RGBA components. in [0, 1] range.

Page 986 of 1146

Construct 3 Official Manual

setOpacity(o)

Set only the alpha component of the current color in [0, 1] range. Note this does not affect
the RGB components.
resetColor()

Set the current color to opaque white (1, 1, 1, 1).
setCullFaceMode(mode)
getCullFaceMode()

Set or get the face culling mode, which may be one of the following strings:
"none" : all faces are rendered

"back" : back faces are culled

"front" : front faces are culled

Whether a face counts as front or back depends on the front face winding (see
setFrontFaceWinding() ). The default mode is "none" .
Note that mirrored or flipped sprites are in fact showing a back face, which is why
Construct defaults to "none" .

setFrontFaceWinding(mode)
getFrontFaceWinding()

Set or get the front face winding, which is used to determine whether a triangle is front
facing or back facing depending on the order ("winding") of the vertices. This is used by the
cull face mode (see setCullFaceMode() ). The mode may be either the string "cw" for
clockwise winding, or "ccw" for counter-clockwise winding. The default mode is "cw" ,
because most content that Construct renders itself uses clockwise winding.
setCurrentZ(z)
getCurrentZ()

Set and get the current Z component used for all 2D drawing commands that don't specify Z
components, such as the rect2() and quad3() .

rect(rect)

Draw a rectangle given by an DOMRect.
Page 987 of 1146

Construct 3 Official Manual

rect2(left, top, right, bottom)

Draw a rectangle by directly passing the left, top, right and bottom positions.
quad(quad)

Draw a quad given by a DOMQuad.
quad2(tlx, tly, trx, try_, brx, bry, blx, bly)

Draw a quad by directly passing the positions of each of the four points in the quad.
quad3(quad, rect)

Draw a quad given by a DOMQuad, using a DOMRect for the source texture co-ordinates to
draw from.
quad4(quad, texQuad)

Draw a quad given by an DOMQuad, using another DOMQuad for the source texture coordinates to draw from.
quad5(quad, texQuad, colorArr)

As with quad4 , but adds a colorArr parameter for per-vertex colors. This must be a
Float32Array with 16 elements in the order r, g, b, a for the top-left, top-right, bottom-right and
bottom-left vertices, in that order.
quad3D(tlx, tly, tlz, trx, try_, trz, brx, bry, brz, blx, bly, blz, rect)
quad3D2(tlx, tly, tlz, trx, try_, trz, brx, bry, brz, blx, bly, blz, texQuad)
quad3D3(tlx, tly, tlz, trx, try_, trz, brx, bry, brz, blx, bly, blz, texQuad, colorArr)

Draw a 3D quad, specifying all four points of the quad with X, Y and Z co-ordinates. The first
method accepts texture co-ordinates via a DOMRect rect. The second method accepts
texture co-ordinates via a DOMQuad texQuad. The third is the same as the second, but adds
a colorArr parameter for per-vertex colors. This must be a Float32Array with 16 elements
in the order r, g, b, a for the top-left, top-right, bottom-right and bottom-left vertices, in that
order.
drawMesh(posArr, uvArr, indexArr, colorArr)

Draw an array of textured triangles based on the given position, texture co-ordinate and index
arrays, and an optional per-vertex color array. The posArr parameter must be a
Float32Array of vertex positions in the sequence x, y, z (and therefore its size must be a
multiple of 3). The uvArr parameter must be a Float32Array of texture co-ordinates in the
sequence u, v (and therefore its size must be a multiple of 2). The indexArr parameter must
Page 988 of 1146

Construct 3 Official Manual

be a Uint16Array of indices of vertices and texture co-ordinates, in the sequence i, j, k with
each set defining a single triangle to be drawn (and therefore its size must be a multiple of
3). Note that indices refer to the index of a vertex, rather than a direct index in to either array,
e.g. a position array with elements x1, y1, z1, x2, y2, z2 has six elements but defines two
vertices, and so index 1 refers to the second vertex. If colorArr is specified, it must be a
Float32Array of colors in the sequence r, g, b, a (and therefore its size must be a multiple of
4). These colors override the renderer's current color. If colorArr is not specified, it uses the
renderer's current color for every vertex. For a code sample, see the section Drawing meshes
below.
Note that for performance reasons, this method does not take in to account the layer Z
elevation - all Z co-ordinates are used exactly as-is. If you wish to apply the layer Z
elevation, you must offset all the position Z components yourself.

convexPoly(pointsArray)

Draw a convex polygon using the given array of points, in alternating X, Y order. Therefore the
size of the array must be even, and must contain at least six elements (to define three
points).
line(x1, y1, x2, y2)

Draws a quad from the point (x1, y1) to (x2, y2) with the current line width.
texturedLine(x1, y1, x2, y2, u, v)

Draws a quad from the point (x1, y1) to (x2, y2) with the current line width, and using (u, 0) as
the texture co-ordinates at the start, and (v, 0) as the texture co-ordinates at the end.
lineRect(left, top, right, bottom)

Draws four lines along the edges of a given rectangle.
lineRect2(rect)

Draws four lines along the edges of a given DOMRect.
lineQuad(quad)

Draws four lines along the edges of a given DOMQuad.
pushLineWidth(w)
popLineWidth()

Page 989 of 1146

Construct 3 Official Manual

Set the current line width for line-drawing calls. This must be followed by a popLineWidth()
call when finished to restore the previous line width.
pushLineCap(lineCap)
popLineCap()

Set the current line cap for line-drawing calls. This must be followed by a popLineCap() call
when finished to restore the previous line cap. The available line caps are "butt" and
"square" .

setTexture(texture)

Set the current texture to a given ITexture.
createStaticTexture(data, opts)

Create an ITexture with the content specified by data . This method is asynchronous and so
returns a Promise that resolves with the created ITexture . The data parameter may be
one of HTMLImageElement , HTMLCanvasElement , OffscreenCanvas or ImageBitmap . (Note
that in worker mode, only OffscreenCanvas and ImageBitmap are available.) opts specifies
options for the texture - see the section Texture options above for more details.
Static textures do not support changing their content, and are optimized accordingly. If
you want to be able to change the content of a texture, use createDynamicTexture() .

createDynamicTexture(width, height, opts)

Create a new empty ITexture for dynamic use, i.e. expecting the texture content to be
replaced using updateTexture() . The size of the texture is given by width and height
which must be positive integers. opts specifies options for the texture - see the section
Texture options above for more details.
updateTexture(data, texture, opts)

Upload data as the new texture contents for the ITexture texture. This can only be used for
textures created with createDynamicTexture() and managed by your addon.
data can be one of the following types: HTMLImageElement , HTMLVideoElement ,
HTMLCanvasElement , ImageBitmap , OffscreenCanvas or ImageData . Note in worker mode
the DOM types cannot be used ( HTMLImageElement , HTMLVideoElement , HTMLCanvasElement );
in this case use ImageBitmap or OffscreenCanvas instead. This method cannot resize an
existing texture, so the data must match the size the texture was created with; if the size
needs to change, destroy and re-create the texture.
opts specifies options for the texture upload which is an object that can include the following
properties:
Page 990 of 1146

Construct 3 Official Manual

premultiplyAlpha : a boolean indicating whether to premultiply alpha of the image

content specified by data (default true). Construct always renders using premultiplied
alpha so this is normally necessary; however if the data is known to already be
premultiplied, set this to false.
deleteTexture(texture)

Delete an ITexture, releasing its resources. This can only be used for textures created with
createDynamicTexture() and managed by your addon. Do not attempt to delete textures
managed by the Construct engine.
async loadTextureForImageInfo(imageInfo, opts)

For use with the addon SDK. Load a texture for a given IImageInfo. Returns a promise that
resolves with the loaded ITexture. opts specifies options for the texture - see the section
Texture options above for more details.
releaseTextureForImageInfo(imageInfo)

For use with the addon SDK. Release a texture for a given IImageInfo that was previously
loaded with loadTextureForImageInfo() .

getTextureForImageInfo(imageInfo)

For use with the addon SDK. Returns the existing ITexture for a given IImageInfo that was
previously loaded with loadTextureForImageInfo() , or returns null if no texture is loaded
(or the texture is still asynchronously loading).
createRendererText()

Return a new IRendererText interface. This manages text wrapping, drawing text, and
uploading the results to a WebGL texture.
setDeviceTransform()

Set the co-ordinate system to be in device transform mode, which is in units of device pixels
and relative to the screen. This can be useful for achieving pixel-perfect rendering.
setLayerTransform(layer)

Set the co-ordinate system to match the given ILayer. This is the default mode - this method
is normally called after setDeviceTransform() to restore normal rendering.

Drawing meshes

Page 991 of 1146

Construct 3 Official Manual

The drawMesh() method allows passing typed arrays with vertex, texture co-ordinate, index, and
optionally color data, for efficient rendering of entire meshes. Note that the mesh drawn with this
method uses the same renderer state (blend mode, fill mode, color and texture) for all triangles.
To draw parts of the mesh with different renderer state, you will need to make multiple calls to
drawMesh() with other calls to change state in between. You can create typed arrays over
different ranges of the same ArrayBuffer to draw sections of a mesh - see the MDN guide on
TypedArray for more details.
Here is some sample code for using drawMesh() . This draws four triangles arranged as two
quads with the single call to drawMesh() . This code assumes quad is a DOMQuad of the first
quad to draw, and the second quad is drawn shifted 200px to the right; and that rcTex is the
texture co-ordinates to use (which is repeated for both quads).
// Vertex positions as sequence of x, y, z
const posArr = new Float32Array([
quad.p1.x, quad.p1.y, 0,
quad.p2.x, quad.p2.y, 0,
quad.p3.x, quad.p3.y, 0,
quad.p4.x, quad.p4.y, 0,
quad.p1.x + 200, quad.p1.y, 0,
quad.p2.x + 200, quad.p2.y, 0,
quad.p3.x + 200, quad.p3.y, 0,
quad.p4.x + 200, quad.p4.y, 0
]);
// Texture co-ordinates as sequence of u, v
const uvArr = new Float32Array([
rcTex.left, rcTex.top,
rcTex.right, rcTex.top,
rcTex.right, rcTex.bottom,
rcTex.left, rcTex.bottom,
rcTex.left, rcTex.top,
rcTex.right, rcTex.top,
rcTex.right, rcTex.bottom,
rcTex.left, rcTex.bottom
]);
// Indices of vertices in sequence i, j, k
const indexArr = new Uint16Array([
0, 1, 2,
0, 2, 3,
4, 5, 6,
4, 6, 7,

Page 992 of 1146

Construct 3 Official Manual

]);
renderer.drawMesh(posArr, uvArr, indexArr);

Also note that the usual drawing methods (e.g. quad methods) automatically apply the current
layer's Z elevation. For performance reasons, drawing meshes does not do this automatically,
and will just use the Z components in the positions array as absolute values. If you want the
content to move with layer Z elevation, you'll need to offset the Z components in the positions
array yourself.

Page 993 of 1146

Construct 3 Official Manual

IRENDERERTEXT SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/graphics-interfaces/irenderertext

The IRendererText interface manages text wrapping, drawing text to a canvas, and then
uploading the result to a texture. This makes it easy to display text in Construct's renderer. It is
created via the IRenderer method createWebGLText() .

IRendererText APIs
release()

Destroy the object and its resources. IRendererText must be released when it is no longer
needed; do not simply drop references, otherwise not all of its resources will be collected. If
you are developing a plugin that creates an IRendererText, it should release any it still uses in
its own _release() method.

fontFace

Set or get a string of the name of the font face used for drawing text.
sizePt

Set or get the size of the font, in points, used for drawing text.
lineHeight

Set or get the extra line height spacing, in pixels, used for drawing text. Note 0 is the default,
indicating no offset to the default line height.
isBold

Set or get a boolean indicating whether the text is bold.
isItalic

Set pr get a boolean indicating whether the text is italic.
setColor(color)

Set the color of the text using an array with three elements for the RGB components in the
range [0, 1].

Page 994 of 1146

Construct 3 Official Manual

SetColorRgb(r, g, b)

Set the color of the text using separate RGB components in the range [0, 1].
setCssColor(str)

Set the color of the text using a string with a CSS color, e.g. "red", "#00ffee", "rgb(0, 128, 192)"
etc.
horizontalAlign

Set or get the horizontal alignment of the text within its bounding box. This can be one of
"left" , "center" or "right" .

verticalAlign

Set the vertical alignment of the text within its bounding box. This can be one of "top" ,
"center" or "bottom" .

wordWrapMode

Set the word wrapping mode. This can be one of "word" (for space-delimited word
wrapping) or "character" (for wrapping on any character).

textDirection

Set or get the text writing direction, which can be one of "ltr" or "rtl" .

text

Set or get the text string to be drawn.
setSize(width, height, zoomScale)

Set the size of the area that text can be drawn in. The size is specified in CSS pixels. The
zoomScale can be increased to render the text at a higher resolution, which can be useful
when zooming in.
getTexture()

Get an ITexture interface representing the texture with the requested text rendered on to it.
Note: the texture is generated asynchronously, so can return null when first requested.
Use setTextureUpdateCallback() to get a callback when the texture has updated.

getTexRect()

Page 995 of 1146

Construct 3 Official Manual

Return a DOMRect representing the content area of the text on the texture. This is the subset
of the texture that ought to be rendered. Note: this is only valid when getTexture() returns a
non-null result.
setTextureUpdateCallback(callback)

Set a function to call when the texture containing the rendered text is updated. Since the
texture is generated asynchronously, this is necessary to know when to redraw anything that
may be displaying the text, so they can redraw with the updated texture.
releaseTexture()

Release the underlying texture. This can be used to save memory. However the texture will
be re-created the next time getTexture() is called.

textWidth
textHeight

Return the size of the text bounding box after processing word wrap. This allows determining
the size of the actual visible text, rather than the box used for word wrap bounds.

Page 996 of 1146

Construct 3 Official Manual

ITEXTURE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/graphics-interfaces/itexture

The ITexture interface represents a texture for use with the renderer.
This interface cannot be directly constructed. It is only available through other APIs.

ITexture APIs
width
height

Return the width or height of the texture. Note this refers to the source texture. Construct's
in-editor spritesheeting engine means the texture could be significantly larger than an
object's image to be rendered from it.

Page 997 of 1146

Construct 3 Official Manual

LAYOUT SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/layout-interfaces/ilayout

The ILayout script interface represents a layout in the project.

Getting an ILayout
The ILayout interface is typically accessed via the IRuntime layout property, e.g.
runtime.layout . This represents the current running layout. Other layouts can be accessed via
the IRuntime methods getLayout() and getAllLayouts() .

Layout events
The following events can be listened for using the addEventListener method.

"beforelayoutstart"
"afterlayoutstart"

Fired when the layout starts. "beforelayoutstart" fires just before On start of layout, and
"afterlayoutstart" fires just after. In both events, all instances on the layout are created
and available to modify.
These events can use async handler functions, and the runtime will wait for them to
finish before continuing.

"beforelayoutend"
"afterlayoutend"

Fired when the layout ends due to changing to another layout. "beforelayoutend" fires just
before On end of layout, and "afterlayoutend" fires just after. In both events, all instances
on the layout are still available, but all non-global instances are destroyed immediately after
the "afterlayoutend" event.
These events can use async handler functions, and the runtime will wait for them to
finish before continuing.

Layout APIs
runtime

Page 998 of 1146

Construct 3 Official Manual

A reference back to the IRuntime interface.
name

A read-only string of the layout name.
index

A read-only number of the zero-based index of the layout in the order it appears in the Project
Bar.
addEventListener(eventName, callback)
removeEventListener(eventName, callback)

Add or remove a callback function for an event. See Layout events above for the available
events.
width
height
setSize(width, height)
getSize()

Set or get the size of the layout. The methods allow setting and getting both values at the
same time.
Note a layout cannot have a zero or negative size.

scrollX
scrollY
scrollTo(x, y)
getScrollPosition()

Set or get the scroll position in layout co-ordinates. scrollTo() is a shorthand for setting
both scrollX and scrollY , and getScrollPosition() returns both scroll co-ordinates at
the same time.
isUnboundedScrolling

A read-only boolean reflecting the state of the Unbounded scrolling layout property.
scale

Page 999 of 1146

Construct 3 Official Manual

Set or get the layout scale, with 1 being the default scale, 2 being 2x scale, etc. This
scales all the layers in the layout, taking in to account their scale rate property.
angle

Set the layout angle in radians. This rotates all the layers in the layout.
projection

Set or get a string specifying the current layout projection, which must be one of
"perspective" or "orthographic" . For more details see Projection in Layout Properties.

setVanishingPoint(vpX, vpY)
getVanishingPoint()

Set or get the Vanishing point layout property, with each component in the range 0-1. The
getter returns an array with two elements in the form [vpX, vpY] .

effects

An array of IEffectInstance representing the effect parameters of the effects on this layout.

Layer APIs
These APIs relate to the set of layers on the layout.
getLayer(layerNameOrIndex)

Get an ILayer interface for a layer on the layout, by a case-insensitive string of its name or its
zero-based index. When passing a number, an out-of-range number is clamped to the valid
range and the nearest layer returned. When passing a string, if no layer with the given name
is found, the method returns null .

*allLayers()

Iterates ILayer interfaces representing all the layers on the layout, in increasing Z order.
getAllLayers()

Return an array of ILayer interfaces representing all the layers on the layout, in increasing Z
order.
addLayer(layerName, insertBy, where)

Create a new layer and insert it to the layer tree at runtime (also known as a dynamic layer).
layerName is a string of the name to use for the added layer, which must be different to all
Page 1000 of 1146

Construct 3 Official Manual

existing layers already added, including other dynamic layers. insertBy is an ILayer of
another layer to insert the new layer relative to. where specifies where to insert the new
layer relative to the insertBy layer, which may be one of the following strings:
"above"

or "below" : insert adjacent to the insertBy layer, above or below it in Z order.

or "bottom-sublayer" : insert as a sub-layer of the insertBy , at the top
or bottom of its existing sub-layers. insertBy may also be null , in which case the new
layer is added at the top or bottom at the root level of the layer tree.
"top-sublayer"

moveLayer(layerToMove, insertBy, where)

Remove and re-insert a layer to a new location in the layer tree. This works similarly to
addLayer() , except layerToMove refers to an ILayer that already exists; otherwise the
insertBy and where parameters are used in the same way.

removeLayer(layer)

Remove a given ILayer from the layer tree. This also removes any sub-layers of the removed
layer, and all objects on the layer or any of its sub-layers will be destroyed. A layout must
have at least one layer, so the last top-level layer cannot be removed.
removeAllDynamicLayers()

Removes all layers added using the addLayer() method, leaving only the layers added in the
editor. All objects on the removed layers will be destroyed. This can be useful to reset the
state of dynamic layers.

Page 1001 of 1146

Construct 3 Official Manual

LAYER SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/layout-interfaces/ilayout/ilayer

The ILayer script interface represents a layer on a layout.

Examples
See the Input event position example for a demonstration of using the layer cssPxToLayer()
method, which is useful when handling input events. The Custom Layer Drawing example also
demonstrates using code to draw custom content to a layer with the "afterdraw" event.

Layer events
The following events can be listened for using the addEventListener method.

"beforedraw"
"afterdraw"

Fired when the layer is drawn, allowing custom drawing code to draw on this layer. As
Construct uses a back-to-front renderer, content drawn in the "beforedraw" event will
appear underneath other content on the layer, and content drawn in the "afterdraw" event
will appear on top of other content on the layer. The event object has the following
properties:
renderer : the IRenderer script interface with which you can draw content.
layer : the ILayer

of the layer being drawn.

Only draw content inside this event. Construct does not expect you to draw anything
outside of this event (which includes code after an await ), and if you attempt to do so
anyway, it may not appear correctly.

Layer APIs
runtime

A reference back to the IRuntime interface.
name

A read-only string of the layer name.

Page 1002 of 1146

Construct 3 Official Manual

index

A read-only number with the zero-based index of the layer on its layout. The bottom layer has
an index of 0, with the index increasing upwards in Z order.
addEventListener(eventName, callback)
removeEventListener(eventName, callback)

Add or remove a callback function for an event. See Layer events above for the available
events.
layout

The ILayout interface representing the layout this layer belongs to.
parentLayer

A reference to the layer's parent ILayer if it is a sub-layer, else null if it is a top-level layer.

*parentLayers()

Iterates all the layer's parent layers, moving up towards the top of the hierarchy.
*subLayers()

Iterates the layer's own sub-layers in increasing Z order. This does not iterate any sub-layers
at lower levels in the hierarchy.
*allSubLayers()

Iterates the layer's sub-layers and further sub-layers beneath those recursively, in increasing
Z order.
isInteractive

A boolean indicating if the layer is interactive, allowing its content to respond to mouse and
touch input.
Note that this returns the layer's own interactive state. If it has a non-interactive parent
layer, this property can be true but the layer will still not be interactive. Use
isSelfAndParentsInteractive to check if the layer and all its parents are interactive.

isSelfAndParentsInteractive

A read-only boolean indicating if both this layer and all its parent layers are set to be
interactive. If this is true the layer content will respond to mouse and touch input.
Page 1003 of 1146

Construct 3 Official Manual

isVisible

A boolean indicating if the layer is visible. When invisible, the layer skips drawing entirely.
Note that this returns the layer's own visibility state. If it has an invisible parent layer, this
property can be true but the layer will still not be visible. Use
isSelfAndParentsVisible to check if the layer and all its parents are visible.

isSelfAndParentsVisible

A read-only boolean indicating if both this layer and all its parent layers are set to visible. If
this is true the layer will be drawn.
isTransparent

A boolean indicating if the layer background is transparent. When transparent, the
background color is ignored.
backgroundColor

Set or get the background color of a layer as an array with 3 elements specifying the red,
green and blue components with values in the 0-1 range. Note this is ignored if the layer is
transparent.
isHTMLElementsLayer

A boolean indicating if this layer acts as a HTML layer. For more information see HTML
layers.
scrollX
scrollY
scrollTo(x, y)
getScrollPosition()
restoreScrollPosition()

Independently scroll a layer, regardless of where the layout is scrolled to. By default layers all
follow the layout scroll position. Upon setting a layer's scroll position, the layer will stop
following the layout scroll position, and remain scrolled at the position specified. The
restoreScrollPosition() method reverts the layer to the default mode where it follows the
layout scroll position. When not independently scrolling a layer, the scrollX and scrollY
getters return the layout scroll position.
parallaxX
parallaxY

Page 1004 of 1146

Construct 3 Official Manual

Set or get the horizontal and vertical parallax rates of a layer.
opacity

The opacity of the layer, as a floating point number in the range [0, 1], where 0 is fully
transparent and 1 is fully opaque. Note that changing the opacity to a value other than 1 will
force the layer to render via its own texture.
scale

Set or get the layer scale, taking in to account its scale rate property.
scaleRate

Set or get the scale rate property of a layer, which affects how quickly it scales (if at all).
angle

Set or get the layer angle in radians.
zElevation

Set or get the Z elevation of the entire layer. By default the camera is at Z = 100, and looking
down to Z = 0. The default Z elevation is 0. Increasing it will move the layer upwards (towards
the camera) and decreasing it will move it downwards (away from the camera).
renderingMode

Set or get the Rendering mode layer property as a string of either "2d" or "3d" . This allows
dynamically changing a layer between rendering modes at runtime.
getViewport()

Return a DOMRect representing the bounds of the viewport on this layer in layout coordinates.
isForceOwnTexture

A boolean indicating the layer's Force own texture property. For more information see the
property in the Layers manual entry.
blendMode

A string indicating the blend mode of the layer, controlling how it draws over the other layers
behind it. This must be one of "normal" , "additive" , "copy" , "destination-over" ,

Page 1005 of 1146

Construct 3 Official Manual

"source-in" , "destination-in" , "source-out" , "destination-out" , "source-atop" ,
"destination-atop" .

effects

An array of IEffectInstance representing the effect parameters of the effects on this layer.
cssPxToLayer(clientX, clientY, z = 0)
layerToCssPx(layerX, layerY, z = 0)

Convert between positions in CSS pixels, such as the clientX/Y properties of an input
event, and layer co-ordinates within the project. An optional Z value can be provided to do the
conversion taking in to account Z elevation to a certain height on the layer. This is useful for
purposes like identifying what position in a layer was clicked in an input event, or positioning
a HTML element in layer co-ordinates. Both methods return a pair of co-ordinates in the form
[x, y] .

drawSurfaceToLayer(dsX, dsY, z = 0)
layerToDrawSurface(layerX, layerY, z = 0)

Convert between positions in layer co-ordinates and the draw surface in units of device
pixels. An optional Z value can be provided to do the conversion taking in to account Z
elevation to a certain height on the layer. Both methods return a pair of co-ordinates in the
form [x, y] . These methods are intended for the Addon SDK and are for identifying the
draw surface co-ordinates that correspond to an object.
renderScale

A read-only number with the render scale factor for this layer. This is intended for the Addon
SDK where plugins need this value to render taking in to account Construct's scale factor.

Page 1006 of 1146

Construct 3 Official Manual

IANIMATION SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/ianimation

The IAnimation interface represents an animation, typically from a Sprite object via its
ISpriteInstance interface. Each frame of the animation is represented by the IAnimationFrame
interface.

IAnimation APIs
name

A read-only string of the animation name.
speed

A read-only number with the animation playback speed in animation frames per second.
isLooping

A read-only boolean indicating if animation playback repeats when it reaches the end.
repeatCount

A read-only number indicating how many times to repeat the animation.
repeatTo

A read-only number of the zero-based frame index to go back to when repeating the
animation.
isPingPong

A read-only boolean indicating if the animation will reverse when reaching the start or end of
the animation.
frameCount

A read-only number of frames in this animation.
getFrames()

Return an array of IAnimationFrame representing all the frames in this animation in
sequence.
Page 1007 of 1146

Construct 3 Official Manual

*frames()

Iterates all IAnimationFrame in this animation in sequence.

Page 1008 of 1146

Construct 3 Official Manual

IANIMATIONFRAME SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/ianimationframe

The IAnimationFrame interface represents a single animation frame within an IAnimation. It
derives from the IImageInfo script interface.
Note that when accessing the origin, image points, or collision polygon points on
IAnimationFrame , the positions are returned in normalized form, in the range 0-1,
representing the position set in the editor. For example (0, 0) is the top-left point, (1, 1) is the
bottom-right, and (0.5, 0.5) is the middle. This differs from the ISpriteInstance methods
which return positions in layout co-ordinates based on the current location and orientation
of the Sprite instance it is called on.

IAnimationFrame APIs
duration

A read-only number with the relative duration of this animation frame, i.e. 1 for standard
speed, 2 for twice as long, etc.
tag

A string of the tag assigned for this frame in the Animation Editor.
originX
originY
getOrigin()

Read-only numbers with the normalized position of the origin within this animation frame,
ranging from 0-1. The method returns both values at the same time.
getImagePointCount()

Return the number of image points on the animation frame.
getImagePointX(nameOrIndex)
getImagePointY(nameOrIndex)

Page 1009 of 1146

Construct 3 Official Manual

getImagePoint(nameOrIndex)

Return the location of an image point on the animation frame in normalized co-ordinates, i.e.
ranging from 0-1. Image points are identified either by a case-insensitive string of their name,
or their index. If the image point is not found, this returns the origin instead. The
getImagePoint variant returns [x, y] .

getPolyPointCount()

Return the number of collision polygon points on the animation frame.
getPolyPointX(index)
getPolyPointY(index)
getPolyPoint(index)

Return the location of a collision polygon point on the animation frame in normalized coordinates relative to the origin, by its zero-based index. The getPolyPoint variant returns
[x, y] .
Note that the returned positions are both normalized and relative to the origin. For
example when the origin is at (0.5, 0.5), a collision poly point in the top-left corner has
the co-ordinates (-0.5, -0.5).

Page 1010 of 1146

Construct 3 Official Manual

IBEHAVIOR SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/ibehavior

The IBehavior interface represents a kind of behavior, such as Solid, Physics or Pin. Some
behaviors derive from this class to add extra options that are global to the entire behavior, such
as the physics world properties in the Physics behavior. This interface is usually accessed
through the IBehaviorInstance behavior property.

IBehavior APIs
runtime

A reference back to the IRuntime interface.
id

A read-only string with a unique identifier for this behavior as specified by the behavior
developer.
getAllInstances()

Return an array of all instances that have this kind of behavior, for example every object with
the Solid behavior. Note the returned instances may come from a range of different object
types.
static getByConstructor(ctor)

Return an IBehavior from its constructor in the C3.Behaviors namespace, or null if it
does not exist. For example IBehavior.getByConstructor(C3.Behaviors.Bullet) will return
the IBehavior interface representing the Bullet behavior, or null if the behavior is not used
in the project.

Page 1011 of 1146

Construct 3 Official Manual

IBEHAVIORINSTANCE SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/ibehaviorinstance

The IBehaviorInstance interface represents a behavior on an IInstance.
Many behaviors return a more specific class deriving from IBehaviorInstance to add APIs
specific to the behavior. See the Behavior instances reference for more information.

Getting an IBehaviorInstance
Behavior instances are typically accessed via the behaviors property of IInstance, followed by
the name of the behavior. Some example code is shown below.
const mySpriteInst = runtime.objects.Sprite.getFirstInstance();
const myBehaviorInst = mySpriteInst.behaviors.Platform;
// ... do something with myBehaviorInst ...

IBehaviorInstance APIs
addEventListener(type, func, capture)
removeEventListener(type, func, capture)

Add or remove an event handler for a particular type of event fired by an addon's script
interface. An event object is passed as a parameter to the handler function. See behavior