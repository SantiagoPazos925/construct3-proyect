# Manual Construct 3  Parte 20 (líneas 2280124000)

## Resumen
- Format the passed in number as a percent based on the current locale. (línea 8)
- FormatNumberAsCurrency(Number, Currency, CurrencyDisplay) (línea 9)
- Format the passed in number as a currency in the current locale. The currency argument (línea 11)
- must be a valid 3 letter ISO currency code - see this table for supported currencies. If an (línea 12)
- unsupported currency is passed in, a warning will be printed to console indicating all the (línea 13)
- FormatNumberWithUnit(Number, Unit, UnitDisplay) (línea 16)
- Format the passed number as a unit in the current locale. The unit argument can take any of (línea 18)
- RegionName(RegionLocale) (línea 26)
- Returns the region name of the passed in locale in the language of the current locale of the (línea 28)
- plugin. (línea 29)
- LanguageName(LanguageLocale) (línea 30)
- Returns the language name of the passed in locale in the language of the current locale of (línea 32)
- the plugin. (línea 33)
- CurrencyName(CurrencyCode) (línea 34)
- Returns the currency name of the passed 3 letter ISO currency code, in the language of the (línea 36)
- current locale of the plugin. (línea 37)
- JSON (línea 43)
- The JSON object can parse and read strings in JavaScript Object Notation (JSON) format, as (línea 46)
- well as writing data and converting the result back to a JSON string. A description of the JSON (línea 47)
- for on the web. (línea 49)

## Contenido


Format the passed in number as a percent based on the current locale.
FormatNumberAsCurrency(Number, Currency, CurrencyDisplay)

Format the passed in number as a currency in the current locale. The currency argument
must be a valid 3 letter ISO currency code - see this table for supported currencies. If an
unsupported currency is passed in, a warning will be printed to console indicating all the
supported currencies. The currencyDisplay argument can be any of "symbol",
"narrowSymbol", "code", "name". Using an unsupported value will default to "symbol".
FormatNumberWithUnit(Number, Unit, UnitDisplay)

Format the passed number as a unit in the current locale. The unit argument can take any of
the values defined in this table. The unitDisplay argument can be any of "long", "short" or
"narrow". Using an unsupported value will default to "short".

Page 663 of 1146

Construct 3 Official Manual

RegionName(RegionLocale)

Returns the region name of the passed in locale in the language of the current locale of the
plugin.
LanguageName(LanguageLocale)

Returns the language name of the passed in locale in the language of the current locale of
the plugin.
CurrencyName(CurrencyCode)

Returns the currency name of the passed 3 letter ISO currency code, in the language of the
current locale of the plugin.

Page 664 of 1146

Construct 3 Official Manual

JSON
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/json

The JSON object can parse and read strings in JavaScript Object Notation (JSON) format, as
well as writing data and converting the result back to a JSON string. A description of the JSON
format is out of the scope of this manual; however there are some free tutorials you can search
for on the web.
Click here to open an example of the JSON plugin.

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IJSONInstance script interface. (JavaScript and TypeScript have built-in support for JSON, but
this allows for interacting with data used in an event sheet.)

Loading a JSON file
JSON must be loaded as a string with the Parse action. If you have a small snippet of JSON, you
can paste it directly in to the action parameter - but note in expressions a double-quote character
( " ) must be repeated twice ( "" ) to avoid ending the string, which can be inconvenient. Instead
it is recommended to request a JSON project file using the AJAX object. When the AJAX request
completes, pass AJAX.LastData in to the Parse action. Then the data from the file can be used.

JSON paths
Construct only supports numbers and strings in expressions. To allow you to use structures like
nested objects and arrays, the JSON object uses a special path string which identifies keys in the
JSON data. The path is similar to the JavaScript syntax that would be used to access the JSON
data, but note it is not actually evaluated as JavaScript code.
A path is essentially a list of nested keys separated by dots. For example consider the following
JSON data:
{
"foo": {
"bar": 42
}
}

The path foo.bar refers to the inner "bar" key, which will return the value 42.

Escaping
Page 665 of 1146

Construct 3 Official Manual

If a JSON key actually has a dot in it, e.g. "my.key" , then the dot needs to be escaped in a path
string otherwise it will try to look for a key named my with another object key named key
inside it. Dots preceded by a backslash ( \ ) will be interpreted as part of the key name, e.g.
my\.key will look for a key named "my.key" . To actually use a backslash in a key name, then
use a double backslash in a path, e.g. my\\key will look for a key named "my\key" .

Types
Since Construct expressions only support numbers and strings, only number and string type
properties can be directly returned in expressions. Booleans are returned as a number (0 for
false and 1 for true). However using paths, loops and conditions, there are a variety of tools to
identify what kind of data is available and access values held within objects and arrays (even
when nested), as well as detecting special values like null .

Arrays
Array elements can be accessed as if their elements were numbered properties (which is
actually how JavaScript specifies arrays internally). For example consider the following JSON
data:
{
"array": [123, 456]
}

Like most of Construct JSON arrays use zero-based indices, so the path array.0 refers to the
first element (123) and array.1 refers to the second element (456), and so on.

Relative paths
The Set path action changes the current path, making it more convenient to access deeply
nested keys. A relative path can then be used to continue from the current path. Relative paths
begin with a dot, e.g. .bar . If a path does not begin with a dot, it is always treated as absolute
(starting from the root), regardless of the current path.
For example suppose you want to access multiple keys under a common path, like
foo.bar.baz.first and foo.bar.baz.second . You can first use Set path to set foo.bar.baz as
the current path, and then the paths .first and .second refer to foo.bar.baz.first and
foo.bar.baz.second respectively. Even with a current path set, the path abc.def refers to toplevel keys because it does not start with a dot, so is treated as absolute.
The For each looping condition also sets the current path to the full path to the current key being
iterated, making it convenient to retrieve data in a loop.

JSON conditions
Compare type

Page 666 of 1146

Construct 3 Official Manual

Test the type of a value at a given path. This can also detect the special null value that
cannot be returned in a Construct expression, as well as identifying arrays and objects.
Compare value

Compare the value at a given path. This can only be used with number or string values.
For each

Repeats once for each key at a path in the JSON data. This can be used with either object or
array types; in the case of arrays, the keys are the array indices (e.g. 0, 1, 2...) represented as
a string. Inside the loop, the current path is set to the current key being iterated, so relative
paths can be used to retrieve data from the current key. The CurrentKey, CurrentValue and
CurrentType expressions return information about the current key-value pair being iterated.
Has key

Determine if a key exists at a given path.
Is boolean set

Determine if a given path contains a boolean "true" value.
On parse error

Triggered after a Parse action if there was invalid syntax in the JSON string resulting in an
error trying to parse it.
On parse success

Triggered after a Parse action if the JSON syntax was valid and parsing completed
successfully.

JSON actions
Note that when setting values, nonexistent keys are created as necessary. For example if the
JSON file is empty but you set the number 5 at the path foo.bar , the foo and bar keys are
automatically created, resulting in the data { "foo": { "bar": 5 } } .

Delete key

Delete the key at a path so it is no longer present in the JSON data.
Note this action cannot remove elements from an array. Use the array modifying actions
instead.

Page 667 of 1146

Construct 3 Official Manual

Parse

Parse a string of JSON data and load it in to the object so it can be accessed. If the data is
valid and is parsed successfully, On parse success is triggered; otherwise if the data is invalid
and parsing fails, On parse error is triggered.
Pop value

Remove an element at the start or end of an array located at a path. If the path does not
specify an array, this does nothing.
Push value

Add an element with the given value at the start or end of an array located at a path. If the
path does not specify an array, this does nothing.
Insert value

Inserts an element with the given value into an array located at a path, increasing the size of
the array by 1. The element is inserted at a specified index, if any elements existed at or after
that index they pushed forward by 1.
Remove values

Removes a specified number of elements from an array located at a path, reducing the size
of the array. Elements are removed starting at a specified index, if there are less elements
after the array than requested to be removed then only the available number will be removed.
Set array

Create an array with a given number of elements at a path. If an array already exists at the
given path, it is resized to the given number of elements. In both cases, any new elements
are initialised to 0.
Set boolean

Set a true or false value at a path.
Set JSON

Parse a string of JSON data, and set the value at a path to the resulting JSON. This is useful
to merge data from different sources in to the same JSON object.
Set null

Set the special null value at a path.

Page 668 of 1146

Construct 3 Official Manual

Set object

Set an empty object at a path. If there is already an object at the given path, it is replaced
with an empty object.
Set path

Set the current path. This allows relative keys to continue from this path.
Set value

Set a number or string value at a path.
Toggle boolean

Toggle a boolean value at a path. If the value at the path is not a Boolean, do nothing.
Add to

Add a value to the numerical value at a path. If the value at the path is not numerical, do
nothing.
Subtract from

Subtract a value from the numerical value at a path. If the value at the path is not numerical,
do nothing.

JSON expressions
ArraySize

Return the length of an array at a path. If there is not an array at the given path, returns -1.
Back
Front

Return the element at the start (front) or end (back) of an array at a given path. If there is not
an array at the given path, returns -1.
CurrentKey

In a For each loop, a string of the current key name. If an array is being looped, the current
key is a string of the current index, e.g. "0", "1"...
CurrentType

Page 669 of 1146

Construct 3 Official Manual

In a For each loop, a string representing the type of the current value, which can be one of
"null" , "array" , "object" , "boolean" , "number" or "string" .

CurrentValue

In a For each loop, the current value. This only returns numbers or strings, or booleans as a
number (0 for false and 1 for true). All other types will return 0.
Get

Get the value at a given path. The path can be relative to the current path or the current key
in a For each loop. This only returns numbers or strings, or booleans as a number (0 for false
and 1 for true). All other types will return 0.
Type

Get a string representing the type of a value at a given path, which can be one of "null" ,
"array" , "object" , "boolean" , "number" or "string" . The path can be relative to the
current path or the current key in a For each loop.
Path

Return the current path.
ToBeautifiedString
ToCompactString

Return the current JSON data either as a formatted string with line breaks and indentation
("beautified"), or as a minimal string excluding any line breaks or indentation ("compact").
Beautified strings are easier to read, but compact strings are more efficient for storing,
sending over the Internet, and loading. Both beautified and compact strings always represent
identical data, and there are a range of third-party tools available that can convert between
beautified and compact representation.
GetAsBeautifiedString
GetAsCompactString

Return the JSON data at a specified location either as a formatted string with line breaks and
indentation ("beautified"), or as a minimal string excluding any line breaks or indentation
("compact"). These expressions are conceptually similar to "ToBeautifiedString" and
"ToCompactString" respectively, but for a specific part of the current data instead of
everything. In that way they are the opposite half of the "Set JSON" action, which allow you to
set a value from a JSON string at a given location.

Page 670 of 1146

Construct 3 Official Manual

KEYBOARD
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/keyboard

The Keyboard object allows projects to respond to keyboard input.

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IKeyboardObjectType script interface.

About keyboards
When designing your project, you cannot assume everyone has a keyboard. Many users browse
the web with touch-screen devices that have no keyboard. (The Keyboard object also does not
respond to input from on-screen keyboards on any modern touch devices.) Therefore if your
project uses exclusively mouse or keyboard control, it is impossible to use on touch devices. See
the Touch controls tutorial for an alternative control system.
Also note that there are a variety of keyboard layouts used internationally. For example if you
only provide "WASD" as direction controls, your project may be difficult to control on AZERTY
keyboards. "ZQSD" controls covers the AZERTY layout, but there are many other possible
keyboard layouts. In this case, also supporting arrow keys for direction controls will cover most
international keyboards, but remember the same problem applies for any other controls
depending on a specific key layout.

Key codes
It's possible to detect key presses by numerical key codes with the Keyboard object. A key code
is simply a number assigned to every possible key on the keyboard. This can be useful for
implementing custom controls, since key codes can be stored in variables.

Key ghosting
You may notice you cannot reliably detect three or more simultaneous key presses on the
keyboard. This is a limitation of common keyboard hardware, not Construct. The circuitry in
common keyboards exhibits an effect called key ghosting where only certain combinations of a
certain number of keys can be reliably detected. You can get special gamer keyboards that
support anti-ghosting, but since these are rare it's probably a better idea to design your project
around the limitations of common keyboards, such as by avoiding having to hold down lots of
keys.

Keyboard conditions

Page 671 of 1146

Construct 3 Official Manual

Key code is down

True if a given key by its key code is currently being held down.
On key code pressed

Triggered when a specific key code is pressed.
On key code released

Triggered when a specific key code is released.
Key is down

True if a given keyboard key is currently being held down.
On any key pressed

Triggered when any keyboard key is pressed. Useful for title screens or cutscenes. The
corresponding key code is set in the LastKeyCode expression.
On any key released

Triggered when any keyboard key is released. The corresponding key code is set in the
LastKeyCode expression.
On key pressed

Triggered when a specific keyboard key is pressed.
On key released

Triggered when a specific keyboard key is released.
Is keyboard lock supported

True if the current browser/platform supports using keyboard lock with the Lock keyboard
action.
On keyboard locked
On keyboard lock error

Triggered after the Lock keyboard action depending on whether the attempt to lock the
keyboard completed successfully. If the keyboard is now locked, On keyboard locked is
triggered; if locking the keyboard failed (including the user declining a permission prompt),
On keyboard lock error is triggered.

Page 672 of 1146

Construct 3 Official Manual

Left/right key is down
On left/right key pressed
On left/right key released

As per Is key down, On key pressed and On key released, but is able to identify the left or right
Shift, Control, Alt or Meta keys separately.

Keyboard actions
Lock keyboard

Request to lock the keyboard so key presses are always received by the project, rather than
the browser/application (such as to activating browser keyboard shortcuts). For example if
WASD controls are used to move an object, and the Control key is also used for another
purpose, it is easy to accidentally press Ctrl+W, which is a keyboard shortcut to close the
current browser tab. If the WASD keys are locked, then Ctrl+W will act as a normal keyboard
input to the project and not activate the browser shortcut. The keys to lock are specified by a
string of key names separated by commas, e.g. "KeyW,KeyA,KeyS,KeyD" for the WASD keys a full list of key names can be found on this MDN page. Pass an empty string to request to
lock all keys. Requesting to lock the keyboard may show a permission prompt to the user, as
it is a security-sensitive feature. Further, it only works in fullscreen mode, i.e. after using
Request fullscreen in the Browser plugin. If keyboard lock is successfully enabled, On
keyboard locked triggers; otherwise On keyboard lock error triggers.
The condition Is keyboard lock supported checks if this action is supported by the
current browser/platform.

Unlock keyboard

If the keyboard was previously locked, this action unlocks it again, restoring the normal
handling of key presses (where the browser/application may handle some key presses).

Keyboard expressions
LastKeyCode

Retrieve the key code of the last key press. This is useful in On any key pressed or On any key
released to determine the key code of the key the user pressed, which is useful when setting
up custom controls.
StringFromKeyCode

Convert a numerical key code back in to a string representation. For example this turns the
key code 65 in to the string "A".

Page 673 of 1146

Construct 3 Official Manual

TypedKey

Return the last key press as the character that would have been entered in to a text field. For
example when pressing A, this could be "a", "A", "á" or something else, depending on which
other keys are held down. If the last key press is not a typed character, like Shift, then the
expression is set to the name of the key.

Page 674 of 1146

Construct 3 Official Manual

LIST
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/list

The List object creates either a dropdown list or list box form control. A dropdown list only
shows one item but can be expanded to show the full list; a list box shows multiple items at
once. The image below shows a dropdown list on the left (which has been expanded), and a list
box on the right.

List types

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IListInstance script interface.

Layering HTML objects
This object displays using a HTML element rather than drawing in to the canvas. This means its
layering works differently to other objects. To learn more about how to layer HTML objects, see
HTML layers.

Styling lists
As List objects are HTML elements, their appearance can be customised using CSS (Cascading
Style Sheets). The ID and Class properties can be used to identify the HTML element, and a CSS
project file added to apply some styles to it.

List properties
Items

A list of the initial items to display in the list, with one item per line. Click the button to the
right of the property to open a multi-line text box in a dialog to edit this more conveniently.
The property field cannot show line breaks,
so instead represents lines with the special \n escape sequence.
Tooltip

Page 675 of 1146

Construct 3 Official Manual

A tooltip that appears in most browsers if the user hovers the mouse over the button and
waits. Leave blank for no tooltip.
Initially visibile

Whether or not the control is initially visible in the layout.
Enabled

Whether the control is initially enabled. If disabled, the control will appear greyed out and the
selection cannot be modified.
Type

Choose between the List box and Dropdown list control styles. An image displaying the two
types is shown above.
Multi-select

Allow more than one item to be selected when Type is List box. This has no effect for
dropdown lists.
Auto font size

Automatically set the font-size property of the element according to the layout and layer
scale. This will prevent the font-size CSS property being manually set with the Set CSS style
action. Disable if you intend to use Set CSS style to adjust the font-size property.
ID Optional

An optional id attribute for the element in the DOM (Document Object Model). This can be
useful for CSS styling.
Class Optional

An optional class attribute for the element in the DOM (Document Object Model). This can be
useful for CSS styling.

List conditions
See common conditions for features shared between form control objects.
Compare item text at

Compare the text of a given item in the list.

Page 676 of 1146

Construct 3 Official Manual

Compare selected item text

Compare the text of the currently selected item in the list.
Compare selection

Compare the zero-based index of the currently selected item.
On clicked

Triggered when the control is clicked.
On double-clicked

Triggered when the control is double-clicked.
On selection changed

Triggered whenever the chosen selection in the control is changed. This can be by any
means of input (such as a mouse click, keyboard press, or touch input on mobile).

List actions
See common actions for features shared between form control objects.
Add item

Append a new item to the end of the list of available choices.
Add item at

Insert a new item to the list of available choices at a certain zero-based index.
Clear

Remove all the available choices from the list.
Remove

Delete an item at a specific index.
Set item text

Change the text of an item at a specific index.
Set selection

Page 677 of 1146

Construct 3 Official Manual

Set the item at a specific index as selected.
Set tooltip

Set the Tooltip property of the object, displayed by most browsers when hovering the mouse
over the control.

List expressions
ItemCount

The current number of items in the list.
ItemTextAt

Return the text of an item at a zero-based index in the list.
SelectedCount

The number of currently selected items. This will always be either 0 or 1 unless a list box
with Multi-select enabled is used.
SelectedIndex

The zero-based index of the currently selected item. For multi-select lists, use
SelectedIndexAt instead.
SelectedIndexAt

The index of a selected item out of all the selected items. In other words, SelectedIndexAt
with numbers 0 to SelectedCount - 1 gives the indices of all the selected items.

SelectedText

The text of the currently selected item. For multi-select lists, use SelectedTextAt instead.
SelectedTextAt

The text of a selected item out of all the selected items. In other words, SelectedTextAt with
numbers 0 to SelectedCount - 1 gives the text of each selected item.

Page 678 of 1146

Construct 3 Official Manual

LOCAL STORAGE
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/local-storage

The Local Storage plugin can store data locally on the user's device. For example it can be used
to store a personal best high-score. Note if you want a full-state save and load feature, see How
to make savegames.
Local Storage works offline, since it stores data to the device itself. Different browsers use
different storages, so data is not shared between different browsers on the same computer each browser has its own unique storage. This is also separate to the browser cache, which is
temporary storage to avoid needlessly re-downloading the same files over and over again.
However the user can usually still choose to clear local storage data from their browser (with an
option perhaps named something like "clear offline website data"). Non-browser export options
like desktop exports and mobile apps are not affected by the user clearing any amount of data
from any browser, they also use separate storage. Finally for security reasons browsers use
separate storage per domain. For example all content on construct.net shares the same storage,
but content on facebook.com uses a different storage and cannot access any data saved from
construct.net.

Scripting
When using JavaScript or TypeScript coding, you can use the IStorage interface to access the
same storage as Construct uses for this object (there is no dedicated script interface for the
Local Storage plugin itself). Further, you can use the browser built-in storage APIs such as
IndexedDB for more advanced cases.

Storage quotas
To prevent abuse, most browsers implement a storage quota, which is a maximum amount of
data that can be saved locally. On most modern browsers this is defined as a proportion of the
free storage space on the device. You can check the available quota on a device by loading
Construct and checking the About dialog which shows the quota available. If the quota is
exceeded, the On error trigger will fire when writing to storage.

Using Local Storage
Local Storage uses a very simple storage system: values are stored under named keys, similar to
how the Dictionary object works. For example the value 100 could be stored under a key named
score.
Local Storage is asynchronous. This means reading and writing data does not complete
immediately. The actions only start the process of reading or writing a value, and the project
continues to run in the interim. This ensures that slow or busy storage systems do not impact
the performance of the project. When the read or write is complete, a trigger fires (On item get or
Page 679 of 1146

Construct 3 Official Manual

On item set) which indicates either the value is available to read (with the ItemValue expression)
or that the value was successfully written.
For example here is a flow to read the value of the key "score":
1

Use the action Get item "score"

2

A moment later, On item "score" get triggers

3

In this trigger, use the ItemValue expression to read the item

Here is a flow to set the new value of "score":
1

Use the action Set item "score" to 100

2

A moment later, On item "score" set triggers

3

You may not need to do anything in this trigger, but it indicates the value has been successfully
written. The Key and ItemValue expressions are still set in this trigger in case you need them.

Note that you must be careful to avoid "races" when using asynchronous storage. For example
the Clear storage action may take a moment to complete before it fires On storage cleared. It is
possible to write more values to storage in between, while Clear storage is still processing. This
is like "racing" the Clear storage and Set item actions: the end result depends on what order they
complete in, which is unpredictable. In this case it is more or less random what happens: the
written keys may be cleared, or they may not be - you cannot rely on any specific result.
Therefore you should be careful to avoid this case.

Simplifying usage with Dictionary
Although it improves performance, dealing with asynchronous reads and writes can sometimes
be difficult. One simple way to conveniently have synchronous storage is to store an entire
Dictionary object's contents to Local Storage, by saving its AsJSON string. Then you can load
this content from Local Storage with the Load action. This means only saving and loading the
dictionary contents is asynchronous, and the rest of the time you can use the Dictionary object's
features to synchronously access data, such as simply using its Get expression to immediately
read a value. However you must remember to save the Dictionary again at some point before the
user quits the project.

Storage location on disk
The Local Storage plugin stores all saved data in an internal browser database. This does not
produce any easily discoverable files on disk. If you want to save data to easily identifiable files
on disk, such as storing save data in a file in the user's Documents folder, consider using the File
System plugin instead.

Redirecting storage
If you have a complex existing project and you decide you want to change how data is saved such as by saving it to a file with the File System plugin, or using a cloud service - updating all
Page 680 of 1146

Construct 3 Official Manual

usages of the Local Storage plugin can be tricky. To help with this you can enable the In memory
only property of the object. This essentially disables the use of storage and only holds data in
memory, and the data will be lost when reloading the page or app. However the data can then be
accessed using the MemoryStorageAsJSON expression for saving elsewhere, and loaded with
the Load memory from JSON action, to persist storage somewhere else. Note that if you use this
to save to a cloud service, you may want to check the size of the saved data - usually it is not a
problem to save a large amount of data locally, but it may turn out to be too much to upload and
download.

Local Storage properties
In-memory only

Check to enable in-memory only storage mode. In this mode data will not be persisted if the
page or app is closed, but can be stored elsewhere instead - see Redirecting storage above
for more details.

Local Storage conditions
On any item get

Triggered after any Get item action completes.
On any item removed

Triggered after any Remove item action completes.
On any item set

Triggered after any Set item action completes.
On item exists

Triggered after the Check item exists action completes if the key checked does indeed exist.
In this trigger the ItemValue expression is also set to the value of this key, so there is no need
to use another Get item action to read it.
Note ItemValue is not set if binary data was stored.

On item get

Triggered after a Get item action completes for a given key. The ItemValue expression is set
to the value of the key, except for when reading binary data.
On item missing

Page 681 of 1146

Construct 3 Official Manual

Triggered after the Check item exists action completes if the key checked does not exist.
On item removed

Triggered after the Remove item action completes for a given key.
On item set

Triggered after the Set item action completes for a given key. This indicates the data is now
in storage.
Compare key

Compare the current value of the Key expression, which is the name of the current key in a
trigger. This can be useful in the On any item... triggers.
Compare value

Compare the current value of the ItemValue expression, which is set to the item value when
getting an item or in On item exists.
Is persistent

True if the browser has granted the current domain persistent storage permission. See the
Request persistent storage action for more details.
On all key names loaded

Triggered after the Get all key names action completes. In this trigger the KeyCount and
KeyAt expressions give the list of all the key names.
On error

Triggered at any time while using Local Storage if an error occurs, such as if a write failed, or
the maximum storage quota was exceeded. The ErrorMessage expression is set to the error
message if available.
On storage cleared

Triggered after the Clear storage action completes and storage is now empty.
Is processing gets

True if any Get item actions are still processing, i.e. any On item get trigger is yet to fire for a
Get item action.

Page 682 of 1146

Construct 3 Official Manual

Is processing sets

True if any Set item actions are still processing, i.e. any On item set trigger is yet to fire for a
Set item action.
On all gets complete

Triggered when all outstanding Get item actions are completed, i.e. when Is processing gets
first becomes false. In other words if 10 Get item actions are all used at the same time, On all
gets complete triggers when all 10 items have been read and fired their On item get triggers.
On all sets complete

Triggered when all outstanding Set item actions are completed, i.e. when Is processing sets
first becomes false. In other words if 10 Set item actions are all used at the same time, On all
sets complete triggers when all 10 items have been written and fired their On item set
triggers.

Local Storage actions
Check item exists

Check if a key exists in storage. This triggers either On item exists if the key exists, or On item
missing if the key does not exist. If the item exists, the ItemValue expression is set to the key
value in the On item exists trigger, so there is no need to use a subsequent Get item action to
read the value.
Note ItemValue is not set if binary data was stored.

Get item
Get binary item

Read the value of a key in storage. This triggers On item get when the value has been read.
When reading binary data, the data will be written to the chosen Binary Data object;
otherwise the ItemValue expression is set to the value of the key.
Remove item

Remove (delete) a key from storage. This triggers On item removed when the key has been
removed.
Set item
Set binary item

Page 683 of 1146

Construct 3 Official Manual

Set the value of a key in storage. This triggers On item set when the value has been written.
When setting binary data, the contents of a Binary Data object are written; otherwise the text
or number provided is used.
Clear storage

Remove (delete) all items from storage, reverting it back to the empty state. This triggers On
storage cleared when completed.
Get all key names

Retrieve a list of all the key names that currently exist in storage. This triggers On all key
names loaded when the list has been loaded, where the KeyCount and KeyAt expressions can
be used to access the list.
Request persistent storage

Request that storage be made persistent for the current domain. This typically only applies
to web browsers, as all other export options already use persistent storage. In the context of
a web browser, all storage is preserved on a "best effort" basis, but may be erased in various
situations such as if too much storage space is being used, if the site has not been visited
for too long, and so on. If persistent storage permission is granted, then the browser will
avoid automatically deleting the storage wherever possible; it may also avoid deleting the
storage even if the user chooses to clear storage in browser settings, unless they specifically
acknowledge they want to delete the site's data. Requesting persistent storage may show a
visible prompt to the user asking them to accept permission, and this action may only be
allowed to be used in a user input trigger (such as mouse click or touch). The action is
asynchronous, meaning it can be used with Wait for previous actions to complete, after which
the permission will have been granted or refused. The Is persistent condition reflects the
current persistent permission state.
Load memory from JSON

Only applicable when the property In-memory only is enabled. Load the entire state of the
storage - including all keys and values - from a string of JSON data previously returned by the
MemoryStorageAsJSON expression. For more details on usage, see Redirecting storage
above.

Local Storage expressions
ItemValue

The value for a key that has been read or written in a Local Storage trigger, such as On item
get or On item exists. This can be either a string or a number. This returns 0 if used outside of
a Local Storage trigger, or if binary data was stored instead of text or a number.

Page 684 of 1146

Construct 3 Official Manual

Key

The name of the key that was modified in any Local Storage trigger, such as On item get, On
item set or On any item set. This returns an empty string if used outside of a Local Storage
trigger.
ErrorMessage

In On error, the text of the error message if any is available.
KeyAt(index)

In On all key names loaded, the name of the key at the given zero-based index in the list.
KeyCount

In On all key names loaded, the number of key names in the list.
MemoryStorageAsJSON

Only applicable when the property In-memory only is enabled. Returns the entire state of the
storage - including all keys and values - as a string of JSON data. This can then be loaded
again later with the Load memory from JSON action. For more details on usage, see
Redirecting storage above.

Page 685 of 1146

Construct 3 Official Manual

MIDI PLUGIN
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/midi

The MIDI plugin allows communicating with connected MIDI (Musical Instrument Digital
Interface) devices via the Web MIDI API. Typically MIDI devices are digital musical instruments
such as a MIDI piano keyboard or synthesizer. The MIDI plugin can both receive MIDI input from
devices, such as detecting when notes are pressed, as well as send MIDI output to devices, such
as to create an arpeggiator.
In order to use a MIDI device it will need to be connected to the device that the Construct project
is running on. Some MIDI devices may require a special 5-pin MIDI cable, but others may be able
to use another standard such as USB.
You can find two examples of using the MIDI plugin in the MIDI input and MIDI output examples.
Familiarity with the MIDI protocol may be useful when using MIDI. You can search the web
for the full specification, but there's also a concise unofficial third-party reference here.

As of February 2025, Safari does not support the Web MIDI API and so the MIDI plugin will
not work in web exports loaded in Safari, or in macOS WKWebView exports. Use the Is
supported condition to check if MIDI is supported on the current browser/platform.

MIDI access
For privacy and security reasons, browsers do not provide access to MIDI devices by default.
Therefore the first thing your project must do before using MIDI is use the Request MIDI access
action. This may show a permission prompt to the user. This action may also only be allowed in
a user input trigger, such as in a button click or touch event, although some browsers may allow
it to be used on startup (in On start of layout).
The user must approve any permission prompt - if they do so, On request access success is
triggered, and MIDI devices may then be used. If the user declines the permission prompt On
request access failed will be triggered and access to MIDI will be blocked. In this case you may
wish to show a message to the user.
There are two options when requesting MIDI access:
System exclusive: when enabled, this allows for sending and receiving system exclusive
(sysex) MIDI messages. These are usually device or vendor specific. As these messages
have potentially unlimited capability, such as wiping data stored on the device or overwriting

Page 686 of 1146

Construct 3 Official Manual

its firmware, there may be stricter security requirements for using this mode; therefore it is
recommended to leave it disabled if you don't need it.
Software: when enabled then virtual or software MIDI devices running on the same system
as the Construct project may be listed as available. If you are only interested in using
separate physical MIDI hardware, you should leave this disabled.

MIDI devices
By default, after successfully gaining MIDI access, no MIDI messages will be sent or received. To
use a MIDI device, it must first be opened. This means the device becomes active and messages
may be sent or received. If the device is no longer needed it may then be closed to return it to an
inactive state that will not send or receive MIDI messages.
There are two types of MIDI devices: input, from which messages are received, and output, to
which messages may be sent. If a single piece of MIDI hardware supports both input and output,
it will appear as two devices - both an input device and an output device. Sometimes this will
also require two cables, one for input and one for output. Be sure to make sure the appropriate
MIDI sockets are used - for example to receive MIDI input from a device, you may need to
connect a cable from the device's MIDI output socket to the MIDI input socket of the device the
Construct project is running on.
The MIDI plugin supports input and output to multiple devices simultaneously. To allow for this,
devices are identified by an ID string provided by the browser or system. Usually the ID string
can be left empty to refer to either the first available device, or the last opened device, which is a
convenient way to use a single device.

MIDI notes
In the MIDI specification, notes are identified by a number from 0-127, with number 60 referring
to middle C. With Construct's MIDI plugin, for convenience notes may also be referred to by a
string of the note name. For example number 60 (middle C) may be referred to by the string "C4",
meaning note C in octave 4.
Note names may also use a sharp ("#") or flat ("b") to adjust the note by a semitone in either
direction, for example "D#4" or "Db4". This means both "C#4" and "Db4" refer to the same note.
Construct also treats "Cb" as equivalent to "B", and "B#" as equivalent to "C".
The NoteNumberToName and NoteNameToNumber expressions allow converting between note
number and note name representations. Note that when converting from a note number to a
note name, Construct will always use a sharp notation. For example note 61 is both "C#4" and
"Db4", and Construct will choose the name "C#4" in this case.

MIDI conditions
Has access

True if MIDI access is available, i.e. requesting MIDI access has completed successfully.
Page 687 of 1146

Construct 3 Official Manual

Is supported

True if MIDI access is supported on this browser/platform. This depends on support for the
Web MIDI API.
On devices state changed

Triggered when any MIDI devices are connected, disconnected, or changed. If your project
displays a list of available MIDI devices, it should update the list in this trigger.
This may trigger multiple times in quick succession - for example if a single MIDI
hardware device that provides both an input and an output is removed, then this trigger
may fire twice as both the input and output become unavailable.

On request access success
On request access failed

Triggered after the Request MIDI access action, depending on the outcome of the request.
On any device opened
On device opened

Triggered after the Open device action when the device has been opened and can now send
or receive MIDI messages. With the any variant, the relevant MIDI device can be identified by
expressions like CurrentDeviceID.
On any device closed
On device closed

Triggered after the Close device action when the device has been closed and so will no
longer send or receive MIDI messages. With the any variant, the relevant MIDI device can be
identified by expressions like CurrentDeviceID.
On any device error
On device error

Triggered if an error occurs when accessing a MIDI device. With the any variant, the relevant
MIDI device can be identified by expressions like CurrentDeviceID.
Compare parameter

Compare an aspect of a MIDI message such as the note number or velocity.
On any binary message

Page 688 of 1146

Construct 3 Official Manual

Triggered when any MIDI message is received from any device. The raw binary data of the
MIDI message is stored in a specified Binary Data object. The associated MIDI device can be
identified by expressions like CurrentDeviceID. Using the binary data will require knowledge
of the MIDI specification - for example a three-byte message in hexadecimal notation 0x90
0x3C 0x40 refers to Note On, MIDI channel 0, note 60 (middle C), velocity 64.
On any message

Triggered when a MIDI message of a specific type, e.g. Note On, is received from any MIDI
device. The associated MIDI device can be identified by expressions like CurrentDeviceID.
Details about the message can be compared with Compare parameter or retrieved via
expressions.
On message

Triggered when a MIDI message of a specific type, e.g. Note On, is received from a specific
MIDI device given by its ID. The device ID may be left as an empty string to refer to the last
opened input device. Details about the message can be compared with Compare parameter
or retrieved via expressions.

MIDI actions
Request MIDI access

Request to access MIDI devices. This must be done before any MIDI devices can be used,
and may show a permission prompt to the user. For more details see the section on MIDI
access above.
Open device

Open a MIDI device specified by its device ID and type (input/output). The device ID may be
left as an empty string to open the first available device; however note if multiple devices are
available, this may not select the device you really want, so generally you should provide a
way for the user to pick the device (see the MIDI input/output examples in Construct). Once
a device is opened, it may start sending or receiving messages (depending on whether it is
an input or output device).
Close device

Close a MIDI device specified by its device ID and type (input/output). The device ID may be
left as an empty string to close the last opened device (useful when only one device is
opened at a time). Once a device is closed, it will no longer send or receive messages.
Schedule next message

Page 689 of 1146

Construct 3 Official Manual

This action will cause the next Send action to actually send the message after a given delay
in seconds. This can be used to schedule messages to be sent with higher accuracy than
ticks in Construct, which typically run approximately every 16ms (for a 60 Hz display).
Send binary message

Send raw binary data as a MIDI message to an output device ID. The ID may be left as an
empty string to send a message to the last opened MIDI output device. The message
contents is taken from a chosen Binary Data object. Using the binary data will require
knowledge of the MIDI specification - for example a three-byte message in hexadecimal
notation 0x90 0x3C 0x40 refers to Note On, MIDI channel 0, note 60 (middle C), velocity 64.
Send control change message

Send a MIDI Control Change message to an output device ID. The ID may be left as an empty
string to send a message to the last opened MIDI output device. Refer to the MIDI
specification for possible controller numbers; a common one to use is controller number 1 to
refer to the modulation wheel (coarse). The controller value is a number in the range 0-127.
Send message

Send a Program Change, Channel Pressure or Pitch Wheel message to an output device ID.
The ID may be left as an empty string to send a message to the last opened MIDI output
device. The value is a number in the range 0-127 for Program Change or Channel Pressure
messages, or 0-16383 for Pitch Wheel messages.
Send note message

Send a Note Off, Note On or AfterTouch message to an output device ID. The ID may be left
as an empty string to send a message to the last opened MIDI output device. The note may
be specified by either its MIDI note number (0-127, e.g. 60 for middle C) or a note name e.g.
"C4". The note velocity is given as a number 0-127.
Some devices will treat a Note On message with velocity 0 as Note Off.

Set MIDI channel

Set the MIDI channel of outgoing messages, from 0-15. The default is channel 0. Some
devices will be configured to only receive messages on a certain channel and will have a
setting to select the MIDI channel number of the device; note that many consumer devices
will use 1-based indexing for the MIDI channel (so the first MIDI channel is displayed as
channel 1, rather than channel 0).

MIDI expressions
Page 690 of 1146

Construct 3 Official Manual

InputCount
InputIDAt(index)
InputManufacturerAt(index)
InputNameAt(index)

Retrieve the list of available input devices. These expressions provide the number of input
devices, and the device ID, manufacturer, and name of the device at a given zero-based
index. Note this list first becomes available in On request access success, and may change in
On devices state changed.
OutputCount
OutputIDAt(index)
OutputManufacturerAt(index)
OutputNameAt(index)

Retrieve the list of available input devices. These expressions provide the number of input
devices, and the device ID, manufacturer, and name of the device at a given zero-based
index. Note this list first becomes available in On request access success, and may change in
On devices state changed.
CurrentDeviceID
CurrentDeviceManfucaturer
CurrentDeviceName

In a trigger, such as On any message, these expressions contain information about the
device that sent the message.
Channel

When a MIDI message is received, this returns the MIDI channel of the message from 0-15.
ControllerNumber
ControllerValue

When a Control Change message is received, these return the controller number (0-127) and
controller value (0-127) specified in the message.
NoteName
NoteNumber

When a note message is recieved (Note Off, Note On or After Touch), these return the
associated note name as a string (e.g. "C4") or MIDI note number (0-127, e.g. 60 for middle
C).

Page 691 of 1146

Construct 3 Official Manual

PitchWheelValue

When a Pitch Wheel message is received, this returns pitch wheel position in the range 016383.
Pressure

When an After Touch or Channel Pressure message is received, this returns the pressure
value (0-127).
ProgramNumber

When a Program Change message is received, this returns the program number (0-127).
Velocity

When a Note On or Note Off message is received, this returns the velocity in the range 0-127.
If the device does not support detecting note velocity, a default value such as 64 may be sent
instead. Some devices send a Note On message with velocity 0 to indicate Note Off; in this
case the velocity will be returned as 64 as a default value given the velocity is not actually
specified in that case.
NoteNameToNumber(NoteName)
NoteNumberToName(NoteNumber)

Convert between a note name (e.g. "C4" for middle C) and a MIDI note number in the range 0127 (e.g. 60 for middle C). See the section on MIDI notes above for more information.
NoteNumberToName will always use the sharp variant, e.g. note number 61 will always
return "C#4" and never "Db4".

Page 692 of 1146

Construct 3 Official Manual

MOBILE ADVERT
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/mobile-advert

The Mobile Advert plugin allows a game to use Admob Banner, Interstitial, Rewarded and
Rewarded Interstitial adverts on Android and iOS exports.
Web exports use Google's Ad Placement API to show Interstitial and Rewarded adverts.
Admob adverts can only be shown in Android or iOS exports. Adverts shown in local
preview, remote preview, or with any export option other than Android or iOS will use
Google's Ad Placement API.

Advert types
Construct supports the following advert types:
Banner Advert

Displays an advert that partially overlays the bottom of the screen, the size of the advert can
be specified when it's created. (Mobile export only)
Interstitial Advert

Displays a full screen advert, useful for transitioning between layouts. (Mobile & Web
exports)
Rewarded Advert

Similar to an interstitial advert in that it is a full screen advert. If the user watches this advert
for the designated amount of time, they will get the reward payload. If the advert is
dismissed before that, the reward is not given. (Mobile & Web exports)
Rewarded Interstitial Advert

Similar to rewarded adverts, but users aren’t required to opt in to view a rewarded interstitial.
Instead of the opt-in prompt in rewarded ads, rewarded interstitials require an intro screen
that announces the reward and gives users a chance to opt out if they wish to do so. (Mobile
& Web exports)

Getting started with Admob
Follow these steps to quickly get started with Admob on mobile exports:
Page 693 of 1146

Construct 3 Official Manual
