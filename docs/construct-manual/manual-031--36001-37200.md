# Manual Construct 3  Parte 31 (líneas 3600137200)

## Resumen
- instance event for standard event object properties. For information on which events are (línea 7)
- fired by specific addons and which additional event object properties are available, see the (línea 8)
- dispatchEvent(e) (línea 10)
- Dispatch an event, firing any handler functions that have been added for the event type. You (línea 12)
- can use new C3.Event(eventName, isCancellable) to create an event object that can be (línea 13)
- your event to that object. This can also be used by the addon SDK to cause your addon to fire (línea 15)
- an event in the script interface, e.g.: (línea 16)
- instance (línea 20)
- A reference to the IInstance representing the object instance this behavior instance is (línea 26)
- affecting. (línea 27)
- behavior (línea 28)
- A reference to the IBehavior representing the kind of behavior, e.g. Solid or Physics. (línea 30)
- behaviorType (línea 31)
- A reference to the IBehaviorType the behavior instance belongs to. (línea 33)
- runtime (línea 34)
- A reference back to the IRuntime interface. (línea 36)
- IBEHAVIORTYPE SCRIPT INTERFACE (línea 42)
- The IBehaviorType interface represents a behavior added to an object class. For example if (línea 45)
- SpriteA and SpriteB both have the Bullet behavior added to them, then there are two behavior (línea 46)
- types, one for each object type. (línea 47)

## Contenido

instance event for standard event object properties. For information on which events are
fired by specific addons and which additional event object properties are available, see the
documentation on each addon's script interfaces.
dispatchEvent(e)

Dispatch an event, firing any handler functions that have been added for the event type. You
can use new C3.Event(eventName, isCancellable) to create an event object that can be
dispatched (e.g. new C3.Event("arrived", true) ), and add any extra properties relevant to
your event to that object. This can also be used by the addon SDK to cause your addon to fire
an event in the script interface, e.g.:
const e = new C3.Event("arrived", true);
this.GetScriptInterface().dispatchEvent(e);

instance

Page 1012 of 1146

Construct 3 Official Manual

A reference to the IInstance representing the object instance this behavior instance is
affecting.
behavior

A reference to the IBehavior representing the kind of behavior, e.g. Solid or Physics.
behaviorType

A reference to the IBehaviorType the behavior instance belongs to.
runtime

A reference back to the IRuntime interface.

Page 1013 of 1146

Construct 3 Official Manual

IBEHAVIORTYPE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/ibehaviortype

The IBehaviorType interface represents a behavior added to an object class. For example if
SpriteA and SpriteB both have the Bullet behavior added to them, then there are two behavior
types, one for each object type.

IBehaviorType APIs
runtime

A reference back to the IRuntime interface.
behavior

A reference to the IBehavior of the associated behavior.
name

A read-only string of the behavior type name.

Page 1014 of 1146

Construct 3 Official Manual

DOMINSTANCE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/idominstance

The IDOMInstance script interface represents a single instance of an object type (represented by
IObjectClass) that appears in a layout and represents a DOM element such as a button or other
form control at runtime. It derives from the IWorldInstance script interface.
Note these methods can still be used in worker mode, since it does not directly access a DOM
element.

DOMInstance APIs
focus()
blur()

Focus or blur the DOM element represented by this instance.
setCssStyle(prop, val)

Apply a CSS style to the DOM element, using a string of the property name (in CSS format,
e.g. "background-color" and a string of the property value (e.g. "red" ).

getElement()

Return the HTML element used to represent the object.
Since the DOM APIs are not available in worker mode, this will throw an exception when
running in a Web Worker.

Page 1015 of 1146

Construct 3 Official Manual

EFFECT INSTANCE SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/ieffectinstance

The IEffectInstance script interface represents the parameters for a single effect on a
IWorldInstance, ILayer or ILayout. It is typically accessed through the effects property.

Examples
See the Scripting effect parameters example for a demonstration of using the setParameter()
method to modify effect parameters.

Effect APIs
index

The zero-based index of this effect, which is its index in the effects array.

name

A read-only string of the effect name.
isActive

A boolean indicating whether this effect is enabled or not. Inactive effects act the same as
the effect being deleted, but the effect can later be reactivated if it is needed again. Note
making effects inactive if they are not needed improves performance.
setParameter(index, value)
getParameter(index)

Set or get an effect parameter by the zero-based parameter index. Most parameters use a
number as the value. Note however that color parameters are represented by an array with
three elements, i.e. [r, g, b] . The R, G and B values are normalized to floats in the [0, 1]
range.

Page 1016 of 1146

Construct 3 Official Manual

IFAMILY SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/ifamily

The IFamily script interface represents a family in the project, e.g. a family of Sprite object
types created in the Project Bar.
derives from IObjectClass which is a base class shared with object types
(IObjectType).
IFamily

Getting an IFamily
As with object types, references to the project's families are typically accessed through the
IRuntime interface objects property. For example runtime.objects.Family1 would refer to the
IFamily interface for the family Family1, assuming it was added to the project.

Family APIs
getAllObjectTypes()

Returns an array of all the IObjectType members of this family.
*objectTypes()

Iterates over all the members of this family (as IObjectType).
hasObjectType(objectType)

Returns a boolean indicating whether the specified IObjectType is a member of this family.

Page 1017 of 1146

Construct 3 Official Manual

IIMAGEINFO SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/iimageinfo

The IImageInfo interface represents an image in the project. It is also the base class of
IAnimationFrame.

IImageInfo APIs
width
height
getSize()

Read-only numbers specifying the dimensions of the image in pixels. The method returns
both values at the same time.

Page 1018 of 1146

Construct 3 Official Manual

INSTANCE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/iinstance

The IInstance script interface represents a single instance of an object type. Instances that
appear in the layout have a IWorldInstance interface instead, but it derives from IInstance , so
these methods and properties are available for any type of instance.
Many objects return a more specific class deriving from IInstance or IWorldInstance to add
APIs specific to the plugin. See the Plugin interfaces reference for more information.

Getting an IInstance
Instances are typically accessed through IObjectClass methods like getFirstInstance() . For
example, runtime.objects.Sprite.getFirstInstance() will return the first instance of the Sprite
object type.

Instance events
The following events can be listened for on any instance using the addEventListener method.
See instance event for standard event properties. Note many more kinds of addon-specific
events can be fired. See the documentation on each addon's script interfaces for more
information.
"destroy"

Fired when the instance is destroyed. After this event, all references to the instance are now
invalid, so any remaining references to the instance should be removed or cleared to null
in this event. Accessing an instance after it is destroyed will throw exceptions or return
invalid data. The event object also has an isEndingLayout property to indicate if the object
is being destroyed because it's the end of a layout, or destroyed for other reasons.

Instance APIs
addEventListener(type, func, capture)
removeEventListener(type, func, capture)

Add or remove an event handler for a particular type of event fired by an addon's script
interface. An event object is passed as a parameter to the handler function. See instance
event for standard event object properties. For information on which events are fired by
specific addons and which additional event object properties are available, see the
documentation on each addon's script interfaces.

Page 1019 of 1146

Construct 3 Official Manual

dispatchEvent(e)

Dispatch an event, firing any handler functions that have been added for the event type. You
can use new C3.Event(eventName, isCancellable) to create an event object that can be
dispatched (e.g. new C3.Event("click", true) ), and add any extra properties relevant to
your event to that object. This can also be used by the addon SDK to cause your addon to fire
an event in the script interface, e.g.:
const e = new C3.Event("click", true);
this.GetScriptInterface().dispatchEvent(e);

runtime

A reference back to the IRuntime interface. (This is particularly useful when subclassing
instances, since in a custom class's methods you can always refer to the runtime with
this.runtime .)

objectType

The IObjectType interface for this instance's object type.
plugin

The IPlugin interface (or derivative) for this instance's plugin.
instVars

If the object has any instance variables, they can be accessed by named properties under
this property. For example if an object has an instance variable named health, it can be set
and retrieved using instance.instVars.health . Note if the object has no instance variables,
the instance won't have an instVars property at all.
In some cases, instance variables may have names that aren't valid JavaScript
identifiers. In this case you can use the string property syntax, e.g.
instance.instVars["health"] .

You don't have to use instance variables to add custom properties to instances. In
JavaScript you can simply assign new properties to existing objects, or use instance
subclassing to use your own custom class with your own properties and methods.

behaviors

Page 1020 of 1146

Construct 3 Official Manual

If the object has any behaviors, they can be accessed by named properties under this
property. For example if an object has a behavior named Bullet, it can be accessed using
instance.behaviors.Bullet . Each behavior has its own properties and methods, which can
be found in the Behavior interfaces reference section. Note if the object has no behaviors,
the instance won't have a behaviors property at all.
In some cases, behaviors may have names that aren't valid JavaScript identifiers. In this
case you can use the string property syntax, e.g. instance.behaviors["8Direction"] .

uid

The unique ID of this instance, as a number. Note instances can be looked up by their UID
using the runtime getInstanceByUid() method.

iid

The index ID (IID) of this instance, as a number. See instances for more details.
templateName

Read-only string of the name of the template used to create this instance, or an empty string
if no template was used.
destroy()

Destroy the instance, removing it and releasing any memory associated with it.
Do not make any further calls or access any properties after the destroy() call. The
instance is no longer valid and any attempts to use it may throw exceptions.

getOtherContainerInstances()

Return an array of IInstance (or derivatives) representing other instances in the same
container as this instance. This excludes the instance the method is called on.
*otherContainerInstances()

Iterates over IInstance (or derivatives) representing other instances in the same container
as this instance. This excludes the instance the method is called on.
dt

Return delta-time according to the object's own timescale. See Delta-time and framerate
independence for more information.
Page 1021 of 1146

Construct 3 Official Manual

timeScale
restoreTimeScale()

The timeScale property sets or gets the current instance-specific time scale, e.g. 1.0 for
normal speed, 2.0 for twice as fast, etc. Note that once set, the instance uses its own time
scale instead of runtime time scale, e.g. allowing an instance to keep moving when the
runtime time scale is 0. Calling the restoreTimeScale() method will then switch it back to
following the runtime time scale.
signal(tag)

Triggers On signal for this instance, and resolves any promise returned by waitForSignal() .
Any events waiting for a signal with the given tag will resume when all picked instances are
signalled.
waitForSignal(tag)

Returns a Promise that resolves when the given tag is signalled for this instance. It may be
signalled by either the script API or an event sheet.
hasTags(tagsArray)

Pass in an array of strings and check if the instance has all the passed in tags or not.
Returns true or false.
setAllTags(tagsSet)

Pass in a Set of tags and set them all to the instance. Replaces all existing tags.
getAllTags()

Return a Set with all the tags an instance has.

Page 1022 of 1146

Construct 3 Official Manual

OBJECT CLASS SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/iobjectclass

The IObjectClass script interface represents an object class in the project, which can be either
an object type or a family. It is the base class for both IObjectType and IFamily.
For the most part, object types and families work the same and can be treated equally, hence
most APIs being available on the IObjectClass base class. However there are some
differences, such as only being able to create an instance of a specific object type, hence the
createInstance() method only being available for IObjectType .

Getting an IObjectClass
References to the project's object classes are typically accessed through the IRuntime interface
objects property. This covers both object types and families, hence everything under that
property is an IObjectClass . For example runtime.objects.Sprite would refer to the
IObjectType interface for the Sprite object type, and runtime.objects.Family1 would refer to
the IFamily interface for the family Family1, assuming they were added to the project.

Try not to confuse object classes with object instances. A common mistake is to try to use
something like runtime.objects.Sprite.x to get the X co-ordinate of a Sprite instance.
However runtime.objects.Sprite is an IObjectClass, which does not have a position. First
add another call to get an instance before trying to read instance properties, for example
runtime.objects.Sprite.getFirstInstance().x .

Object class events
The following events can be listened for using the addEventListener method.

"instancecreate"

Fired whenever a new instance belonging to this object class is created. The event object
has an instance property referring to the IInstance (or derivative) that was created.

"hierarchyready"

Fired for the root instance in a hierarchy after all instances have finished creating - see the
IWorldInstance event for more details. When fired on an IObjectClass, the event object has
an instance property referring to the IWorldInstance (or derivative) that was created.

Page 1023 of 1146

Construct 3 Official Manual

"instancedestroy"

Fired whenever any instance belonging to this object class is destroyed. After this event, all
references to the instance are now invalid, so any remaining references to the instance
should be removed or cleared to null in this event. Accessing an instance after it is
destroyed will throw exceptions or return invalid data. The event object has an instance
property referring to the IInstance (or derivative) that was destroyed. It also has an
isEndingLayout property to indicate if the object is being destroyed because it's the end of a
layout, or destroyed for other reasons.

Object class APIs
runtime

A reference back to the IRuntime interface.
plugin

A reference to the IPlugin interface (or derivative) this object class was created from.
name

A read-only string of the object class's name.
addEventListener(eventName, callback)
removeEventListener(eventName, callback)

Add or remove a callback function for an event. See Object class events above for more
information.
getAllInstances()

Return an array of all instances of this object class.
getFirstInstance()

Return the first instance in the array returned by getAllInstances() , or null if no
instances exist.
*instances()

Iterates over all the object class's instances.
getPickedInstances()

Return an array of instances that have been picked by the event's conditions. This is only
useful with scripts in event sheets.
Page 1024 of 1146

Construct 3 Official Manual

getFirstPickedInstance()

Return the first instance that has been picked by the event's conditions, or null if none.
This is only useful with scripts in event sheets.
*pickedInstances()

Iterates over the instances that have been picked by the event's conditions. This is only
useful with scripts in event sheets.
getPairedInstance(inst)

Get an instance of this object class at the same index (IID) as the given instance. If there are
fewer instances of this object class than the given instance's object class, the index is
allowed to wrap around. This allows identifying the same instance that the event system
would pair with the given instance.

Page 1025 of 1146

Construct 3 Official Manual

IOBJECTTYPE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/iobjecttype

The IObjectType script interface represents an object type in the project, e.g. a Sprite object
type. An object type can have multiple instances created, which are represented by the
IWorldInstance script interface if it appears in a layout, otherwise the IInstance interface.
IObjectType

derives from IObjectClass which is a base class shared with families (IFamily).

Getting an IObjectType
References to the project's object types are typically accessed through the IRuntime interface
objects property. For example runtime.objects.Sprite would refer to the IObjectType
interface for the Sprite object type, assuming one was added to the project.
Try not to confuse object classes with object instances. A common mistake is to try to use
something like runtime.objects.Sprite.x to get the X co-ordinate of a Sprite instance.
However runtime.objects.Sprite is an IObjectType, which does not have a position. First
add another call to get an instance before trying to read instance properties, for example
runtime.objects.Sprite.getFirstInstance().x .

Examples
The following examples demonstrate using some features of IObjectType :
Instance destroy event demonstrates the use of the "instancedestroy" event
Iterating instances demonstrates the use of the instances() iterator to modify all instances

Object type APIs
setInstanceClass(Class)

Set a custom class to be used to represent instances of this object type. The class must
derive from the default class. This can only be called in runOnStartup , before any instances
have been created. For more information see the guide on subclassing instances.
createInstance(layerNameOrIndex, x, y, createHierarchy, template)

Create a new instance of the object type at a position. The layer to create on is specified
either by a case-insensitive string of the layer name or its zero-based index. The position is

Page 1026 of 1146

Construct 3 Official Manual

given in layout co-ordinates. If createHierarchy is true, all children of the created instance in
the scene-graph hierarchy will also be created automatically with their connections in place.
If template is a valid template name then the new instance will be based on the template
rather than an arbitrary instance. The return value is the script interface for the created
instance.
See Setting up a hierarchy in the Layout View manual entry for more information about
hierarchies.

See the Templates manual entry for more information on what templates are and how to
start using them.

getAllFamilies()

Return an array of IFamily listing all the families this object type belongs to.
*families()

Iterates over all the families this object type belongs to (as IFamily ).

isInFamily(family)

Returns a boolean indicating if this object type belongs to the specified IFamily .

Page 1027 of 1146

Construct 3 Official Manual

IPLUGIN SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/iplugin

The IPlugin script interface represents a plugin, such as the Sprite plugin. The plugin only
exists once in the project: if there are multiple Sprite objects in a project, then each object type is
represented with a different IObjectClass.

IPlugin APIs
runtime

A reference back to the IRuntime interface.
id

A read-only string with a unique identifier for this plugin as specified by the plugin developer.
isSingleGlobal

A read-only boolean indicating whether this plugin is a 'single global' type, meaning it is
added to the project once and then is available globally, such as with the Mouse object.
getSingleGlobalObjectType()
getSingleGlobalInstance()

These calls are only permitted when isSingleGlobal is true. These return the single
IObjectClass and IInstance respectively that have been created for this plugin.
isWorldType

A read-only boolean indicating whether this plugin is a world type, meaning it appears in
layouts.
isHTMLElementType

A read-only boolean indicating whether this plugin creates a HTML element.
isRotatable

A read-only boolean indicating whether instances of the plugin may be rotated.
hasEffects

Page 1028 of 1146

Construct 3 Official Manual

A read-only boolean indicating whether the plugin may use effects.
is3d

A read-only boolean indicating whether the plugin is 3D (i.e. has depth on the Z axis).
supportsHierarchies

A read-only boolean indicating whether instances of the plugin may be used in hierarchies.
supportsMesh

A read-only boolean indicating whether instances of the plugin may use the mesh distortion
feature.
static getByConstructor(ctor)

Return an IPlugin from its constructor in the C3.Plugins namespace, or null if it does
not exist. For example IPlugin.getByConstructor(C3.Plugins.Audio) will return the IPlugin
interface representing the Audio object, or null if the plugin is not used in the project.

Page 1029 of 1146

Construct 3 Official Manual

WORLDINSTANCE SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/object-interfaces/iworldinstance

The IWorldInstance script interface represents a single instance of an object type (represented
by IObjectClass) that appears in a layout. It derives from the IInstance script interface.
Many objects return a more specific class deriving from IInstance or IWorldInstance to add
APIs specific to the plugin. See the Plugin interfaces reference for more information.

Getting an IWorldInstance
Instances are typically accessed through IObjectClass methods like getFirstInstance() . For
example, runtime.objects.Sprite.getFirstInstance() will return the first instance of the Sprite
object type.
Try not to confuse object classes with object instances. A common mistake is to try to use
something like runtime.objects.Sprite.x to get the X co-ordinate of a Sprite instance.
However runtime.objects.Sprite is an IObjectClass, which does not have a position. First
add another call to get an instance before trying to read instance properties, for example
runtime.objects.Sprite.getFirstInstance().x .

World instance events
The following events can be listened for on any IWorldInstance using the addEventListener
method. See instance event for standard event properties. Note many more kinds of addonspecific events can be fired. See the documentation on each addon's script interfaces for more
information.
"hierarchyready"

Fired for the root instance in a hierarchy after all instances have finished creating. During
creation of a hierarchy it is uncertain whether other instances in the hierarchy have been
created yet, which can sometimes complicate initializing hierarchies. When this event fires
all instances in the hierarchy have been created, including triggering On created in event
sheets, and so it is a suitable time to perform initialization of an entire hierarchy. As this only
fires for the root instance, if you wish to iterate the rest of the instances in the hierarchy, use
the allInstances() generator method of the root instance.

General APIs
Page 1030 of 1146

Construct 3 Official Manual

layout

An ILayout interface representing the layout the instance is on.
layer

An ILayer interface representing the layer the instance is on.
x
y
setPosition(x, y)
getPosition()

The position of this instance, in layout co-ordinates. The methods allow setting or getting
both co-ordinates at the same time.
offsetPosition(dx, dy)

Adjust the position by adding dx to the X co-ordinate and dy to the Y co-ordinate.

zElevation

The Z elevation of the instance, relative to the layer it is on.
totalZElevation

A read-only value indicating the Z elevation of the instance including its layer's Z elevation.
originX
originY
setOrigin(originX, originY)
getOrigin()

The current origin point of this instance, represented as a normalized position in the range [0,
1]. For example the origin (0, 0) is in the top-left corner, and (0.5, 0.5) is in the middle
regardless of the size of the object. The methods allow setting or getting both co-ordinates
at the same time.
With Sprite objects, changing the animation frame will also update the origin according
to the origin placement in the Animations Editor.

width
height

Page 1031 of 1146

Construct 3 Official Manual

setSize(width, height)
getSize()

The size of this instance, in layout co-ordinates. The methods allow setting or getting both
values at the same time.
angle

The angle of the instance in radians. If this is changed, angleDegrees updates accordingly.

angleDegrees

The angle of the instance in degrees. If this is changed, angle updates accordingly.

getBoundingBox(ignoreMesh = false)

Return a DOMRect representing the axis-aligned bounding box of the instance in layout coordinates. By default this takes in to account any changes from the mesh distortion feature specifying false for the ignoreMesh parameter will return a bounding box as if the object
did not use mesh distortion.
This returns a copy of the bounding box. The returned DOMRect does not change if the
instance changes, nor does changing the DOMRect affect the instance.

getBoundingQuad(ignoreMesh = false)

Return a DOMQuad representing the bounding quad of the instance in layout co-ordinates.
This is always a rectangle, but unlike the bounding box can represent rotation. By default this
takes in to account any changes from the mesh distortion feature - specifying false for the
ignoreMesh parameter will return a bounding quad as if the object did not use mesh
distortion.
This returns a copy of the bounding quad. The returned DOMQuad does not change if the
instance changes, nor does changing the DOMQuad affect the instance.

isVisible

A boolean indicating whether the instance is visible in the layout.
isOnScreen()

Returns true if any part of the object's bounding box is within the screen area (performing the
same check as the Is on-screen condition). This is not affected by the object's visibility or
opacity.

Page 1032 of 1146

Construct 3 Official Manual

opacity

The opacity of the instance, as a floating point number in the range [0, 1], where 0 is fully
transparent and 1 is fully opaque.
colorRgb

An array with 3 elements specifying the red, green and blue color filter of the instance, with
color values as floats in the 0-1 range.
blendMode

A string indicating the current blend mode of the instance, controlling how it draws over the
background. This must be one of "normal" , "additive" , "copy" , "destination-over" ,
"source-in" , "destination-in" , "source-out" , "destination-out" , "source-atop" ,
"destination-atop" .

effects

An array of IEffectInstance representing the effect parameters for each effect on the
instance.

Z order APIs
moveToTop()
moveToBottom()

Move the instance to the top or the bottom of its current layer in the Z order.
moveToLayer(layer)

Move the instance to the top of a different layer given by its ILayer.
moveAdjacentToInstance(other, isAfter)

Move the instance adjacent to other (another IWorldInstance ) in the Z order. If necessary
this also moves the instance to the same layer as other . If isAfter is true, it moves it just
above the given instance, else just below.
zIndex

A read-only integer indicating the instance's current index in the Z order on its current layer,
starting at 0 for the back of the current layer, and increasing as it moves to the front.

Collision APIs

Page 1033 of 1146

Construct 3 Official Manual

See also the ICollisionEngine interface for more collision APIs.
isCollisionEnabled

Set or get a boolean indicating whether collisions are enabled for this instance. If disabled,
the instance will always fail all overlap or collision checks.
containsPoint(x, y)

Test if a point intersects this instance, using its collision polygon if any, and return a boolean
indicating if the point is inside the instance's collision area.
testOverlap(wi)

Test if this instance overlaps another world instance given by an IWorldInstance , returning
true if they overlap, else false . This uses the object's collision polygons if any. If either
instance has collisions disabled, this will always return false .

testOverlapSolid()

Test if this instance overlaps any instance with the Solid behavior. This returns the instance
interface class for the first instance with the solid behavior that was found to overlap this
instance, or null if none. This uses the object's collision polygons if any and respects solid
collision filtering.
The return value of this method is truthy when an overlap is found and falsey when not,
so this can be used directly in an if statement.

Mesh distortion APIs
createMesh(hsize, vsize)

Create a mesh for deforming the appearance of the object with the given number of mesh
points horizontally and vertically. The minimum size is 2.
releaseMesh()

Releases any mesh that has been created, reverting back to default rendering of the object
with no mesh distortion. Ignored if no mesh created.
setMeshPoint(col, row, opts)

Alter a given point in a created mesh given by its zero-based column and row. opts is an
object that may specify the following properties:

Page 1034 of 1146

Construct 3 Official Manual

mode : a string of "absolute"
x , y , u and v

(default) or "relative" , determining how to interpret the

options.

and y : the mesh point position offset, in normalized co-ordinates [0, 1] across the
object size. These are allowed to go outside the object bounds. In relative mode these
are added to the mesh point's current position.
x

and v : the texture co-ordinate for the mesh point, in normalized co-ordinates [0, 1].
These are not allowed to go outside the object bounds. These can be omitted, or in
absolute mode be set to -1, to indicate not to change the texture co-ordinate from the
default.
u

zElevation : the Z elevation of the mesh point, allowing for distortion in 3D. Similarly to Z

elevation of entire objects, this moves the mesh point up and down on the Z axis.
getMeshPoint(col, row)

Return an object describing the currently set mesh point at its zero-based column and row.
The returned object has the same properties as the opts argument of setMeshPoint()
uses, except for mode . The returned values are all absolute values (as relative mode is only
relevant when applying changes).
getMeshSize()

Return the size of the mesh as [hsize, vsize] (corresponding to the size passed to
createMesh() ) if one is created. If no mesh has been created, returns [0, 0] .

Scene graph APIs
getParent()

Return the parent IWorldInstance of this instance in the scene graph hierarchy if any, else
null .

getTopParent()

Return the top parent of this instance in the scene graph hierarchy (which by definition has
no parent itself) if any, else null .

*parents()

A generator method that can be used to iterate all the instance's parents, up to the top
parent.

Page 1035 of 1146

Construct 3 Official Manual

getChildCount()

Returns the number of children that have been added to this instance in the scene graph
hierarchy.
getChildAt(index)

Of the children that have been added to this instance, return the child instance at the given
zero-based index. If the index is out of bounds, returns null .

*children()

A generator method that can be used to iterate all the instance's added children.
*allChildren()

A generator method that can be used to iterate all the instance's children recursively, i.e.
including children of children, down to the bottom of the scene graph hierarchy.
addChild(wi, opts)

Add another world instance given by an IWorldInstance as a child of this instance in the
scene graph hierarchy. This instance becomes its parent in the scene graph hierarchy. The
child will move, scale and rotate with this instance according to the provided options
specified in the object opts , which supports the following properties:
transformX : move the child with this instance's X position

transformY : move the child with this instance's Y position

transformWidth : scale the child with this instance's width

transformHeight : scale the child with this instance's height

transformAngle : rotate the child with this instance's angle

transformZElevation : move the child with this instance's Z elevation

transformOpacity : change the child's opacity according to the parent's opacity

transformVisibility : make the child invisible if the parent is also invisible

Page 1036 of 1146

Construct 3 Official Manual

destroyWithParent : automatically destroy the child if this instance is destroyed

Each option is a boolean which defaults to false if omitted, so only true properties need
to be specified.
Instances can only have one parent. If the given instance is already added as a child of
something else, this method will have no effect.

getHierarchyOpts()

Return an object with properties representing the options specified for this child when it was
added to its parent. The returned object has the same properties as the opts argument of
addChild() uses, such as transformX , with boolean values indicating whether they are
enabled. Therefore the returned object can be passed directly to another call to addChild()
to re-use the same options.
removeChild(wi)

Remove an existing child given by an IWorldInstance that was previously added with
addChild() . The child is detached from the scene graph hierarchy and this instance will no
longer act as its parent. The removed child still keeps its own children, if it has any.
removeFromParent()

Shorthand method for wi.getParent().removeChild(wi) , i.e. removes this instance from its
parent if it has any. If the instance has no parent, the method has no effect.

Page 1037 of 1146

Construct 3 Official Manual

BEHAVIOR INSTANCE EVENT
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/behavior-instance-event

Events fired on IBehaviorInstance (or its derivatives) pass an event object as a parameter to the
handler function, and this event object has the following standard properties. Each type of event
may add other properties - refer to the documentation for each event to identify any further
properties that are available.

Standard instance event properties
instance

A reference to the IInstance (or derivative) associated with the behavior instance which fired
the event.
behaviorInstance

A reference to the IBehaviorInstance which fired the event.

Page 1038 of 1146

Construct 3 Official Manual

ASSETMANAGER SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/iassetmanager

The IAssetManager interface provides access to the project's assets, such as audio files and
other project files added to your project. It is typically accessed via runtime.assets .
On most modern platforms, assets can be directly retrieved as if over the network with standard
APIs like fetch() or XMLHttpRequest , even in non-web export platforms like mobile or desktop
apps. However in some circumstances, generally with unusual export options like Playable Ads
or with legacy projects, it may be necessary to use Construct's IAssetManager interface to fetch
resources, as it implements workarounds that prevent standard fetches working in those
environments.
Note that the project property Export file structure affects the URLs of resources after
export. The modern Folders mode is recommended as it preserves the folder structure of
the Project Bar. See Superseded features.

AssetManager APIs
async fetchText(url)
async fetchJson(url)
async fetchBlob(url)
async fetchArrayBuffer(url)

Retrieve the contents of a given URL as a string, JSON object, Blob or ArrayBuffer. Returns a
promise that resolves when the resource has been loaded.
async getProjectFileUrl(url)

Retrieve a URL that can be fetched directly for a given resource. Returns a promise that
resolves to a string with a URL that may be the same as the original URL, or a different URL
(e.g. blob: URL) if direct fetching is not supported. This is intended for using with local files
where the other fetch methods are not appropriate, such as assigning the src attribute of a
video.
async getMediaFileUrl(url)

Page 1039 of 1146

Construct 3 Official Manual

As with getProjectFileUrl but for sound and music files, which are exported to a media
subfolder.
mediaFolder

A string of the subfolder media files are in, including sound and music files. In preview this is
an empty string, and after export it is the media subfolder followed by a forward slash, e.g.
"media/" .

async loadScripts(...urls)

Fetch and run the JavaScript files at the given URLs. This can load scripts in the Files folder
of the Project Bar, none of which are automatically loaded by Construct. When loading
multiple scripts, they will run in the order they are provided, e.g. loadScripts("script1.js",
"script2.js") will always run script1.js first and script2.js second. For best efficiency, try to
load all the scripts you need in a single call, rather than repeated calls.
async compileWebAssembly(url)

Fetch and compile a WebAssembly.Module from the given URL, which is typically a .wasm
file. This uses streaming compilation where supported. Note this does not instantiate the
module, which needs to be done before any calls can be made. Pass the module resulting
from this call to WebAssembly.instantiate() to get a WebAssembly.Instance from the
module.
async loadStyleSheet(url)

Fetch a stylesheet at the given URL and attach it to the current document, applying its styles.
Returns a Promise that resolves when the stylesheet has been applied to the document.

Page 1040 of 1146

Construct 3 Official Manual

ICOLLISIONENGINE SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/icollisionengine

The ICollisionEngine interface provides access to Construct's collision engine, such as to
identify if two objects are intersecting. It is typically accessed via runtime.collisions .

Collision APIs
runtime

A reference back to the IRuntime script interface.
testOverlap(instA, instB)

Returns a boolean that indicates if two instances, which must be derivatives of
IWorldInstance, are overlapping at their current positions.
// Example code
if (runtime.collisions.testOverlap(instA, instB))
{
console.log("Collision found!");
}

testOverlapAny(inst, iterable)

Test if an IWorldInstance is overlapping any of the other IWorldInstance s provided by an
iterable (which can be any kind of iterable object, such as an array). If an overlap is found, it
returns the IWorldInstance of the first instance in iterable that overlaps inst . If no
overlap is found with any of the provided instances, it returns null .
Note the return value can also be used as truthy or falsey, such as in an if statement.

testOverlapSolid(inst)

Test if an IWorldInstance is overlapping any other instance with the Solid behavior. If an
overlap is found, it returns the IWorldInstance of the first found solid instance that overlaps
inst . If no overlap is found it returns null .

Page 1041 of 1146

Construct 3 Official Manual

Note the return value can also be used as truthy or falsey, such as in an if statement.

setCollisionCellSize(width, height)

Construct optimizes collision checks by sorting all objects in to "cells". The default cell size is
the viewport size. Changing the collision cell size adjusts the trade-off between collision
performance, memory use, and overhead of moving objects. Usually the default works well
for most projects, but projects where there are large numbers of objects testing collisions in
a small area, such as "bullet hell" style games, may benefit from a smaller collision cell size.
Use performance measurements to identify the optimal size. The collision cell size will also
affect how many instances are returned by getCollisionCandidates() .

getCollisionCellSize()

Returns [width, height] indicating the current collision cell size.

getCollisionCandidates(iObjectClasses, domRect)

Efficiently retrieve only instances of the given object classes that are near the specified
rectangular area in the layout. This uses Construct's "collision cells" optimization and allows
substantially reducing the number of collision checks that need to be performed. For
example instead of checking for collisions against all instances of a given object class,
which could involve thousands of instances distributed across a large layout, this method
allows efficiently retrieving only a smaller number of instances in the area which are possible
candidates for collision checking. The parameters work as follows:
is either an IObjectClass, or an array of IObjectClass, specifying the
object classes of interest, e.g. runtime.objects.Enemy . Only instances belonging to these
object classes will be returned. Families can also be specified and all instances
belonging to any of the object types in the family will be included.
iObjectClasses

is a DOMRect specifying a rectangular area in the layout. Instances near this
area will be returned. All instances inside the specified rectangle will be returned, but
some instances near to but outside the rectangle may also be returned, as the area
checked is done at the resolution of the collision cell size; however instances far away
from the area will not be included, which is the main purpose of this method.
domRect

The method returns an array of IWorldInstance with the instances near the specified area.
Note also that due to the algorithm used, the returned array of instances may include
duplicates - i.e. the same instance may appear more than once in the array. These can be
filtered by creating a Set with the returned array, as a Set only stores unique items; however
this will add a performance overhead. Eliminating duplicates may not be necessary
depending on the algorithm used. For example if the aim is to identify any collision and then
destroy the object, it does not matter if the same check is performed twice. However if the

Page 1042 of 1146

Construct 3 Official Manual

aim is to add to the score for every overlap, then duplicates must be eliminated for the
correct intended result.

Page 1043 of 1146

Construct 3 Official Manual

INSTANCE EVENTS
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/instance-event

Events fired on IInstance (or its derivatives) pass an event object as a parameter to the handler
function, and this event object has the following standard properties. Each type of event may
add other properties - refer to the documentation for each event to identify any further properties
that are available.

Standard instance event properties
instance

A reference to the IInstance (or derivative) which fired the event.

Page 1044 of 1146

Construct 3 Official Manual

PLATFORM INFO SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/iplatforminfo

The IPlatformInfo interface provides access to Construct's detected platform details, such as
the browser, operating system, and export type. It provides similar information to the Platform
info plugin, but note that plugin does not need to be in the project to use this interface. It is
typically accessed by the IRuntime platformInfo property.
// Example: log detected operating system to console on startup
runOnStartup(async runtime =>
{
console.log("The detected OS is: " + runtime.platformInfo.os);
});

Platform info APIs
isMobile

A read-only boolean indicating whether Construct detects the current device as "mobile".
This detection may be unreliable. See the warning for the Is on mobile condition in the
Platform Info manual entry.

os

A read-only string with the operating system Construct has detected, which is one of
"windows" , "macos" , "linux" , "chrome-os" , "android" , "ios" or "unknown" .

osVersion

A read-only string with the operating system version Construct has detected, or the string "
(unknown)" if it failed to identify a version.

browser

A read-only string with the browser Construct has detected, which is one of "chrome" ,
"chromium" , "edge" , "opera" , "nwjs" , "firefox" , "safari" or "unknown" .

Page 1045 of 1146

Construct 3 Official Manual

Consider using feature detection or referring to browserEngine rather than relying on
the identified browser.

browserVersion

A read-only string with the browser version Construct has detected, or the string "
(unknown)" if it failed to identify a version.

browserEngine

A read-only string with the browser engine Construct has detected, which is one of
"chromium" , "gecko" , "webkit" , or "unknown" if failed to identify any.

exportType

A read-only string indicating the export option used to export the project, which is one of
"preview" (when previewing prior to export), "html5" , "scirra-arcade" , "cordovaandroid" , "cordova-ios" , "nwjs" , "windows-webview2" , "macos-wkwebview" , "linux-cef" ,
"xbox-uwp-webview2" , "instant-games" or "playable-ad" .

renderer

A read-only string indicating the graphics rendering technology in use. This can be
"webgl1" , "webgl2" or "webgpu" . It can also have a -software suffix if a "major
performance caveat" is detected, which normally indicates slower software rendering,
typically due to unreliable GPU drivers. For example, software-rendered WebGL 1 support
would return "webgl1-software" .

rendererDetail

A read-only string describing system-specific detail about the graphics hardware in use. This
typically describes the GPU manufacturer and model name, and sometimes some hardware
capabilities.
canvasClientX
canvasClientY

Read-only numbers with the position of the main display canvas in CSS pixels. In other
words these are the CSS co-ordinates of the top-left point of the main display canvas relative
to the page.
canvasCssWidth
canvasCssHeight

Page 1046 of 1146

Construct 3 Official Manual

Read-only numbers with the size of the main display canvas in CSS pixels. This does not
correspond exactly to device (physical display) pixels, but is the appropriate size from a web
design perspective in px units.

canvasDeviceWidth
canvasDeviceHeight

Read-only numbers with the size of the main display canvas in device (physical display)
pixels. Unlike the CSS size, this size reflects the number of actual pixels used in the display.
devicePixelRatio

Return the devicePixelRatio property.
This property can also be read in worker mode, which means it may be preferable to read
this rather than the devicePixelRatio global.

Page 1047 of 1146

Construct 3 Official Manual

STORAGE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/istorage

The IStorage interface provides access to storage for the project. It essentially wraps a simple
key-value storage engine based on IndexedDB. This means any data that can be stored in
IndexedDB can be stored with these methods, such as numbers, strings, Blobs, etc. It is typically
accessed by the IRuntime storage property.
This interface accesses the same storage as the Local Storage plugin. Therefore an item stored