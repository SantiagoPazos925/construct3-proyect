# Manual Construct 3  Parte 17 (líneas 1920120400)

## Resumen
- convert between timestamps and human-readable dates and times, and other related tools. (línea 7)
- Date & time parts (línea 9)
- A timestamp consists of the following parts, all of which are also numbers, with the given ranges (línea 10)
- and start points as noted: (línea 11)
- Year: the full four-digit year, e.g. 2020 (línea 12)
- Month: the zero-based calendar month, e.g. 0 for January, 5 for June (línea 13)
- Date: the calendar date, i.e. the day of the month, from 1-31 (línea 14)
- Day: the zero-based week day from 0-6, starting with Sunday, e.g. 2 for Tuesday (línea 15)
- Hours: the hours of the time, 0-23 (línea 16)
- Minutes: the minutes of the time, 0-59 (línea 17)
- Seconds: the seconds of the time, 0-59 (línea 18)
- Milliseconds: the milliseconds of the time, 0-999 (línea 19)
- Date Conditions (línea 21)
- Compare Timestamps (línea 22)
- Compare Timestamps (línea 27)
- Compare two timestamps. Equal timestamps refer to the same time, and a timestamp that (línea 29)
- is less than another precedes it in time. (línea 30)
- Compare Date Strings (línea 31)
- Compare two date strings with each other. The date strings are converted to their equivalent (línea 33)
- numeric timestamp before the comparison. (línea 34)

## Contenido

convert between timestamps and human-readable dates and times, and other related tools.

Date & time parts
A timestamp consists of the following parts, all of which are also numbers, with the given ranges
and start points as noted:
Year: the full four-digit year, e.g. 2020
Month: the zero-based calendar month, e.g. 0 for January, 5 for June
Date: the calendar date, i.e. the day of the month, from 1-31
Day: the zero-based week day from 0-6, starting with Sunday, e.g. 2 for Tuesday
Hours: the hours of the time, 0-23
Minutes: the minutes of the time, 0-59
Seconds: the seconds of the time, 0-59
Milliseconds: the milliseconds of the time, 0-999

Date Conditions
Compare Timestamps

Page 574 of 1146

Construct 3 Official Manual
Compare Timestamps

Compare two timestamps. Equal timestamps refer to the same time, and a timestamp that
is less than another precedes it in time.
Compare Date Strings

Compare two date strings with each other. The date strings are converted to their equivalent
numeric timestamp before the comparison.
Compare Timestamp parts

Compare two timestamp parts with each other. The possible parts are Year (4 digit), Month
(0 - 11), Date (1 - 31), Day (0 - 6), Hours (0 - 23), Minutes (0 - 59), Seconds (0 - 59), and
Milliseconds (0 - 999).
Compare date string parts

Compare two date string parts with each other, they are converted to their equivalent
numeric timestamp before the comparison. The possible parts are Year (4 digit), Month (0 11), Date (1 - 31), Day (0 - 6), Hours (0 - 23), Minutes (0 - 59), Seconds (0 - 59), Milliseconds
(0 - 999).

Date Expressions
ToString(timeStamp)

Convert a timestamp to a string representation including both date and time.
ToDateString(timeStamp)

Convert a timestamp to a string showing the corresponding date.
ToTimeString(timeStamp)

Convert a timestamp to a string showing the corresponding time.
ToLocaleString(timeStamp)

Convert a timestamp to a localized string representation including both date and time.
ToLocaleDateString(timeStamp)

Convert a timestamp to a localized string showing the corresponding date.
ToLocaleTimeString(timeStamp)

Convert a timestamp to a localized string showing the corresponding time.

Page 575 of 1146

Construct 3 Official Manual

ToUTCString(timeStamp)

Convert a timestamp to a string representation including both date and time in universal
time.
Parse(dateString)

Parse a date string into the corresponding numeric timestamp. For the supported string
formats, refer to the MDN documentation for Date.parse(), which is the underlying method
used by this expression.
ToTimerHours(milliseconds)

Convert milliseconds to the equivalent amount of hours as they would be shown in a timer.
ToTimerMinutes(milliseconds)

Convert milliseconds to the equivalent amount of minutes as they would be shown in a timer
(0-59).
ToTimerSeconds(milliseconds)

Convert milliseconds to the equivalent amount of seconds as they would be shown in a timer
(0-59).
ToTimerMilliseconds(milliseconds)

Convert milliseconds to the equivalent amount of milliseconds as they would be shown in a
timer (0-999).
ToTotalHours(milliseconds)

Convert milliseconds to the equivalent amount of hours, which may be a fractional value.
ToTotalMinutes(milliseconds)

Convert milliseconds to the equivalent amount of minutes, which may be a fractional value.
ToTotalSeconds(milliseconds)

Convert milliseconds to the equivalent amount of seconds, which may be a fractional value.
Now

Get the current timestamp (the number of milliseconds since January 1st 1970).
ExportTimestamp

Page 576 of 1146

Construct 3 Official Manual

Get the timestamp at the time the project was exported from Construct. In preview mode,
this is the time the preview was launched.
Get(year, month, day, hours, minutes, seconds, milliseconds)

Return a timestamp by providing the individual parts of the date and time.
TimezoneOffset

Get the timezone offset of the local system.
GetYear(timeStamp)

Extract the 4 digit year from the provided timestamp in local time.
GetUTCYear(timeStamp)

Extract the 4 digit year from the provided timestamp in universal time.
GetMonth(timeStamp)

Extract the month (0 - 11) from the provided timestamp in local time.
GetUTCMonth(timeStamp)

Extract the month (0 - 11) from the provided timestamp in universal time.
GetDate(timeStamp)

Extract the date (1 - 31) from the provided timestamp in local time.
GetUTCDate(timeStamp)

Extract the date (1 - 31) from the provided timestamp in universal time.
GetDay(timeStamp)

Extract the day (0 - 6) from the provided timestamp in local time.
GetUTCDay(timeStamp)

Extract the day (0 - 6) from the provided timestamp in universal time.
GetHours(timeStamp)

Extract the hours (0 - 23) from the provided timestamp in local time.

Page 577 of 1146

Construct 3 Official Manual

GetUTCHours(timeStamp)

Extract the hours (0 - 23) from the provided timestamp in universal time.
GetMinutes(timeStamp)

Extract the minutes (0 - 59) from the provided timestamp in local time.
GetUTCMinutes(timeStamp)

Extract the minutes (0 - 59) from the provided timestamp in universal time.
GetSeconds(timeStamp)

Extract the seconds (0 - 59) from the provided timestamp in local time.
GetUTCSeconds(timeStamp)

Extract the seconds (0 - 59) from the provided timestamp in universal time.
GetUTCMilliseconds(timeStamp)

Extract the milliseconds (0 - 999) from the provided timestamp in local time.
GetMilliseconds(timeStamp)

Extract the milliseconds (0 - 999) from the provided timestamp in universal time.
Difference(first, second)

Calculate the difference between two timestamps.
ChangeYear(timeStamp, year)

Change the year (4 digit) of the provided timestamp in local time, and return as a new
timestamp.
ChangeUTCYear(timeStamp, year)

Change the year (4 digit) of the provided timestamp in universal, time and return as a new
timestamp.
ChangeMonth(timeStamp, month)

Change the month (0 - 11) of the provided timestamp in local time, and return as a new
timestamp.

Page 578 of 1146

Construct 3 Official Manual

ChangeUTCMonth(timeStamp, month)

Change the month (0 - 11) of the provided timestamp in universal, time and return as a new
timestamp.
ChangeDate(timeStamp, date)

Change the date (1 - 31) of the provided timestamp in local time, and return as a new
timestamp.
ChangeUTCDate(timeStamp, date)

Change the date (1 - 31) of the provided timestamp in universal time, and return as a new
timestamp.
ChangeDay(timeStamp, day)

Change the day (0 - 6) of the provided timestamp in local time, and return as a new
timestamp.
ChangeUTCDay(timeStamp, day)

Change the day (0 - 6) of the provided timestamp in universal time, and return as a new
timestamp.
ChangeHours(timeStamp, hours)

Change the hours (0 - 23) of the provided timestamp in local time, and return as a new
timestamp.
ChangeUTCHours(timeStamp, hours)

Change the hours (0 - 23) of the provided timestamp in universal time, and return as a new
timestamp.
ChangeMinutes(timeStamp, minutes)

Change the minutes (0 - 59) of the provided timestamp in local time, and return as a new
timestamp.
ChangeUTCMinutes(timeStamp, minutes)

Change the minutes (0 - 59) of the provided timestamp in universal time, and return as a new
timestamp.
ChangeSeconds(timeStamp, seconds)

Page 579 of 1146

Construct 3 Official Manual

Change the seconds (0 - 59) of the provided timestamp in local time, and return as a new
timestamp.
ChangeUTCSeconds(timeStamp, seconds)

Change the seconds (0 - 59) of the provided timestamp in universal time, and return as a
new timestamp.
ChangeMilliseconds(timeStamp, milliseconds)

Change the milliseconds (0 - 999) of the provided timestamp in local time, and return as a
new timestamp.
ChangeUTCMilliseconds(timeStamp, milliseconds)

Change the milliseconds (0 - 999) of the provided timestamp in universal time, and return as
a new timestamp.
FormatDateWithStyles(locale, timeStamp, dateStyle, timeStyle, hourFormat)

Format the provided time stamp using the locale and optional styles. "dateStyle" can be any
of "full", "long", "medium" or "short" and affects the date section of the final result, if an
unsupported value is used, the date section will be omitted from the final output of the
expression. "timeStyle" can be any of "full", "long", "medium" or "short" and affects the time
section of the final result, if an unsupported value is used, the time section will be omitted
from the final output of the expression. "hourFormat" can be either "12" or "24" and affects
the formatting of the time section of the final result, if an unsupported value is used, the end
result will be locale dependant.
FormatDateWithComponents(locale,
timeStamp, weekday, year, month, day, hour, minute,
second, hourFormat)

Format the provided time stamp using the locale and optional components. "weekday" can
be any of "long", "short" or "narrow". "year" can be any of "numeric" or "2-digit". "month" can be
any of "numeric", "2-digit", "long", "short" or "narrow". "day" can be any of "numeric" or "2-digit".
"hour" can be any of "numeric" or "2-digit". "minute" can be any of "numeric" or "2-digit".
"second" can be any of "numeric" or "2-digit". "hourFormat" can be either "12" or "24" and
affects the formatting of the time section of the final result, if an unsupported value is used
the end result will be locale dependant.
Any of the components can be omitted from the final result by providing an unsupported
value.

Page 580 of 1146

Construct 3 Official Manual

DICTIONARY
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/dictionary

The Dictionary object associates keys with values. Keys are string, and their associated value
can be a number or a string. It is a data storage object - it does not do any spell checking or
language-specific features.
Key names in the Dictionary object are always case sensitive. This means the key "SCORE" is
considered different to the key "score".

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IDictionaryInstance script interface. (JavaScript and TypeScript have built-in support for Map
which is a similar data structure, but this allows interacting with data used in event sheets.)

Example
Suppose the number 100 is stored with the key "score", and the string "Joe" stored with the key
"name". The result storage looks like the following table:
Key Value
name Joe
score 100

Retrieving the key "name" with Dictionary.Get("name") returns "Joe", and retrieving "score"
likewise returns 100. Setting "score" to 50 will change the value for the key.
This is like storing data in instance variables or event variables, but since you can use strings as
keys you can store any number of values.
Dictionaries are very efficient at retrieving values. Even if you have a dictionary with thousands
of keys, it is still very fast to read a value. Arrays are typically much slower to search through
(e.g. using the IndexOf expression), since they must scan through the entire array to locate
elements.

Designing dictionaries
You can use Construct's Dictionary Editor Paid plans only to set the initial contents of a
dictionary. You can create a new dictionary data file as a project file from the Project Bar. At
runtime you can load the project file with the AJAX object and use the Dictionary's Load action to
read the data file from the AJAX's LastData expression.

Dictionary conditions

Page 581 of 1146

Construct 3 Official Manual

Compare value

Compare the value stored for a key.
Has key

Check if a key exists in storage.
Is empty

True when there are no keys in storage.
For each key

Repeat the event once for each key in storage. The CurrentKey and CurrentValue expressions
return the current key and its value respectively.
Compare current value

Only valid in a For each key event. Compare the value of the current key.

Dictionary actions
Add key

Add a new key to storage, with a given value. If the key already exists, its value is updated.
Clear

Remove all keys from storage, making the object empty.
Delete key

Remove a key and its value from storage. If the key does not exist, this has no effect.
Set key

Update the value for a key which already exists. If the key does not exist, this has no effect.
(Unlike Add key, the key will not be created.)
Download

Invokes a browser download of a file containing the Dictionary's contents in JSON format.
Load

Page 582 of 1146

Construct 3 Official Manual

Load all keys and values from JSON data previously retrieved from the Dictionary object
using either the Download action, the AsJSON expression, or the AJAX object loading a
project file.
Note this does not allow loading arbitrary JSON data - the data must be in a special
format for Construct. If you want to load data from a project file, create it using the New
- Dictionary menu option in the Project Bar.

Dictionary expressions
Get(key)

Return the value stored for a key, e.g. Dictionary.Get("score") . If the key does not exist, it
returns 0.
GetDefault(key, valueIfMissing)

Return the value stored for a key, but if it is missing, return a different value instead. For
example Dictionary.GetDefault("name", "guest") will return the value of the key "name" if it
exists, otherwise it will return the string "guest".
KeyCount

Return the number of keys in storage.
CurrentKey
CurrentValue

In a For each key event, these return the key and its value (respectively) for the current key
being iterated.
AsJSON

Return the contents of the Dictionary object in JSON format. This can be later loaded back
with the Load action, sent to a server via AJAX, saved to disk, and so on.

Page 583 of 1146

Construct 3 Official Manual

DRAWING CANVAS
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/drawing-canvas

The Drawing canvas object provides a drawing surface that you can draw your own content on
to using some drawing actions. This includes basic geometric shapes like rectangles, lines,
polygons and ellipses, as well as the ability to paste other objects in to the canvas.
Drawing Canvas is a 2D feature. It does not work on 3D layers with a 3D camera view.

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IDrawingCanvasInstance script interface.

Colors
The colors for drawing commands or pixels, such as the color to fill a rectangle, are typically
specified with the rgba system expression. This specifies the red, green, blue and alpha
components of the color in the range 0-100. The rgba255 expression is identical but uses a 0255 scale that artists may be more familiar with. The rgbEx and rgbEx255 expressions can also
be used, but do not provide a parameter for alpha, so will act as if the alpha was fully opaque.

Handling resizing and resolution
The Drawing Canvas object has two ways of handling the resolution of the canvas, each with
their own advantages and disadvantages.

Automatic resolution mode
By default, the canvas uses automatic resolution mode, which uses the same display resolution
as the game. However the display resolution usually changes when the window is resized. For
example in letterbox scale mode, when the window is resized larger the game displays the same
content but at a larger size (using more pixels). A similar thing happens when you resize the
object itself. The Drawing canvas object automatically changes the resolution of its canvas when
this happens. This is destructive, though: the next draw to the canvas will clear it, because
internally the drawing surface is destroyed and recreated at the new resolution. The advantage
of this approach is it ensures drawn content will appear with high quality, as resizing or scaling
will increase the resolution, rather than stretching a lower resolution image.
The reason it waits until the next draw to recreate the drawing surface is so that if you draw to it
once, the same content is simply displayed stretched at the new resolution. This is often an
acceptable result after drawing in On start of layout. Normally a better idea is to draw one-off
Page 584 of 1146

Construct 3 Official Manual

content in the trigger On resolution changed - this also triggers on startup, and again any time
the resolution changes, ensuring your content can increase in detail if the window is resized
larger.
Alternatively if you clear and re-render the canvas in Every tick, since it is always redrawing it will
always draw at the current resolution. This approach is similar to how the runtime itself renders,
although you may want to stop drawing if nothing is changing in the game, which is also what
the runtime does.

Fixed resolution mode
Another option is to use a fixed resolution. This defaults to using the size of the object as the
size of the drawing surface (i.e. if the object is 100x100 in the layout, then the drawing surface
will be 100x100 pixels too). The drawing surface can also be set to a different size using the Set
resolution mode action.
Fixed resolution mode will keep the drawing surface at the same resolution regardless of the
object size, window size, or scale. In other words it will always use the same size surface and
just stretch it to fit the display. The advantage of this is it will preserve the drawn content even as
the display resolution changes. However a potential downside is as it does not increase quality
as the resolution increases, in some cases it could appear blurry or pixellated.

Co-ordinate systems
The Drawing canvas object allows you to draw shapes and lines at specific positions. In
automatic resolution mode it uses a co-ordinate system relative to the object in layout coordinates. For example if the object is sized 100x100 in the layout, then the point (50, 50) is
always in the middle of the canvas, regardless of the resolution. This means you don't need to
change the drawing co-ordinates depending on the canvas resolution: everything scales
automatically, so if the user resizes the window larger, content automatically increases in detail.
In fixed resolution mode the co-ordinate system is instead in pixels on the drawing surface. For
example if the drawing surface is 100x100, then the point (50, 50) is in the middle, regardless of
the size or scale of the Drawing Canvas object.
Note that when using snapshots to read and write pixel data, snapshot pixels are given in
actual pixel co-ordinates rather than object co-ordinates, even in automatic resolution mode.
The PixelScale expression also gives the size of an actual pixel on the drawing surface in
object co-ordinates, allowing you to convert between object and pixel co-ordinates.

Pixel manipulation with snapshots
The way computer graphics works makes requesting to retrieve the color of even just a single
pixel an extremely costly operation. Rendering is highly optimised to go one way: sending
drawing commands from the CPU, rendering on the GPU, and then displaying the result on the
user's screen. Getting the color of a pixel back to the CPU goes in the opposite direction, and if
Page 585 of 1146

Construct 3 Official Manual

the system has to wait for the result, it would completely stall the rendering process, almost
certainly janking the framerate.
In order to avoid the performance pitfalls while allowing access to individual pixels, the Drawing
canvas object uses a snapshot system, which works like this:
1

The Save snapshot action copies the entire canvas image on the GPU.

2

The copied image is then sent asynchronously (in parallel) back to the CPU. Rendering can
continue while this happens.

3

When the copied image is available on the CPU, On snapshot triggers. Now the pixel data can be
read using the snapshot expressions, e.g. SnapshotRedAt(x, y).

4

If the pixel data needs to be altered, it can be modified using the Set snapshot pixel action. This
only changes the copy available to the CPU and does not visibly affect the canvas. To make
changes visible, use the Load snapshot action, which copies the snapshot back to the canvas.

The Noise textures example demonstrates how to do this, writing random pixel data generated
by the Advanced Random object.

Drawing canvas properties
Resolution mode

How to handle the resolution of the actual drawing surface. For more information see the
section above on Handling resizing and resolution.
Initially visible

Whether the object is initially visible at runtime.
Origin

Choose the location of the object origin relative to its box.
Antialiasing

Enable multisample antialiasing (MSAA) for better quality drawing. For example normally
polygon and line edges will be hard ("jagged"). Enabling antialiasing improves the quality of
the edges (making them "softer"), but makes rendering slower and uses more memory.
Higher levels of antialiasing reduce performance further. This option requires WebGL 2+, and
not all devices support all levels of antialiasing. For example if you select 8x MSAA but a
particular device only supports 4x MSAA, it will fall back to 4x MSAA instead.
If antialiasing is enabled, the Paste object action cannot draw with effects enabled if the
object uses any background-blending effects, e.g. Screen. This is because internally

Page 586 of 1146

Construct 3 Official Manual

WebGL does not support directly reading from antialiased surfaces. If you need to paste
objects with background-blending effects, turn off antialiasing.

Drawing canvas conditions
On resolution changed

Triggered when the display resolution of the canvas changes, e.g. due to resizing the window
in Letterbox scale mode. See the section on Handling resizing and resolution above. If you
draw to the canvas in this trigger, it will mean the canvas image always automatically scales
to the display resolution. If you do not draw to the canvas in this trigger, it will simply display
the old image stretched to the new size.
On saved image

Triggered after the Save image action when the saved image is ready. The image can be
accessed using the SavedImageURL expression, e.g. to download it using the Browser
object's Invoke download action.
On snapshot

Triggered after the Save snapshot action when the snapshot is ready. This allows reading
and writing individual pixels in the snapshot image, e.g. using the SnapshotRedAt expression.
See the section Pixel manipulation with snapshots above for more information.

Drawing canvas - canvas actions
This group of actions generally relates to the canvas image as a whole.
Set resolution mode

Change between automatic or fixed resolution modes for the drawing surface, or change the
size of a fixed resolution canvas. Note that if the canvas resolution changes, including by
changing the size of a fixed resolution canvas, the surface will be destroyed and recreated,
causing the previously drawn content to disappear.
Clear snapshot

Release a snapshot saved with the Save snapshot action, saving the memory used to store it.
This returns the state to as if no snapshot was taken at all. Any expressions attempting to
retrieve snapshot pixels after this action will return 0.
Load snapshot

Copy the snapshot in memory back to the canvas, so any changes to its pixel data become
visible in the object. The snapshot must match the resolution of the canvas - if the resolution
Page 587 of 1146

Construct 3 Official Manual

has changed, the snapshot cannot be loaded. Note this still leaves the snapshot in memory use the Clear snapshot action to remove it and save memory if the snapshot is no longer
needed.
Save image

Save the current canvas image in a compressed format (PNG or JPEG) suitable for the user
to download. A subset of the canvas area can be saved (e.g. for saving a cropped image) by
specifying the X, Y, Width and Height parameters, all given in device pixels. The expressions
SurfaceDeviceWidth and SurfaceDeviceHeight give the size of the canvas in device pixels.
The default (leaving all values as zero) will save the entire canvas area. This action triggers
On saved image when ready, and sets the SavedImageURL expression to a URL that can be
downloaded.
Save snapshot

Copy the current canvas image to make its pixel data available. Triggers On snapshot when
ready. For more information see the section Pixel manipulation with snapshots above.
Set snapshot pixel

Set the color of a pixel in the saved snapshot. A snapshot must have previously been taken
and On snapshot triggered. Unlike the other drawing commands, this takes a position in pixel
co-ordinates. Use the rgba expression to set the pixel color to the given red, green, blue and
alpha components. Note changes will not be visible until the Load snapshot action is used.

Drawing canvas - general actions
This group of actions provides general drawing actions such as filling rectangles and drawing
lines. Drawing polygons involves more actions so is separated out in to its own group.
Clear canvas

Clear the entire canvas to a color. This overwrites all existing image content. For example
clearing to transparent will make the entire canvas transparent, unlike drawing a transparent
rectangle which will not make any visible difference.
Clear rectangle

As with Clear canvas, but only clears a rectangular area on the canvas.
Line
Dashed line

Draw a line between two points on the canvas, specifying the color and thickness of the line.
The line cap specifies whether the end of the line ends exactly at the start and end points
(Butt) or is squared off, extending slightly beyond the start and end points (Square). The
Page 588 of 1146

Construct 3 Official Manual

Dashed line variant also allows specifying a Dash length, which alternates between the line
color and transparency for a dash effect.
Fill ellipse
Outline ellipse

Draw either a filled or outlined ellipse shape on the canvas. The shape is specified using the
center point and the radius on the X and Y axes. If the radius on both axes is the same, the
shape will be a circle. The outline variant also specifies the thickness of the outline. The edge
can also be set to Hard for an aliased edge (suitable for pixellated games), or Smooth for a
better quality soft-edged appearance.
Fill linear gradient

Fill a rectangular area on the canvas with a linear gradient from one color to another. The
gradient direction can be either horizontal or vertical.
The gradient uses gamma-correct calculations, which may appear differently to other
tools that use gamma-incorrect calculations (by linearly interpolating in sRGB space).

Fill rectangle
Outline rectangle

Draw either a filled or outlined rectangle shape on the canvas. The outline variant also
specifies the thickness of the outline.
Paste object

Draw all instances of the given object that are overlapping the canvas onto the canvas at
their current positions. By default objects are drawn exactly as they appear, taking in to
account any effects added to them; drawing without effects will draw as if all the object's
effects were disabled.
The drawing actually happens at the end of the tick. The action is asynchronous, so it
can be used with the System Wait for previous actions to complete action, which can be
used to ensure the paste has completed. Note if an object is destroyed immediately after
pasting without waiting for completion, it will not be drawn, as it will be destroyed before
it gets to be drawn.

Set drawing blend

Set the background blending mode used for all drawing operations except Paste object
(which takes the blend mode from the object being pasted). The options match the same
blend modes as can be used by objects, but applies to the drawing to the canvas, rather than

Page 589 of 1146

Construct 3 Official Manual

the display of the Drawing Canvas object itself. Two useful options are setting the "copy"
blend mode and drawing with transparency to clear an area, or using "destination out" to
erase content.

Drawing canvas - polygon actions
This group of actions allows for drawing polygon shapes. Use Add poly point multiple times to
add points. Then outlined or filled polygons can be drawn. Use Reset poly to clear added points
and start again.
Add poly point

Add a new point to the current polygon. At least three points must be added before a polygon
can be drawn.
Outline poly
Dashed outline poly

Draw dashed lines between the points of the current polygon, joining back to the start point.
The parameters are similar to the Line and Dashed line actions.
Fill poly

Fill the current polygon area with a color. This supports both convex and concave polygons.
However concave polygons are internally converted in to multiple convex polygons. This
process can sometimes fail due to floating point precision issues in the geometric
calculations, and result in a glitchy rendering. If you know the shape you are rendering is
convex, check the Convex parameter, which will bypass the internal conversion; however this
will not render correctly if the polygon is in fact concave.
Note that self-intersecting polygons are not supported and will not draw correctly.

Reset poly

Clear all polygon points that were added, so the next Add poly point action starts a new
polygon.

Drawing canvas expressions
PixelScale

The size of a single canvas pixel in object co-ordinates. See the section Co-ordinate systems
above for more information.
SavedImageURL

Page 590 of 1146

Construct 3 Official Manual

In On saved image, the URL of the saved image. This can be downloaded using the Browser
object's Invoke download action.
SnapshotRedAt(x, y)
SnapshotGreenAt(x, y)
SnapshotBlueAt(x, y)
SnapshotAlphaAt(x, y)

Return the red, green, blue and alpha components of a pixel in a saved snapshot. The
position is given in pixel co-ordinates, and the returned value is returned in the 0-100 range.
For more information see the section Pixel manipulation with snapshots above.
SnapshotWidth
SnapshotHeight

Return the size of a saved snapshot in pixels. For more information see the section Pixel
manipulation with snapshots above.
SurfaceDeviceWidth
SurfaceDeviceHeight

Returns the current size of the canvas surface in device pixels. These are useful to use when
defining a subset area to use in the Save image action.

Page 591 of 1146

Construct 3 Official Manual

FACEBOOK
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/facebook

The Facebook object allows you to integrate your game with Facebook. It can be used in any
web-hosted game, not just in Facebook games. For example, you could have a game running on
your own server. The Facebook object still allows you to integrate with user's Facebook accounts
even when the user is playing the game on your website. However, it is still necessary to submit
the app to Facebook so you have an App ID. Apps can be submitted to Facebook via Facebook
Developers.
The Facebook plugin is not compatible with Instant Games. Use the Instant Games plugin
instead.
The Facebook object makes asynchronous requests. This means the game keeps running while
operations which may take several seconds (like submitting a score) complete in the
background. Therefore, the Facebook object works around the principle of an action which starts
a task (like Publish score), which then triggers a condition when it has completed (like On score
submitted). These may be a few seconds apart and the game continues to run in between, rather
than freezing the game while it waits for completion. As with most asynchronous requests,
actions may complete in a different order to that which they were made.

Readiness
The Facebook object takes a moment to load on startup. Do not attempt to use the Facebook
object before On ready has triggered or Is ready is true, otherwise the actions will be ignored.
You must enter the App ID for the Facebook object to successfully load, even in testing. If you
don't enter it, the object will never become ready. This is because Facebook prevent you using
the API unless you have a real App ID to give it.

Logging in
The user must successfully log in with their Facebook account before they can use any other
features of the Facebook object, such as posting to the user's wall. This is done with the Log in
action, and since login can take a few seconds you must wait until On user logged in triggers
before using any other features.

Facebook Playable Ads
This plugin also provides the On CTA click action for Facebook Playable Ads. This action can be
used independently of the other features, i.e. without having to log in first, or provide an app ID or
any other properties.
Page 592 of 1146

Construct 3 Official Manual

Facebook Properties
App ID

The App ID given for your app in the Facebook Developers section.
App Secret

This is only necessary if you plan to use the Scores API. Otherwise do not enter the app
secret. The app secret can be found in the Facebook Developers section for your app and is
currently necessary to enable the Scores API.

Facebook conditions
Is ready

True if the Facebook object is ready to be used. When false, the Facebook object is still
loading the necessary scripts and all actions will be ignored.
Is user logged in

True if the user is currently logged in with their Facebook account.
On name available

Triggered shortly after On user logged in, when the expressions to get the user's name are
available.
On ready

Triggered when the Facebook object is ready to be used. Before this triggers, the Facebook
object is still loading the necessary scripts and all actions will be ignored.
On user logged in

Triggered when the user has successfully logged in. It also triggers on startup if the user has
previously logged in, and they have returned to the app with a remembered login. This also
triggers at the start of each layout throughout the game while the user is logged in.
On user logged out

Triggered if the user logs out during the game.
On hi-score

Triggers once for each hi-score after the Request hi-score board action. The HiscoreName,
HiscoreRank and Score expressions contain the current hi-score information.
Page 593 of 1146

Construct 3 Official Manual

On score submitted

Triggers when the Publish score action has successfully completed.
On user top score available

Triggers when the Request user top score action has successfully completed. The Score
expression has the user's top score.

Facebook actions
Log in

Open a popup window requesting the user to log in. This can only be called in a user-input
event, such as a key press, button push, mouse click or touch screen tap. The user may
cancel at the log in screen so logging in is not guaranteed to be successful. You must
provide a comma-separated list of permissions to request. Some features of the Facebook
plugin depend on the user approving certain permissions. Do not request permissions that
your application does not need. You can find documentation on the available permissions in
the Facebook developer's guide.
Log out

Log the current user out from Facebook.
On CTA click

For Facebook Playable Ads. In a Playable Ad, use this action when the user interacts with
the call-to-action (CTA) in the ad. This action can be used independently of the rest of the
plugin's features.
Prompt to share link

Open a dialog prompting the current user to share a URL of your choosing on their wall. This
does not require any permissions, but the user is free to cancel the action.
Prompt to share this app

Open a dialog prompting the current user to share the URL to the current Facebook app on
their wall. This does not require any permissions, but the user is free to cancel the action.
Prompt wall post

Open a dialog prompting the current user to make a wall post. No content or links is added it is an empty text box for the user to type anything they like. This does not require any
permissions, but the user is free to cancel the action.

Page 594 of 1146

Construct 3 Official Manual

Publish link

Automatically publish a URL to the user's wall without any prompt. Descriptions and a
thumbnail image can optionally be provided. This requires that the user has logged in with
the Publish to stream permission.
Publish wall post

Automatically publish a message to the user's wall without any prompt. This requires that
the user has logged in with the Publish to stream permission.
Publish score

Publish a numerical score to the hi-score board for the game. This requires that the user has
logged in with the Publish scores permission. When the action completes, it triggers On score
submitted.
Request hi-score board

Request the game's hi-scores. This requires that the user has logged in with the Publish
scores permission. This action will repeatedly trigger On hi-score once per score on the hiscore board. It is up to you to find a way to display these scores; appending each hi-score to
a text object is a simple way to display them.
Request user top score

Request the current logged in user's top score for this game. This requires that the user has
logged in with the Publish scores permission. When the action completes, it triggers On user
top score available.

Facebook expressions
FirstName

The current user's first name. This is only set after On name available triggers.
FullName

The current user's full name. This is only set after On name available triggers.
LastName

The current user's full name. This is only set after On name available triggers.
UserIDStr

Page 595 of 1146

Construct 3 Official Manual

The current user's ID, which can be used to distinguish different users with the same name.
This is only set if the user is logged in. Note: although this is a number, it is returned as a
string since IDs can be larger numbers than Javascript can express.
HiscoreName

The current hi-score board entry name. This is only set in an On hi-score event.
HiscoreRank

The current hi-score board entry rank, from 1 down to the number of hi-score entries
requested. This is only set in an On hi-score event.
HiscoreUserIDStr

Return the user ID of the current hi-score board entry. This is unique even if two people on
the hi-score board have the same name. Note: although this is a number, it is returned as a
string since IDs can be larger numbers than Javascript can express.
Score

Either the current hi-score in an On hi-score event, or the current user's score in On user top
score available.

Page 596 of 1146

Construct 3 Official Manual

FILE CHOOSER
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/file-chooser

The File chooser plugin is a form control that allows the user to pick a file on their local system
and load it. For example, a text file can be chosen and its contents read, or a picture chosen and
the image displayed in-game. Some mobile browsers also allow a picture to be taken with the
device camera instead of choosing an existing file, then the taken photo image file is passed as
the chosen file.
The appearance of the file chooser button varies depending on the platform. Several browsers
display a "Choose file" button.

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IFileChooserInstance script interface.

Layering HTML objects
This object displays using a HTML element rather than drawing in to the canvas. This means its
layering works differently to other objects. To learn more about how to layer HTML objects, see
HTML layers.

Using files
Once a file has been selected, it can be accessed using a URL. While many URLs reference web
resources on the Internet, the File Chooser plugin returns a special URL that refers to the local
file. This URL typically starts with "blob:" (since the browser's term for an arbitrary set of data is a
"blob") followed by some kind of unique ID. By accessing this URL the local file is accessed,
without using any Internet connection, so this also works offline.
The file URL can be used like any other URL. For example, it can be requested by the AJAX object
to load its contents as text, or passed to the Sprite object's Load image from URL action to
display it.

File Chooser properties
Accept

The file type filter to accept. This can be a comma-separated list of file extensions, e.g.
".png,.jpg,.jpeg", or a MIME type, such as image/* for any image file, video/* for any video file,
and so on. If left empty, the file chooser will be able to choose any kind of file.

Page 597 of 1146

Construct 3 Official Manual

For best cross-platform compatibility, where possible use a MIME type instead of a file
extension. For example prefer using application/json instead of the .json file extension.

Select

Whether to allow selecting a single file only, or multiple files in one go.
Initially visibile

Whether the control is initially visible or hidden.
ID Optional

An optional id attribute for the element in the DOM (Document Object Model). This can be
useful for CSS styling.
Class Optional

An optional class attribute for the element in the DOM (Document Object Model). This can be
useful for CSS styling.

File Chooser conditions
See common conditions for features shared between form control objects.
On changed

Triggered when a file or set of files has been chosen from the input control.

File Chooser actions
See common actions for features shared between form control objects.
Clear

Reset the control to its initial state with no selection, clearing any prior picked file.
Click

Acts as if the file chooser was clicked, which brings up the system file picker. This allows the
button to be completely customised, as the actual File Chooser object can be moved
offscreen, and a custom sprite or other object used to activate the Click action of File
Chooser instead.

Page 598 of 1146

Construct 3 Official Manual

Normally this action can only be used in a user input trigger, e.g. in a mouse click event,
touch start event, etc.

Release file

Release a previously returned file URL. This allows the browser to release memory for the
file. If the user chooses lots of files or chooses them regularly this action should be used to
release the files after they are no longer needed.

File Chooser expressions
FileCount

The number of chosen files. If Select is Single, this is always 1. If Multiple then this returns
the number of chosen files.
FileNameAt(index)

Return the name of the chosen file at an index. In Single select mode, the index should
always be 0, since only one file can be chosen.
FileSizeAt(index)

Return the size of the chosen file in bytes at an index. In Single select mode, the index should
always be 0, since only one file can be chosen.
FileTypeAt(index)

Return the MIME type of the chosen file at an index. The MIME type is the standardised
Internet media type of the file contents. For example, this can be image/png for a PNG
image, image/jpeg for a JPEG image, or text/plain for a plaintext file. In Single select mode,
the index should always be 0, since only one file can be chosen.
FileURLAt(index)

The URL to access the local file's contents at an index. For more information see Using files
above. In Single select mode, the index should always be 0, since only one file can be chosen.

Page 599 of 1146

Construct 3 Official Manual

FILE SYSTEM
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/filesystem

The File System plugin allows read and write access to files and folders on the local system.
For a demonstration of using file system features, see the Text Editor example.

Browser/platform support
For the File System plugin features to work, the browser must support the full File System
Access API. (Note that Origin Private File System or OPFS is not used by the File System plugin.)
As of November 2024 this is only supported in Chrome and Edge (and most other Chromiumbased browsers) on desktop. Notably this means Firefox and Safari are not currently supported.
However it is also supported in the Windows WebView2, macOS WKWebView and Linux CEF
exporters. NW.js also supports all features except known folder tags like "<documents>" (see
below).
The macOS WKWebView export option is based on the Safari browser engine, but Construct
has extended it to support the File System plugin features even though the Safari browser
does not support the File System Access API. Therefore you can rely on File System plugin
features working in macOS WKWebView exports.

Browser permissions model
Browsers impose security restrictions to ensure that general web browsing is safe. Therefore
they start with no access to local files or folders at all. The only way to gain access to local files
and folders in a browser is to show a picker - a "save file" dialog, an "open file" dialog, or a "pick
folder" dialog.
Desktop exporters like Windows WebView2 are an exception to this rule and can have direct
access to certain special folders like the user's documents folder without any dialogs or
permission prompts - see below for more details. However in a browser, once the user has
successfully completed a picker by making a selection and clicking OK, then permission to
access the chosen files or folders is granted.
In browsers, pickers are also only allowed to be shown in a user input trigger, such as upon
clicking a button, or starting a touch. This is another security measure to ensure pickers
can't be shown at unexpected times, such as immediately upon loading the page.

Page 600 of 1146

Construct 3 Official Manual

In some circumstances browsers will also show a permission prompt to access a file. For
example choosing a file with an "open file" picker allows reading the file without any further
permission prompt, as the picker grants read access. However if later on an attempt is made to
write to the opened file, browsers will normally show a permission prompt to verify that the user
is willing to allow their previously chosen file to be modified. (This also only applies to browsers desktop exporters won't show permission prompts.)
To help avoid the need to keep showing pickers, Construct is also able to save the permission to
access previously chosen files and folders. The Has picker tag condition will be true if a picker
completed in a prior session and the same chosen files or folders can still be accessed.
Browsers may also show permission prompts when accessing files or folders from prior
sessions.

Picker tags and file tags
Tags are short pieces of text used to identify different uses of the same feature. The File System
plugin uses two kinds of tags. Picker tags identify different picker dialogs, such as two different
uses of an "open file" dialog. Each successfully completed picker grants access to the chosen
files or folders, which are then referred to by the picker tag.
Reading or writing a file then uses a file tag. This identifies the actual file system operation of
reading or writing to a chosen file or folder. The file tag is optional as it's only needed if you want
to track when file system operations complete or encounter an error - if you don't care about the
result, you can leave the file tag empty.
The reason two kinds of tags are used is because one picker may grant access to multiple files
or folders. For example one folder picker can grant access to a folder, in to which two files are
then written. In this case there is one picker tag identifying the folder the user chose, and then
two file tags identifying the separate write operations.
In summary picker tags are required in order to identify the files and folders the user chose, but
file tags are optional and are used to identify when reading or writing specific files or folders
completes or encounters an error.

Accessing known folders
In Windows WebView2, macOS WKWebView and Linux CEF exports, the browser permission
model can be bypassed to directly access folders such as the user's documents folder. This is
done by using pre-defined folder picker tags like "<documents>". These act like the folder was
already picked on startup. You can check if these are available on startup by using the Has picker
tag condition. If available then actions like Write text file can write to picker tag "<documents>"
folder path "test.txt", in order to write "text.txt" in the user's Documents folder, without showing
any picker dialog or permission prompts at all.
The full table of pre-defined picker tags for known folders is listed below. Note not all of these
are guaranteed to be available: a system may not have some types of folders, in which case Has
picker tag will be false even in a desktop export.

Page 601 of 1146

Construct 3 Official Manual

macOS App Sandbox
Note that in macOS WKWebView exports, if you enable the App Sandbox, then macOS creates a
container for your app. This effectively gives your app its own folders like 'Documents', 'Pictures'
and so on, inside a special app-specific path; the app won't actually access the folders the user
would normally see in Finder. This is a privacy measure to make sure a sandboxed app can only
access files saved by the same application, rather than being able to access all their files. When
the sandbox is enabled, you can enable read-only or read-write permission for the Pictures,
Movies and Downloads folder which provides access to the real folders shown in Finder.
Alternatively if you disable the sandbox then the app will access all the known folders normally,
with access to all the user's files.

Known folders table
Note the example paths shown in this table are for illustrative purposes only - the specific paths
accessed may be different depending on the username, and may be in entirely different locations
depending on the application install directory or system configuration.
Picker tag/platform Description/path
<app>
Folder main application executable belongs to.
Windows
C:\Program Files\My app
macOS
/path/to/executable
Linux
/path/to/executable
<web-resource>
The folder that contains web resource files such as index.html, typically in a www subfolder to the app folder.
Windows
C:\Program Files\My app\www
macOS
/path/to/executable/www
Linux
/path/to/executable/www
<current-app-data> The local app data folder for this specific application.
Windows
C:\Users\username\AppData\Local\myapp
macOS
/Users/username/Library/Application Support/com.myapp.id
Linux
/home/username/.local/share/com.myapp.id
<local-app-data>
The main system local app data folder for the current user.
Windows
C:\Users\username\AppData\Local
macOS
/Users/username/Library/Application Support
Linux
/home/username/.local/share
<roaming-app-data> The main system roaming app data folder for the current user.
Windows
C:\Users\username\AppData\Roaming
macOS
Not supported
Linux
Not supported
<desktop>
User's desktop folder.
Windows
C:\Users\username\Desktop
macOS
/Users/username/Desktop
Linux
/home/username/Desktop
<documents>
User's documents folder.
Windows
C:\Users\username\Documents
macOS
/Users/username/Documents
Linux
/home/username/Documents
<downloads>
User's downloads folder.
Windows
C:\Users\username\Downloads
macOS
/Users/username/Downloads
Linux
/home/username/Downloads
<pictures>
User's pictures/photos folder.
Windows
C:\Users\username\Pictures
macOS
/Users/username/Pictures
Linux
/home/username/Pictures
<profile>
Parent folder for all files and folders relating to the current user.
Windows
C:\Users\username
macOS
/Users/username
Linux
/home/username