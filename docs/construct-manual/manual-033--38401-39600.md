# Manual Construct 3  Parte 33 (líneas 3840139600)

## Resumen
- Set and get a string representing the current context for string lookups. (línea 9)
- pushContext(context) (línea 10)
- popContext() (línea 11)
- Push or pop to the context stack. When a string is pushed, it is used as the base for all (línea 13)
- relative context lookups. (línea 14)
- Consider using createContext() as a more convenient alternative API, as it saves you (línea 15)
- from having to remember to call popContext() . (línea 16)
- createContext(context) (línea 18)
- Return an I18NLookupContext representing the given context. This provides a convenient (línea 20)
- way to look up several strings relative to that context. See the section below for more details. (línea 21)
- lookup(context, ...args) (línea 22)
- lookupPlural(context, count, ...args) (línea 23)
- Look up a string at the given context, and substitute placeholders with the following (línea 25)
- arguments. The context may be relative if a context has been pushed. The plural variant also (línea 26)
- makes use of the count argument to select the appropriate plural variant for the current (línea 27)
- locale. See the Internationalization manual entry for more details on placeholders, relative (línea 28)
- contexts and pluralization. (línea 29)
- I18NLookupContext (línea 31)
- The createContext() method returns an I18NLookupContext which can be used for more (línea 32)
- conveniently looking up lots of strings from the same context. This works similarly to using (línea 33)

## Contenido

Construct 3 Official Manual

Set and get a string representing the current context for string lookups.
pushContext(context)
popContext()

Push or pop to the context stack. When a string is pushed, it is used as the base for all
relative context lookups.
Consider using createContext() as a more convenient alternative API, as it saves you
from having to remember to call popContext() .

createContext(context)

Return an I18NLookupContext representing the given context. This provides a convenient
way to look up several strings relative to that context. See the section below for more details.
lookup(context, ...args)
lookupPlural(context, count, ...args)

Look up a string at the given context, and substitute placeholders with the following
arguments. The context may be relative if a context has been pushed. The plural variant also
makes use of the count argument to select the appropriate plural variant for the current
locale. See the Internationalization manual entry for more details on placeholders, relative
contexts and pluralization.

I18NLookupContext
The createContext() method returns an I18NLookupContext which can be used for more
conveniently looking up lots of strings from the same context. This works similarly to using
pushContext() , but takes advantage of JavaScript's garbage collector to avoid having to need a
following call to popContext() . This makes it more convenient and less error-prone to use than
pushing and popping contexts. It's also uniquely available to the script interface, as Construct's
event system does not support allow a comparable API.
The code sample below demonstrates how it can be used.
const intl = runtime.objects.Internationalization;
// Normal lookup having to repeat the context
let string1 = intl.lookup("forest-world.chapter-1.intro-text.title");
let string2 = intl.lookup("forest-world.chapter-1.intro-text.message");
let string3 = intl.lookup("forest-world.chapter-1.intro-text.start");
// Shorter lookups using a context

Page 1084 of 1146

Construct 3 Official Manual

const ctx = intl.createContext("forest-world.chapter-1.intro-text");
string1 = ctx.lookup(".title");
string2 = ctx.lookup(".message");
string3 = ctx.lookup(".start");

I18NLookupContext APIs
lookup(context, ...args)
lookupPlural(context, count, ...args)

These methods are equivalent to those on the Internationalization script interface, but may
use contexts relative to the context this I18NLookupContext was created with.

createContext(context)

Create another I18NLookupContext for the given context, which must be relative. This allows
creating further I18NLookupContext objects for more deeply nested contexts.

Page 1085 of 1146

Construct 3 Official Manual

JSON SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/json

The IJSONInstance interface derives from IInstance to add APIs specific to the JSON plugin.
JSON can be conveniently modified from script alone, but this interface allows exchanging data
between event sheets and code.

JSON APIs
getJsonDataCopy()

Return a copy of the JSON data held in the object.
Note since this returns a copy of the data, changing the returned data will not affect the
contents of the JSON object.

setJsonDataCopy(o)

Set the JSON data held in the object.
Note this takes a copy of the data, so changing the provided data after this call will not
affect the contents of the JSON object.

The provided data is validated and will throw an exception if it's not valid JSON.

setJsonString(str)

Parses a string as JSON data and stores the result in the JSON object.
This will throw an exception if the string is not valid JSON.

toCompactString()
toBeautifiedString()

Return the contents of the JSON object converted to a string, either in compact form (which
is smaller and more efficient to store and send), or "beautified" (which uses line breaks and
indentation to make the result more readable).

Page 1086 of 1146

Construct 3 Official Manual

KEYBOARD SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/keyboard

The IKeyboardObjectType interface derives from IObjectClass to add APIs specific to the
Keyboard plugin.
Note this class derives from the object class interface, not the instance interface. Typically it is
used through runtime.keyboard instead of the named object.

Examples
See the Simple keyboard movement example for a basic demonstration of using the
isKeyDown() method to move a Sprite.

Events
To detect key press events, use the "keyup" and "keydown" events fired on the Runtime script
interface.

Keyboard APIs
isKeyDown(keyStringOrWhich)

Return a boolean indicating if the specified keyboard key is currently being held down. The
key can be specified either by its numeric code, corresponding to the KeyboardEvent.which
property, or a string identifying the physical key, corresponding to the KeyboardEvent.code
property (see also KeyboardEvent: code values).
Using numeric codes is now deprecated, so it's recommended to use a string for the key
instead.

Page 1087 of 1146

Construct 3 Official Manual

LIST SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/list

The IListInstance interface derives from IDOMInstance to add APIs specific to the List plugin.

List events
See instance event for standard instance event object properties.
"click"

Fired when the list is clicked.
"dblclick"

Fired when the list is double-clicked.
"selectionchange"

Fired when there is any change to the selected item or items.

List APIs
addItem(text)

Append a new item with the given text to the end of the list.
insertItem(index, text)

Insert a new item at a zero-based index in the list with the given text.
setItemText(index, text)

Set the item text at a zero-based index in the list.
getItemText(index)

Return a string of the current item text at a zero-based index in the list.
removeItem(index)

Delete an item at a zero-based index from the list.

Page 1088 of 1146

Construct 3 Official Manual

clear()

Remove all items from the list, leaving the list empty.
itemCount

A read-only number representing how many items are in the list.
selectedIndex

Set or get a number indicating the zero-based index of the currently-selected list item.
selectedCount

A read-only number with the number of selected items. This is usually only useful with multiselect lists.
getSelectedIndexAt(index)
getSelectedTextAt(index)

Return the item index or the item text of a selected item by its index up to selectedCount .
This is usually only useful with multi-select lists.
tooltip

A tooltip that appears if the user hovers the mouse over the list and waits. An empty string
indicates no tooltip.

Page 1089 of 1146

Construct 3 Official Manual

MOUSE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/mouse

The IMouseObjectType interface derives from IObjectClass to add APIs specific to the Mouse
plugin.
Note this class derives from the object class interface, not the instance interface. Typically it is
used through runtime.mouse instead of the named object.

Examples
The Shooting code example demonstrates pointing the player at the mouse cursor and shooting
bullets towards it.
The Tracking pointers example also demonstrates how both mouse and touch input can be
tracked simultaneously using pointer events.

Events
To detect mouse button events, use the events fired on the Runtime script interface, such as
"mousedown" or "pointerdown" .

Mouse APIs
getMouseX(layerNameOrIndex)
getMouseY(layerNameOrIndex)
getMousePosition(layerNameOrIndex)

Return the current position of the mouse cursor on a layer, given by a case-insensitive string
of its name or zero-based index. The parameter can be omitted for the default mouse
position, which does not take in to account any specific layer's transformations.
getMousePosition() returns both the X and Y position as [x, y] .

isMouseButtonDown(button)

Return a boolean indicating if the given mouse button is currently down. The button is
specified the same way as the MouseEvent.button property, i.e. 0 for left, 1 for middle, and 2
for right.
setCursorStyle(style)

Page 1090 of 1146

Construct 3 Official Manual

Set the appearance of the mouse cursor to a string of a CSS cursor style value, e.g.
"crosshair" . See cursor styles on MDN for some possible values.

setCursorObjectClass(objectClass)

Set the appearance of the mouse cursor to the current image of an IObjectClass. Various
limitations apply: the object image is used as it appears in the image editor, not taking in to
account size or rotation in the layout; the image cannot be too large (64x64 is usually the
limit); the cursor may not be applied close to the edges of the browser window; and support
varies depending on browser and OS. Some sample code for this method is shown below.
runtime.mouse.setCursorObjectClass(runtime.objects.Sprite);

Page 1091 of 1146

Construct 3 Official Manual

MULTIPLAYER SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/multiplayer

The IMultiplayerObjectType interface derives from IObjectClass to provide APIs specific to the
Multiplayer object.
Note this class derives from the object class interface, not the instance interface. Typically it is
accessed with runtime.objects.Multiplayer .
Designing multiplayer games is a complex topic. There is more documentation about the way
the Multiplayer object works in the Multiplayer object manual entry. There is further learning
material in the Online multiplayer in Construct tutorial series. This documentation covers only
the scripting APIs to access the various multiplayer features Construct provides.

API organisation
The multiplayer APIs broadly fall in to two categories:
1

Signalling APIs, which make use of the signalling server to meet other peers and establish
connections to them

2

The main multiplayer APIs, which are used for peer-to-peer communication once connections
have been established.

To clearly separate these usages, signalling APIs are available on a dedicated signalling interface
at runtime.objects.Multiplayer.signalling , whereas the remaining multiplayer APIs are
available on the main multiplayer interface at runtime.objects.Multiplayer .
There are also some statistics under runtime.objects.Multiplayer.stats , but usage of those is
optional.

Examples
See the Multiplayer scripting example for a demonstration of using these multiplayer APIs in
JavaScript code.

Signalling events
These events are fired on runtime.objects.Multiplayer.signalling .

"connected"

Triggered when a connection to the signalling server has successfully been established. The
event object includes the properties:
Page 1092 of 1146

Construct 3 Official Manual

myId : the peer ID assigned to the local user

serverVersion : a string with the signalling server software version

serverName : a string of the signalling server name

serverOperator : a string identifying the signalling server operator

serverMOTD : a "message of the day" string chosen by the server operator

"login"

Fired upon successfully logging in to the signalling server. The event object myAlias
property provides the alias assigned to the local user (which will be the alias requested,
unless the alias is already in use, in which case the signalling server will have assigned a
different alias derived from the requested one).
"join"

Fired upon successfully joining a room on the signalling server. The event object includes the
properties:
isHost : a boolean indicating whether the local user is the host of the room. The first

peer to join a room is assigned the host.
hostId : the peer ID of the room's host. This only needs to be referred to when isHost

is

false (since if the local user is the host, the host ID is their own peer ID).
hostAlias : the alias of the room's host.

room : a string of the room name that was joined. (This can only be different to the

requested room name when auto-joining a room.)
"leave"

Fired upon successfully leaving a room on the signalling server.
"disconnected"

Fired when lost connection to the signalling server.

Page 1093 of 1146

Construct 3 Official Manual

"kicked"

Fired when forcibly removed from the current room on the signalling server. This is similar to
the "leave" event, but the cause of leaving the room was server-initiated rather than peerinitiated.
"error"

Fired if an error occurs while using the signalling server. The event object message property
provides an error message (if any).

Signalling APIs
These methods are available on runtime.objects.Multiplayer.signalling .

addEventListener(eventName, callback)
removeEventListener(eventName, callback)

Add or remove a callback function for a signalling event. See Signalling events above for
more information.
async connect(url = "wss://multiplayer.construct.net")

Initiate a connection to a signalling server. The default URL is the official Scirra-hosted
signalling server. The method can be awaited and resolves at the same time the signalling
"connected" event fires, resolving with an object with the same properties as the event
object.
disconnect()

Disconnect from the signalling server. This can be done once peer-to-peer connections are
established if the signalling server is no longer necessary, but note that will prevent any new
peers from joining the game late.
isConnected

A read-only boolean indicating whether a connection to the signalling server is currently
active.
addICEServer(url, username, credential)

Add a custom Interactive Connectivity Establishment (ICE) server used by WebRTC to
establish connections between peers. These can include STUN and TURN servers. A
username and credential can also be optionally provided if the server requires them. This
method should be called on startup, before any connections are made.

Page 1094 of 1146

Construct 3 Official Manual

async login(alias)

Attempt to log in to the signalling server and request to use the provided alias. The method
can be awaited and resolves at the same time as the signalling "login" event, resolving
with an object with the same properties as the event object.
isLoggedIn

A boolean indicating whether the user is currently logged in on the signalling server.
async joinRoom(game, instance, room, maxPeers = 0)

Join a specific room in the given game instance. The player must be connected and logged
in to the signalling server. The first player to join a room becomes the host. maxPeers can be
used to limit the number of peers that join. Only the host's value is used. If the room is full,
subsequently joining peers will receive a "room full" error. The peer count includes the host,
so 2 is the minimum value, or it can be left as 0 to allow an unlimited number of peers to join.
The method can be awaited and resolves at the same time as the signalling "join" event,
resolving with an object with the same properties as the event object.
async autoJoinRoom(game, instance, room, maxPeers = 2, isLocking = true)

Join the first available room with the given game, instance and first room name. The player
must be connected and logged in to the signalling server. The first player to join a room
becomes the host. When rooms are full, the signalling server will create a new room. For
example if "myroom" is full, it will try "myroom2", "myroom3", etc. This effectively arranges all
joining peers in to games of a particular size. If isLocking is true, then the room is locked
when full. In that case late-joiners are not allowed; if left unlocked and a peer leaves after the
game starts, a newly joining peer may be added back to the game to top it up to maxPeers
again. This method works similarly to joinRoom() in that it can be awaited and resolves
when the "join" event fires.

async leaveRoom()

Request to leave the current room on the signalling server. This method can be awaited and
resolves at the same time the signalling "leave" event fires.

async requestGameInstanceList(game)

Request a list of active game instances within the given game. A promise is returned which
resolves when the response is received with an array of objects describing each game
instance, with the object properties:
name : the game instance name

peerCount : the total number of peers in that game instance

Page 1095 of 1146

Construct 3 Official Manual

async requestRoomList(game, instance, type = "all")

Request a list of active rooms within a given game instance. The returned rooms depends on
the type : "all" includes all rooms; "unlocked" includes only rooms which are unlocked;
and "available" includes only rooms which are available to join (unlocked and not full). A
promise is returned which resolves when the response is received with an array of objects
describing each room, with the object properties:
name : the room name

peerCount : the number of peers in the room

maxPeerCount : the maximum number of peers allowed in the room, or 0 for unlimited

state : the room state, one of "available" , "locked"

or "full" .

Multiplayer events
These events are fired on runtime.objects.Multiplayer .

"peerconnect"

Fired when a peer joins the same room. It also fires once per peer already in the room when
joining an existing room, including the host. The event object includes the properties:
peerId : the ID of the connected peer

peerAlias : the alias of the connected peer

"peerdisconnect"

Fired when an existing peer disconnects from the room. The event object includes the
properties:
peerId : the ID of the disconnected peer

peerAlias : the alias of the disconnected peer

leaveReason : a string with an optional reason provided for the peer disconnecting

"message"

Page 1096 of 1146

Construct 3 Official Manual

Fired when a message is received over the network. Note the order messages are received,
or whether a sent message is received at all, depends on the reliability mode chosen when
the message was originally sent. The event object includes the properties:
fromId : the ID of the peer the message was sent by

fromAlias : the alias of the peer the message was sent by

message : the content of the message. This is either a string, JSON data, or an

ArrayBuffer for binary content, depending on the type of the message sent.
transmissionMode : the transmission mode the message was sent with.

"kicked"

Fired if kicked from the current room. This can occur if the host quits, the connection to the
host could not be established, or the host otherwise decides to forcibly remove you from the
room. After this fires the player is no longer in the room and must re-join a room to be able to
participate in a game.

Multiplayer APIs
These methods and properties are available on runtime.objects.Multiplayer .

signalling

Provides the signalling interface - see Signalling APIs above.
stats

Provides the statistics interface - see Statistics APIs below.
isHost

A read-only boolean indicating if the current peer is the room host.
myId
myAlias

Read-only strings with the peer ID and alias of the local user.
hostId
hostAlias

Page 1097 of 1146

Construct 3 Official Manual

Read-only strings with the peer ID and alias of the room host (which will be the same as
myId and myAlias if isHost is true).

currentGame
currentGameInstance
currentRoom

Read-only strings identifying the current game, game instance, and room.
peerCount

Read-only number of connected peers, including the local user.
getAllPeers()

Return an array of IMultiplayerPeer representing every peer in the room, including the local
user. See Peer APIs below.
getPeerById(peerId)

Return a IMultiplayerPeer for a peer in the current room by their peer ID, or returns null if
they don't exist. See also Peer APIs below.
sendPeerMessage(peerId, message, transmissionMode = "o")

Send a message over the network to a peer in the same room identified by their peer ID. The
message can be a string, an object for JSON transmission (which must be convertible to a
string), or an ArrayBuffer for binary content. The transmission mode can be one of "o" for
reliable ordered, "r" for reliable unordered, or "u" for unreliable (see the Multiplayer object
documentation for more details about reliability modes). When received the "message"
event will be fired.
hostBroadcastMessage(fromId, message, transmissionMode = "o")

This is similar to sendPeerMessage() but can only be called by the host, and the provided
message will be sent to every other peer in the room. fromId can optionally be set to
another peer ID to make it appear that the message is from that peer, which is useful when
relaying messages through the host; if left empty it will use the host ID.
disconnectRoom()

Disconnects from any peers in the current room and also leaves the room on the signalling
server. If the current user is the room host, all other peers are kicked.
simulateLatency(latency, pdv, loss)

Page 1098 of 1146

Construct 3 Official Manual

Simulate latency, PDV and packet loss on all inbound and outbound messages. This can be
useful for making local testing more realistic, since unlike the Internet latency is effectively
non-existent. For local testing it is only necessary to simulate latency on the host, since that
guarantees every message in the game will have delay added; it is not necessary to also
simulate latency on the peers. The latency for an individual message is calculated as the
latency plus a random value from zero to the PDV. The packet loss indicates the chance an
unreliable message is lost entirely, or in the case of reliable messages that retransmission is
necessary and the latency is multiplied.

Peer APIs
The IMultiplayerPeer interface represents a connected peer in the same room. It is returned by
methods like getAllPeers() and getPeerById() .

id

The peer ID for this peer.
alias

The alias for this peer.
isHost

A boolean indicating if this peer is the room host.
isMe

A boolean indicating if this peer represents the local user.
latency
pdv

Get the measured latency and packet delay variation (PDV) on the network connection to this
peer. Note peers can only use this to get the stats for the host, since that is the only
connection they have, but the host can use it for any peer.
send(message, transmissionMode = "o")

This is a shorthand for calling sendPeerMessage() with this peer's ID.

Statistics APIs
These properties are available under runtime.objects.Multiplayer.stats .

inboundBandwidth

Page 1099 of 1146

Construct 3 Official Manual
inboundBandwidth
outboundBandwidth

Read-only numbers with the total estimated inbound and outbound bandwidth for all data
transmission over the network in bytes per second. When automatic data compression is in
use, this measures the compressed size of the data actually sent over the network.
inboundDecompressedBandwidth
outboundDecompressedBandwidth

Read-only numbers with the total estimated decompressed inbound and outbound
bandwidth for all data sent and received via the Multiplayer object in bytes per second. When
automatic data compression is in use, this measures the size of the decompressed
messages, which may be significantly larger than the data actually sent over the network.
inboundCount
outboundCount

Read-only numbers of the total number of separate inbound and outbound messages sent
and received. This includes internally-used messages for things like ping and
synchronisation; generally the bandwidth is the more practically useful statistic.

Page 1100 of 1146

Construct 3 Official Manual

PARTICLES SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/particles

The IParticlesInstance interface derives from IWorldInstance to add APIs specific to the
Particles plugin.

Particles APIs
isSpraying

A boolean indicating whether the object is actively emitting particles (when in Continuous
spray mode).
rate

Set or get the number of particles created per second.
In One-shot mode this property can be assigned immediately upon creation to adjust the
number of particles created, but once particles are already created assigning the value
will have no effect.

sprayCone

Set or get the angle in radians through which particles are fired.
initSpeed

Set or get the initial speed of particles in pixels per second.
initSize

Set or get the initial size of each particle in pixels.
initOpacity

Set or get the initial opacity of each particle, as a float from 0 to 1.
initXRandom
initYRandom

Set or get the range of random offsets to the particle's position on each axis.

Page 1101 of 1146

Construct 3 Official Manual

initSpeedRandom

Set or get the range of random offset to the particle's speed on creation.
initSizeRandom

Set or get the range of random offset to the particle's size on creation.
initGrowRate

Set or get the initial grow rate (change in size over time) for each particle, in pixels per
second. Zero will keep the same size over time, a positive value will increase the size of the
particle over time, and a negative value will shrink it over time.
initGrowRandom

Set or get the range of random offset to the particle's grow rate on creation.
acceleration

Set or get the acceleration of each particle, in pixels per second per second.
gravity

Set or get the downwards acceleration caused by gravity, in pixels per second per second.
lifeAngleRandom

Set or get an amount of random change to each particle's angle to apply during its lifetime, in
radians.
lifeSpeedRandom

Set or get an amount of random change to each particle's speed to apply during its lifetime,
in pixels per second.
lifeOpacityRandom

Set or get an amount of random change to each particle's opacity to apply during its lifetime,
in the range 0-1.
timeout

Set the time in seconds each particle can last before being destroyed when the Destroy
mode is Timeout.
setParticleObjectClass(iObjectClass)

Page 1102 of 1146

Construct 3 Official Manual

Call with an IObjectClass to set the Particles object to spawn instances of that object class
instead of drawing its own particles. Pass null to restore the default behavior of the
Particles object drawing its own particles. For more information see Advanced particle
effects in the Particles manual entry.
fastForward(time)

Skip ahead the particle effect by a time in seconds. For example fast-forwarding by 3
seconds will cause the Particles object to instantly spawn, move and destroy particles as if 3
seconds had gone by. This is useful for making sure particle effects appear ready
immediately, rather than taking a few seconds to move their particles out from the spawn
point.

Page 1103 of 1146

Construct 3 Official Manual

PROGRESS BAR SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/progress-bar

The IProgressBarInstance interface derives from IDOMInstance to add APIs specific to the
Progress Bar plugin.

Progress Bar events
See instance event for standard instance event object properties.
"click"

Fired when the progress bar is clicked.

Progress Bar APIs
progress

Set or get the current progress value, from 0 to the maximum.
maximum

Set or get the maximum progress value, at which the progress bar is shown full indicating a
completed operation.
setIndeterminate()

Set the progress bar in to an "indeterminate" state, intended to indicate that it is working, but
the progress is unknown.
In indeterminate mode the progress and maximum values are both set to 0.

tooltip

The string used as the tooltip for the progress bar.

Page 1104 of 1146

Construct 3 Official Manual

SHADOW LIGHT SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/shadow-light

The IShadowLightInstance interface derives from IWorldInstance to add APIs specific to the
Shadow Light plugin.

Shadow Light APIs
lightX
lightY

Set or get the position in the layout from which shadows are cast from.
Note that using IWorldInstance methods to set the object position will also update the
light position. However the Shadow Light object automatically positions itself in the
middle of the viewport in order to draw over the whole screen. Setting the object position
to set the light position in the middle of the viewport may conflict with its automatic
positioning, so setting these properties can be used as a more reliable way to guarantee
the light position is placed at the given location.

lightHeight

Set or get the height of the light, used with the shadow caster object heights to calculate the
length of shadow to cast. This property only has an effect if the light radius is 0, otherwise
shadows always extend offscreen.
shadowColor

Set or get the color of the shadows drawn by the light, as an array with 3 elements specifying
the red, green and blue components as floats in the 0-1 range.
tag

Set or get a string of the tag for this light. Combined with castFrom this allows using
multiple lights that cast shadows of different sets of objects.
castFrom

A string specifying which shadow caster objects to render shadows for from this object. The
possible values are:

Page 1105 of 1146

Construct 3 Official Manual

"all" : every shadow caster object will get a shadow rendered for this light.

"same-tag" : shadows will only be rendered for shadow casters with the same tag .

"different-tag" : shadows will only be rendered for shadow casters with a different
tag .

Page 1106 of 1146

Construct 3 Official Manual

SLIDER BAR SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/slider-bar

The ISliderBarInstance interface derives from IDOMInstance to add APIs specific to the Slider
Bar plugin.

Slider Bar events
See instance event for standard instance event object properties.
"click"

Fired when the control is clicked.
"change"

Fired when the user finishes changing the chosen value on the slider bar. Typically this only
fires when the user releases a mouse button or touch after moving the slider.
"input"

Fired repeatedly as the user changes the chosen value on the slider bar. Unlike the "change"
event this will reflect the current value of the slider as the user is still dragging it.

Slider Bar APIs
value

The current value represented by the slider bar.
minimum
maximum

The minimum and maximum values, defining the range of the slider bar.
step

The increment of possible values. For example if the step is 10, then the slider will jump in
units of 10 as it is moved, and only a multiple of 10 can be chosen as a value.
tooltip

Page 1107 of 1146

Construct 3 Official Manual

A tooltip that appears if the user hovers the mouse over the text box and waits. An empty
string indicates no tooltip.
isEnabled

A boolean indicating if the control is enabled or disabled.

Page 1108 of 1146

Construct 3 Official Manual

SPRITE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/sprite

The ISpriteInstance interface derives from IWorldInstance to add APIs specific to the Sprite
plugin.
Sprite object types also define a ISpriteObjectType interface which derives from IObjectClass
to add Sprite APIs that affect the object type, such as dynamic animations.

Sprite instance events
See instance event for standard instance event object properties.
"framechange"

Fired when the currently displayed animation frame changes during playback of an
animation. The event object has the additional properties:
animationName : a string of the name of the currently playing animation

animationFrame : a zero-based index with the animation frame number of the new frame

in its animation
"animationend"

Fired when playback of the current animation reaches the end. The event object has the
additional properties:
animationName : a string of the name of the animation that finished

Sprite instance APIs
animation

A reference to a IAnimation script interface representing the current animation, which can be
used to access additional details such as the frames in the animation.
setAnimation(name, from = "beginning")

Set the current animation by a string of its name (case-insensitive). If the animation name
does not exist, an exception will be thrown. from can be set to either "current-frame" to

Page 1109 of 1146

Construct 3 Official Manual

switch to the same frame index in the new animation, or "beginning" to rewind to the first
frame.
Note that if the animation being set is already playing, this method does nothing, even if
set to play from the beginning. If you intend to restart the animation, use
startAnimation("beginning") instead.

getAnimation(name)

Get an IAnimation for an animation in the Sprite object by a case-insensitive string of its
name. Returns null if no animation is found.

animationName

A read-only string of the current animation name. Use the setAnimation() method to
change the animation.
startAnimation(from = "current-frame")

Start playback of the current animation. from can be set to either "current-frame" to play
from the existing frame, or "beginning" to play from the first frame.

stopAnimation()

Stop playback of the current animation.
animationFrame

The zero-based index of the current animation frame.
animationFrameTag

A string of the current animation frame tag (which is an empty string when not set). If
assigned a new tag, and the current animation has multiple animation frames with the same
tag, then it will use the first one.
animationSpeed

The current animation playback speed, in animation frames per second.
animationRepeatToFrame

The zero-based index of the animation frame to rewind to when repeating an animation.
imageWidth

Page 1110 of 1146

Construct 3 Official Manual

imageHeight
getImageSize()

Read-only numbers indicating the size of the current animation frame's source image, in
pixels. The method allows getting both values at the same time.
getImagePointCount()

Return the number of image points on the current animation frame.
getImagePointX(nameOrIndex)
getImagePointY(nameOrIndex)
getImagePointZ(nameOrIndex)
getImagePoint(nameOrIndex)

Return the location of an image point on the current animation frame in layout co-ordinates.
The Z co-ordinate can be useful when using 3D mesh distortion. Image points are identified
either by a case-insensitive string of their name, or their index. Note image point 0 is the
origin, so index 1 is the first image point. If the image point is not found, this returns the
origin instead. The getImagePoint variant returns [x, y, z] .

getPolyPointCount()

Return the number of collision polygon points on the current animation frame.
getPolyPointX(index)
getPolyPointY(index)
getPolyPoint(index)

Return the location of a collision polygon point on the current animation frame in layout coordinates, by its zero-based index. The getPolyPoint variant returns [x, y] .
The first poly point is repeated again at the end (at the index getPolyPointCount() )
since it makes it easier to iterate through each edge of the collision polygon.

setSolidCollisionFilter(isInclusive, tags)

Enable or disable collisions with the Solid behavior according to tags. Specify tags using a
string of space-separated tag names. If isInclusive is true, collisions are only enabled with
solids that match any of the given tags; if no tags are specified, collisions are disabled with
all solids. If isInclusive is false, collisions are disabled with solids that match any of the
given tags; if no tags are specified, collisions are enabled for all solids (the default). See also
the tags property of ISolidBehaviorInstance.

Page 1111 of 1146

Construct 3 Official Manual

async replaceCurrentAnimationFrame(blob)

Replace the current animation frame image with the contents of a Blob representing an
image file such as a PNG image. The blob can be locally generated or retrieved from a URL,
for example:
// Loading an image from a URL
const response = await fetch(url);
const blob = await response.blob();
await spriteInst.replaceCurrentAnimationFrame(blob);

Sprite object type APIs
These ISpriteObjectType APIs are available on the object type class, e.g.
runtime.objects.MySprite , rather than instances. Note this means that any changes, such as to
the animations or animation frames, will affect all instances.
getAnimation(name)

Return an IAnimation representing the animation with the given name, or null if none
exists.
getAllAnimations()

Return an array of IAnimation representing all animations that the Sprite object type has.

addAnimation(animName)

Add a new animation with the given name and return an IAnimation representing it. The
name must be unique. The added animation will have a single transparent animation frame
sized 100x100.
removeAnimation(animName)

Remove an animation with the given name. An exception will be thrown if an animation with
the given name does not exist, or the specified animation is the last one, as Sprite objects
must have at least one animation.
addAnimationFrame(animName, where)

Add an animation frame to the animation with the specified name. The new frame will be
transparent and sized 100x100. The where parameter must be either a number for a zerobased index of where to insert the frame, and can be -1 to add to the end, or a string of an
animation frame tag to insert relative to. When adding an animation frame not at the end, it
is inserted just before the given frame. The method returns an IAnimationFrame representing
the added frame.

Page 1112 of 1146

Construct 3 Official Manual

removeAnimationFrame(animName, where)

Remove an animation frame from the animation with the specified name. The last frame
cannot be removed, as animations must have at least one frame. The where parameter
must be either a number for a zero-based index of where to remove a frame, and can be -1 to
remove from the end, or a string of an animation frame tag to remove.

Page 1113 of 1146

Construct 3 Official Manual

SPRITEFONT SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/spritefont

The ISpriteFontInstance interface derives from IWorldInstance to add APIs specific to the
Sprite font plugin.

SpriteFont APIs
text

The string currently displayed by the Sprite Font object.
typewriterText(str, duration)

Set the text over time by starting with an empty string and gradually adding characters until
the full text of str is written out, over a duration specified in seconds. Note modifying the
text property while text is being written out will cancel the effect.

typewriterFinish()

If text is being written out with the typewriterText() method, force it to finish immediately.

characterScale

The current text scale, defaulting to 1 for normal scale.
characterSpacing

The extra space in pixels to add horizontally between characters.
lineHeight

The extra space in pixels to add vertically between lines. 0 is the default size, negative values
make lines closer together, and positive values space lines out further apart.
horizontalAlign

A string specifying the horizontal alignment of the text within the object bounding box, which
must be one of "left" , "center" or "right" .

verticalAlign

Page 1114 of 1146

Construct 3 Official Manual

A string specifying the vertical alignment of the text within the object bounding box, which
must be one of "top" , "center" or "bottom" .

wordWrapMode

A string specifying the way to wrap text when it reaches the end of a line. This can be either
"word" to wrap entire space-separated words, "character" to wrap at any character, or
"cjk" to wrap at any character but with special handling for Chinese, Japanese and Korean
punctuation.
textWidth
textHeight
getTextSize()

Read-only values indicating the size of the actual text content within the Sprite Font object's
rectangle. The method allows getting both values at the same time.
hasTagAtPosition(tag, x, y)

Return a boolean indicating if there is text with a specific tag at the given position (case
insensitive). For example if the text has the BBcode Hello [tag=mytag]world[/tag] , then
testing if the tag "mytag" is at a given position return true if that position is over just the
part of the text that says "world", else false .

getTagAtPosition(x, y)

Look up the tag for a part of the text at a given position and return the tag if any, else return
an empty string if no tag is specified. For example if the text has the BBcode Hello
[tag=mytag]world[/tag] , then the tag at a position over the word "world" is "mytag", and the
tag at a position over the word "Hello" is "".
getTagCount(tag)
getTagPositionAndSize(tag, index)

Get the number of fragments, and the size and position of each fragment by its zero-based
index, for a given tag. Note that a single tag may be broken in to multiple fragments - see the
section Tagged range fragmentation in the Text object manual entry for more details (which
applies equally to SpriteFonts). The getTagPositionAndSize() method returns the position
and size as an object with the properties {x, y, width, height} .

Page 1115 of 1146

Construct 3 Official Manual

SVG PICTURE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/svg-picture

The ISVGPictureInstance interface derives from IWorldInstance to add APIs specific to the SVG
Picture plugin.

SVG Picture APIs
svgUrl

Get the path to the SVG image to display in the object.
This property can also be assigned, but updating the image is actually asynchronous, so
it is preferable to use setSvgUrl() which returns a promise.

async setSvgUrl(url)

Set the path to the SVG image to display in the object. Note that updating the image is
asynchronous, so this is an async method and can be awaited to ensure the image has been
updated.

Page 1116 of 1146

Construct 3 Official Manual

TEXT SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/text

The ITextInstance interface derives from IWorldInstance to add APIs specific to the Text
plugin.

Text APIs
text

The string currently displayed by the Text object.
typewriterText(str, duration)

Set the text over time by starting with an empty string and gradually adding characters until
the full text of str is written out, over a duration specified in seconds. Note modifying the
text property while text is being written out will cancel the effect.

typewriterFinish()

If text is being written out with the typewriterText() method, force it to finish immediately.

fontColor

An array with 3 elements specifying the red, green and blue color of the text, with color
values as floats in the 0-1 range.
Try not to confuse this with the IWorldInstance property colorRgb , which applies a
color tint to the overall appearance of the object.

fontFace

A string specifying the font used to display the text, e.g. "Arial".
isBold
isItalic

Booleans indicating whether the font face is displayed with bold or italic styles.
sizePt

Page 1117 of 1146

Construct 3 Official Manual

The size of the displayed text, in points (pt).
lineHeight

The extra space in pixels to add vertically between lines. 0 is the default size, negative values
make lines closer together, and positive values space lines out further apart.
horizontalAlign

A string specifying the horizontal alignment of the text within the object bounding box, which
must be one of "left" , "center" or "right" .

verticalAlign

A string specifying the vertical alignment of the text within the object bounding box, which
must be one of "top" , "center" or "bottom" .

readAloud

A boolean indicating whether the contents of the text object will be read aloud by screen
reader software. See the Read aloud property of the Text object for more details.