# Manual Construct 3  Parte 21 (líneas 2400125200)

## Resumen
- Create an Admob account - see: Sign up for AdMob (línea 9)
- Create an application on your Admob account - see: Set up an app in Admob (línea 13)
- Create ad units for your application - see: Ad units (línea 17)
- Copy your application IDs and paste them to the Mobile Advert Android Application ID and iOS (línea 21)
- Application ID properties. Finding your Application IDs (línea 22)
- Submit your business and payment details to your AdMob account and wait for them to verify (línea 26)
- Getting started with web adverts (línea 29)
- Follow these steps to quickly get started with adverts on web exports: (línea 30)
- You will need a website which is whitelisted to show these type of ads (línea 37)
- Visit the Sites options in the left hand side menu of your Adsense account (línea 46)
- Find the Add site button and click it to start adding your website (línea 50)
- Follow the steps to add your website (línea 54)
- You will need to modify the root of your website by adding a small script to it (línea 58)
- Request a review (línea 62)
- After sometime, hopefully your website will be approved and your game will be able to show ads. (línea 64)
- Considerations for web adverts (línea 66)
- You will need to have your website be a real one, that means that it should have real content and (línea 69)
- generally speaking look like it is serving a purpose. If you just setup a test website with no (línea 70)
- content, it is less likely it will be approved. (línea 71)
- Since the parent website your game will be hosted in needs to be whitelisted so the game can (línea 75)

## Contenido

1

Create an Admob account - see: Sign up for AdMob

2

Create an application on your Admob account - see: Set up an app in Admob

3

Create ad units for your application - see: Ad units

4

Copy your application IDs and paste them to the Mobile Advert Android Application ID and iOS
Application ID properties. Finding your Application IDs

5

Submit your business and payment details to your AdMob account and wait for them to verify
(which may take 24 hours). This must be done before ads can be served.

Getting started with web adverts
Follow these steps to quickly get started with adverts on web exports:
1

Sign up for an Adsense account if you already don't have one

2

You will need a website which is whitelisted to show these type of ads

3

Fill in this form to indicate interest in using Google's Ad Placement API

How do I get my site whitelisted?
1

Visit the Sites options in the left hand side menu of your Adsense account

2

Find the Add site button and click it to start adding your website

3

Follow the steps to add your website

4

You will need to modify the root of your website by adding a small script to it

5

Request a review

After sometime, hopefully your website will be approved and your game will be able to show ads.

Considerations for web adverts
1

You will need to have your website be a real one, that means that it should have real content and
generally speaking look like it is serving a purpose. If you just setup a test website with no
content, it is less likely it will be approved.

2

Since the parent website your game will be hosted in needs to be whitelisted so the game can
show ads, the ideal use case is you have control of the hosting website.

3

If a game is shown in a cross origin iframe, it won't be allowed to show ads.

User Consent (Mobile exports only)
In order for the Show User Consent Dialog action to show GDPR consent forms and IDFA
messages (iOS only), it is required to set them up in your Admob account.

GDPR message

Page 694 of 1146

Construct 3 Official Manual

Follow this guide to Create a GDPR message

IDFA message
Follow this guide to Create an IDFA message
IDFA messages are not strictly necessary, but they can help in getting consent from the user
by making the purpose of the dialog clearer.

If you have an IDFA message set up and the application is opened by a device in the EEA or
UK, the App Tracking Transparency dialog will be shown immediately after the EU consent
form. This is how the underlying SDK works and it is mentioned in Google's own quick start
guide.
However, if you disable your IDFA message or don't have one at all, then the App Tracking
Transparency dialog won't be shown automatically and you will be able to control when it
appears by using the Request IDFA action.

Note when you first set up your account and submit your business/payment details, it can
take up to 24 hours to complete verification. Wait for this to complete before trying to test
your adverts, since it may fail to work until verification has completed.

Mobile exports required properties
If you intend to show ads in mobile exports, either Android or iOS, you will need to specify your
application IDs on the Mobile Advert object. Without these values the plugin will not be able to
start.

Web exports required properties
If you intend to show ads in a web export, you will need to specify your publisher ID in the Mobile
Advert object. Without that value, the plugin will not be able to show web adverts.
That's all the configuration you need for now. You can create new applications and edit your
advert units later if you need.

Initialization
The plugin will automatically initialize when the app starts. However this may involve showing a
user consent prompt to the user for regulatory reasons, depending on the user's region.
Therefore you should wait for the On configuration complete trigger to fire before attempting to
create or show any ads. You should also use the On configuration failed trigger, and perhaps the
Is configured condition, to check if configuration failed for any reason, such as being on an
invalid platform or one of your properties being incorrect.
Page 695 of 1146

Construct 3 Official Manual

Don't want to show the user consent dialog at startup? By default users in the EEA & UK
(European Economic Area and United Kingdom) will see the user consent dialog before your
title screen the first time they start the game. If you don't want this to happen then uncheck
the property Show on startup. Then use the Show user consent dialog action to show the
dialog at a time of your choosing.

Using IDFA on iOS
As of iOS 14+, the identifier for advertisers or IDFA is no longer available to apps by default. This
can affect the performance of ads. To use the IDFA, you must prompt the user for permission to
access it with the Request IDFA action. You may also wish to do this on startup. The On IDFA
request complete trigger fires when the user makes a decision, and the IDFAStatus expression
indicates the outcome.
Requesting the IDFA requires using Xcode 12+ with iOS 14+.

Currently no prompt is required on Android, so the Request IDFA action will immediately
trigger On IDFA request complete with an IDFAStatus of "not-determined".

The App Tracking Transparency framework on iOS
In order to support the Request IDFA action, the Mobile Advert plugin includes an iOS library
called App Tracking Transparency. To comply with Apple's App Store review process you may be
required to indicate to the reviewers where your app uses the IDFA prompt. Therefore you may
be required to add the Request IDFA action somewhere in your project. You do not have to
always request it on startup - it could for example be a setting in a menu, and then you indicate
to the App Store reviewers where to find the option.

Advert Loading
Adverts need to load over the network before you can use them. When creating an advert you
can choose to "show" the advert immediately after it has loaded. However if it's more suitable for
your game you can choose to load your advert ahead of time by creating the advert, but not
showing it, then later displaying the advert when you need it. This will prevent your user
experiencing a lag while the advert loads. Be sure to check your advert has actually loaded
before trying to display it, loading times for rewarded adverts in particular can be quite long. It's
also worth remembering that you are not guaranteed to receive an advert when you request one,
so take that into account when you are making your events.

Banner Advert Sizes

Page 696 of 1146

Construct 3 Official Manual

To display a banner advert you must specify a size for it, generally smart portrait/landscape will
work for most situations but here are the specifiable sizes. Using a size that is larger than the
display will prevent it from loading. Smart banner will vary in height depending on the available
screen height. With a smart banner if the base image isn't wide enough to fill the screen black
bars are displayed on either side.
Smart portrait

Screen width x 32/50/90
Smart landscape

Screen width x 32/50/90
Standard

320 x 50
Large

320 x 100
Medium

300 x 250
Full (tablet only)

468 x 60
Leaderboard (tablet only)

728 x 90

All banner sizes are in device pixels. That means that a banner will have an actual size
according to the pixel density of the device it is being shown in.

Mobile Advert Properties
Testing mode

Changes the displayed adverts units to testing adverts. Should be used during development.
(Mobile & Web exports)
Android application ID

Page 697 of 1146

Construct 3 Official Manual

The Admob application ID for the Android version of your game. This has the format "ca-apppub-0000000000000000~0000000000". On Android this value is required, and your
application will fail to start unless it is provided and correct. Find your app ID (Mobile
exports only)
iOS application ID

The Admob application ID for the iOS version of your game. This has the format "ca-app-pub0000000000000000~0000000000". On iOS this value is required, and your application will
fail to start unless it is provided and correct. Find your app ID (Mobile exports only)
Spoof location (debug)

Fakes the device location to allow testing the user consent dialog in different scenarios.
Testing mode must be enabled for this to work. (Mobile exports only)
Show on start up

Choose wether to show the consent form automatically on startup or not. This option
doesn't do anything in web exports. (Mobile exports only)
Publisher ID

Adsense publisher ID, found in your Adsense account. This is required if you intend to show
adverts in a web export. Find your publisher ID (Web exports only)

Test Ads
It is important that when you're developing and testing your application you use test adverts.
Viewing real adverts during your testing may result in your Admob account being suspended
or closed! Testing mode can be enabled by setting the Testing mode property on the plugin.
Testing mode is enabled by default so remember to turn it off when you publish your game!

GDPR Consent Form in Testing Mode
When Testing mode is enabled, the GDPR consent form will be shown every time the
application starts, regardless of previous choices. When you are ready to deploy, disable

Page 698 of 1146

Construct 3 Official Manual

Testing mode so the form can behave normally and only be shown the first time the
application is executed after installing it.

Spoof location
Unfortunately at the moment it is not possible to use this feature in a real device with iOS
version 14 or greater. This is because to enable the feature, it is necessary to have access to
the IDFA beforehand, which is not possible without first showing the App Tracking
Transparency dialog. Since the dialog can only be shown one time, enabling the feature
makes it impossible to later test how the application would behave upon first installing it.
The feature can still be used in a simulator though.

Ads in preview
When previewing a project the application will behave as a web export, so it will show test
ads as if it was a web export. Additionally it will simulate frequency capping, alternating
between a valid ad request and an invalid ad request.

Differences between mobile and web adverts
Ad units
If you only want to show web ads, it is not necessary to provide ad units in your actions, the field
can be left blank. If you are planning to use the same project for web and mobile though, you will
still need to provide them.

Rewarded ads
There is a slight difference between rewarded ads in mobile and rewarded ads in web that
should be considered.
In mobile when the ad is viewed you can use the RewardType and RewardValue expression to
get information about the reward and this information is set in your Admob account through the
ad unit.
In a web export, because you don't use ad units, the rewarded ads will always return the value
"Reward" for the RewardType expression and the value of "1" for the RewardValue expression.

Page 699 of 1146

Construct 3 Official Manual

For this reason it is recommended to use the Platform Info plugin to decide what to do after a
rewarded ad is viewed, depending on what platform the game is running on.

Mobile Advert Conditions
On Banner Ready

Triggers when a banner advert has loaded.
On Interstitial Ready

Triggers when a interstitial advert has loaded.
On Rewarded Ready

Triggers when a rewarded advert has loaded.
On Rewarded Interstitial Ready

Triggers when a rewarded interstitial advert has loaded.
On Banner Failed to Load

Triggers when a banner advert fails to load.
On Interstitial Failed to Load

Triggers when a interstitial advert fails to load.
On Rewarded Failed to Load

Triggers when a rewarded advert fails to load.
On Rewarded Interstitial Failed to Load

Triggers when a rewarded interstitial advert fails to load.
On Banner Shown

Triggers when a banner advert has been displayed.
On Interstitial Complete

Triggers when a interstitial advert has closed.
On Rewarded Complete

Page 700 of 1146

Construct 3 Official Manual

Triggers when a rewarded advert has closed, and the user has been rewarded.
On Rewarded Interstitial Complete

Triggers when a rewarded interstitial advert has closed, and the user has been rewarded.
On Banner Hidden

Triggers when a banner advert has been hidden.
On Interstitial Cancelled

Triggers when a interstitial advert has been cancelled.
On Rewarded Cancelled

Triggers when a rewarded advert has been cancelled.
On Rewarded Interstitial Cancelled

Triggers when a rewarded interstitial advert has been cancelled.
On Configuration Complete

Triggers when the application ID has been successfully set.
On Configuration Failed

Triggers when the application ID failed to be set.
On IDFA request complete

Triggered after the Request IDFA action once the user has made a decision. The outcome of
their decision is reflected in the IDFAStatus expression.
Is Configured

True if the plugin has been succesfully configured.
Is Showing Banner

True if a banner advert is being shown.
Is Showing Interstitial

True if a interstitial advert is being shown.

Page 701 of 1146

Construct 3 Official Manual

Is Showing Rewarded

True if a rewarded advert is being shown.
Is Showing Rewarded Interstitial

True if a rewarded interstitial advert is being shown.
Is Banner Loaded

True if a banner advert is ready to be shown.
Is Interstitial Loaded

True if a interstitial advert is ready to be shown.
Is Rewarded Loaded

True if a rewarded advert is ready to be shown.
Is Rewarded Interstitial Loaded

True if a rewarded interstitial advert is ready to be shown.
Is in EEA or unknown

True if the SDK consider the device to be inside the EEA or is unable to detect the location.
As it is a requirement to show the dialog inside the EEA "unknown" is considered effectively
the same as being in the EEA. In web exports this condition always evaluates to "true".

Mobile Advert Actions
Create Banner

Create a banner advert with a AdMob advert unit ID and size. Optionally show when loaded.
Only one banner may be created at a time. If the reload parameter is set to true an existing
banner will be reloaded with the new settings. Setting overlap to true causes the banner to
overlap the main Webview, If false the main Webview will be resized so both it and the
banner fit in the screen without overlapping. In the case of setting overlap to true the offset
parameter can be used to specify an amount by which the banner should be offset from it's
initial position.
Create Rewarded

Create a rewarded advert with a AdMob advert unit ID. Optionally show when loaded. Only
one rewarded advert may be created at a time.

Page 702 of 1146

Construct 3 Official Manual

Create Interstitial

Create a interstitial advert with a AdMob advert unit ID. Optionally show when loaded. Only
one interstitial may be created at a time.
Create Rewarded Interstitial

Create a rewarded interstitial advert with a AdMob advert unit ID. Optionally show when
loaded. Only one rewarded interstitial may be created at a time.
Show User Consent Dialog

Shows the modal user consent dialog
Show Banner

Show a loaded banner advert. Will only display if there is a loaded banner ready.
Show Rewarded

Show a loaded rewarded advert. Will only display if there is a loaded video ready.
Show Interstitial

Show a loaded interstitial advert. Will only display if there is a loaded interstitial ready.
Show Rewarded Interstitial

Show a loaded rewarded interstitial advert. Will only display if there is a loaded rewarded
interstitial ready.
Hide Banner

Hide an active banner advert (destroys the advert). Does nothing if no banner is available.
Request IDFA

Prompt the user for permission to use the identifier for advertisers (IDFA). When the user
makes a decision, On IDFA request complete triggers, and the outcome is indicated in the
IDFAStatus expression. See the section on using the IDFA above.
Set Max Advert Content Rating

Filter the viewed adverts based on the digital content label classifications for various age
groups. This action is not supported in web exports.
Tag For Child Directed Treatment

Page 703 of 1146

Construct 3 Official Manual

Request advert content that is child-directed for the purposes of the Children's Online Privacy
Protection Act (COPPA). This action is not supported in web exports.
Tag for under age of consent

Indicate the user should be treated as under the age of consent as per the restrictions in the
European Economic Area(EEA) General Data Protection Act(GDPR). This action is not
supported in web exports.

Mobile Advert Expressions
ErrorMessage

When in a failure condition, an error message related to it.
RewardType

When in a On Rewarded Complete condition, the type of the related reward. In web exports
this expression always returns the value "Reward".
RewardValue

When in a On Rewarded Complete condition, the value of the related reward. In web exports
this expression always returns the value "1".
RewardInterstitialType

When in a On Rewarded Interstitial Complete condition, the type of the related reward. In
web exports this expression always returns the value "Reward".
RewardInterstitialValue

When in a On Rewarded Interstitial Complete condition, the value of the related reward. In
web exports this expression always returns the value "1".
ConsentStatus

The current user consent status as a string, can take the values of: UNKNOWN,
NOT_REQUIRED, REQUIRED or OBTAINED. In web exports this expression always return the
UNKNOWN value.
IDFAStatus

Indicates the outcome of requesting to use the IDFA. If no request has been made this
defaults to "not-determined". After a request it is either "authorized" or "denied" depending on

Page 704 of 1146

Construct 3 Official Manual

the choice the user made. In web exports this expression always return the "not-determined"
value.

Page 705 of 1146

Construct 3 Official Manual

MOBILE IAP
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/mobile-iap

The Mobile IAP plugin allows a game to use consumable and non-consumable in app
purchases (IAP) on Android and iOS.
IAP can only be used in Android or iOS apps. IAP will not work in local preview, remote
preview, or with any export option other than Android or iOS.

Consumable vs Non-consumable
Non-consumable purchases can be bought once per user. A good use for this type of purchase
is to distribute your game for free but with the majority of the content locked from the user. To
unlock the rest of the content the user can purchase a premium upgrade. The plugin keeps track
of these types of purchases for you across multiple user devices.
Consumable purchases can be bought multiple times by each user. A good use for this type of
purchase is to enable a timed bonus or virtual currency. You need to keep track of these types of
purchase yourself.

Setup
Before adding purchases to you game you will need to set up your application on Google Play
and/or the App Store.
To register an app on Google Play visit https://play.google.com/apps/publish. To enable in app
purchases you will also need to setup a Google payments merchants account at
http://www.google.com/wallet/merchants.html.
To register an app on the App Store visit https://itunesconnect.apple.com/login

Registration stage
When making IAP events, the first thing you need to do is to complete the plugin's registration
stage. You won't be able to make any purchases or check if a user owns a product until this is
done. For each product you have you must call the Add Product ID action with the product ID and
type (consumable or non-consumable). To finish registration you must call the Complete Product
Registration action. If registration succeeds then On Registration Success triggers. After this you
are free to check the state of products and make purchases.

Page 706 of 1146

Construct 3 Official Manual

Owned products may appear as "available" instead of "owned" in the "On Registration
Success" trigger, but will resolve soon afterwards. So it's worth loading store logic before
you need it. You can use the "On product owned" trigger to observe when a product becomes
owned.
You only need to register the products once per session. Using the Add product ID or Complete
product registration actions after calling registration will have no effect.

Displaying products
When offering a product to a user it is important to first ensure that it is available for purchase,
otherwise the user will not be able to purchase it. A product may not be available if it is already
owned, is invalid, has been flagged as unavailable by the store or (if consumable) is in the
process of being purchased. This plugin also includes expression to get the name and
description of a product from the store. It's important that your application uses these where
appropriate rather than text that you have included in your application, as the app store is known
to reject applications that don't follow this rule.

Keeping track of purchases
It's important to consider how you're going to keep track of user purchases before you start
adding IAP events. Non-consumable purchases are tracked by the app stores, so you can easily
find out if the user owns it. However, consumable products are a bit more tricky. The app stores
don't track these, so you need to store information about these yourself. Initially it may seem
appealing to store this information in Local Storage or similar, and while this works quite well for
local testing it has a big issue: synchronization. If a user shares their account across multiple
devices only the device that performed the purchase will know of it. This is also a pretty big
issue if they move to a new device or reinstall your game, as they will lose content they have
paid for and this tends to upset users. So best practice is to store this information in a remote
database somewhere, that you can connect to from your game to check the purchases a user
has made.
Exactly how you set this up very much depends on the game you are making and if you are
offering a short timed bonus you may not even need a database. A simple setup would be a
single number representing a user's balance of "magic gems" or similar. With a more
complicated game you may choose to store the entire game state on the server; the world,
balance of virtual currency, purchases of virtual goods made with virtual currency and purchases
of virtual currency with real currency. A complete setup like this has the bonus of a user not
losing virtual goods when moving device, and being able to play the game on multiple devices,
but does increase your network dependence.

Testing
Both the app store and the play store offer mechanisms for testing purchases without spending
real money. You should use these to confirm that your products have been correctly configured,
Page 707 of 1146

Construct 3 Official Manual

and that your purchase flow works correctly for successful and unsuccessful purchases as well
as checking ownership on subsequent runs of your application. While the plugin unifies
purchases for iOS and Android there are subtle differences in timings and product behaviour that
you may experience. These timing differences can upset your purchase flow, so it's important to
check any timing assumptions you make for one platform hold for the other.

Trigger order
Here are the sequence that triggers fire in for various scenarios.

Product not owned
On startup:
1

On registration success

2

On product available

On performing a successful purchase:
1

On purchase success

2

On transaction finished

3

On product owned

On performing a failed purchase:
1

On purchase failed

Product already owned
On startup:
1

On registration success

2

On product owned

IAP properties
Validator URL

Optional URL of a receipt validation service to verify in-app purchases with. This is for
advanced users to implement a server to ensure purchases are valid. The URL is passed to
the underlying cordova-plugin-purchase ; refer to the Cordova plugin documentation on
store.validator for technical details on how to set up or implement a validation service.

IAP conditions
On Purchase Success

Page 708 of 1146

Construct 3 Official Manual

Triggers when a specific product purchase succeeds.
On Any Purchase Success

Triggers when any product purchase succeeds.
On Purchase Failed

Triggers when a specific product purchase fails.
On Any Purchase Failed

Triggers when a any product purchase fails.
On Registration Success

Triggers when registration has been completed (after the Complete registration action). This
is a good time to check if a product is owned. You should wait for this trigger before
attempting any purchases.
On Registration Failure

Triggers when registration failed. If this occurs then you won't be able to make any
purchases.
On Product Available

Triggers when a specific product becomes available to purchase.
On Any Product Available

Triggers when any product becomes available to purchase.
On Product Owned

Triggers when a specific product becomes owned. This triggers both after a first purchase
for it, and on startup when the product was previously purchased, allowing easily identifying
if the purchased product can be made use of.
On Any Product Owned

Triggers when any product becomes owned.
Product Owned

True if the current user owns the product.

Page 709 of 1146

Construct 3 Official Manual

Product Available

True if the current user can purchase the product.
Store Registered

True if the registration stage successfully completed.
On transaction finished

Triggered when the store transaction for a purchase has finished. The transaction ID is
available in the TransactionID expression.

IAP Actions
Add product ID

Add a new product to the plugin by specifying the ID and type (consumable or nonconsumable). This can only be called in the registration stage.
Complete product Registration

Ends the registration stage. After this has been called you will no longer be able to register
products. This must be called before you can purchase products. On registration success will
trigger if successful.
Restore Purchases

Restores user purchases. This is not necessary on Android.
Purchase Product

Triggers the purchase of a product with a specific ID. This product must be available to
purchase. On Purchase Success/Failed will trigger depending on the outcome of the
purchase. If the purchase is successful, On product owned will also trigger, as well as on
startup in future sessions while the product is still owned.

IAP Expressions
ProductName(ProductID)

Get the name of a product from its ID. This is the localized name provided by the store, you
should use it instead of a hard-coded string.
ProductPrice(ProductID)

Page 710 of 1146

Construct 3 Official Manual

Get the price of a product from its ID. This is the localized value provided by the store, you
should use it instead of a hard-coded value.
ProductDescription(ProductID)

The description of a product from its ID. This is the localized string provided by the store, you
should use it instead of a hard-coded string.
ProductID

The ID of the current product in a trigger.
TransactionID

In On transaction finished, the ID of the transaction that finished, using the ID provided by the
store.
ErrorMessage

In an error trigger, the relevant error message, if any.

Page 711 of 1146

Construct 3 Official Manual

MOUSE
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/mouse

The Mouse object allows projects to respond to mouse input.
When designing your project, you cannot assume everyone has a mouse. Many users browse
the web with touch-screen devices that have no mouse. Therefore if your project uses
exclusively mouse or keyboard control, it may be impossible to use on touch devices. See the
Touch controls tutorial for an alternative control system.
If you only use left clicks, consider instead using the Touch object with Use Mouse Input enabled.
This will allow your project to work on touchscreen devices without any further changes.

Mouse hardware buttons
Most modern mouse hardware has three buttons: left, middle and right. The middle button
usually is also a scroll wheel that allows more conveniently scrolling up and down (and can be
detected in Construct with the On mouse wheel trigger). However some specialist devices have
an additional two buttons, named simply button 4 and button 5, which are usually positioned on
the side of the device (but some hardware may differ). You can also detect these buttons with
the Mouse object, but note that not all users will have those buttons on their mouse hardware.
You could use the additional buttons to provide shortcuts which can be achieved another way,
such as with key presses, but you should avoid using them for unique features that cannot be
accessed any other way.

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IMouseObjectType script interface.

Mouse conditions
Cursor is over object

True if the mouse cursor is hovering over an object.
Mouse button is down

True if a given mouse button is currently being held down.
On any click

Triggered when any mouse button is clicked. This can be useful for title screens or cutscenes where any input will continue to the next step.
Page 712 of 1146

Construct 3 Official Manual

On button released

Triggered when a given mouse button is released.
On click

Triggered when a given mouse button is pressed. This can also be used to detect doubleclicks.
Double-clicks only support the primary (left) mouse button.

On mouse wheel

Triggered when the mouse wheel is scrolled up or down a notch. Choose any to detect the
mouse wheel being scrolled in either direction; in this case the WheelDeltaX/Y/Z expressions
are useful to determine the direction and magnitude of the scroll.
Some non-mouse devices, like laptop trackpads, can also fire wheel events. These inputs
can have different behavior to mouse wheels, such as momentum-based scrolling with
slowly reducing delta values.

On object clicked

Triggered when a given mouse button is pressed while the mouse cursor is over an object.
This can also be used to detect double-clicks on objects.
Has pointer lock

True if pointer lock is currently active, i.e. after On pointer locked triggered.
On movement

Triggered every time the mouse moves, or any touch input moves. The MovementX and
MovementY expressions provide the amount of movement. This can be used without pointer
lock, but mouse movement will still be limited by the boundaries of the window or screen.
Since this trigger also works with touch input, it means movement input also works with
touch input on mobile devices. Usage with touch input does not require pointer lock, since
that only affects the mouse cursor.
When using On movement for 3D camera mouse look, the support for touch input also
means that the view can be rotated by touch input on mobile.

On pointer locked

Page 713 of 1146

Construct 3 Official Manual

Triggered when the pointer is successfully locked after the Request pointer lock action. The
mouse cursor will disappear and only mouse movement values will be available via the On
movement trigger.
On pointer unlocked

Triggered when pointer lock is released, restoring the normal mouse cursor behavior. This
can happen either by the Release pointer lock action, or at any time if the user manually exits
pointer lock, such as by pressing Escape.
On pointer lock error

Triggered if an error occurs attempting to use pointer lock, such as attempting to acquire
pointer lock when security restrictions disallow it.

Mouse actions
Set cursor from sprite

Set the cursor image from a Sprite object. This is preferable to setting a sprite to the mouse
co-ordinates, because the input lag is significantly lower. Various limitations apply: the sprite
image is used as it appears in the image editor, not taking in to account size or rotation in the
layout; the image cannot be too large (64x64 is usually the limit); the cursor may not be
applied close to the edges of the browser window; and support varies depending on browser
and OS.
Set cursor style

Set the type of mouse cursor showing. The cursor can be hidden completely by choosing
None.
Request pointer lock

Request to acquire pointer lock, which hides the mouse cursor and only reports mouse
movement values via the On movement trigger and MovementX and MovementY
expressions. This allows continuous input without the boundaries of the window or screen
stopping movement. This type of input is useful for "mouse look" with the 3D Camera object
(see First-person platformer for an example). Normally this can only be used in a user input
trigger, such as On click. On pointer locked is triggered if the request is successful, but the
request may be denied, for example due to security restrictions, in which case On pointer lock
error will trigger. Also note the user can also exit pointer lock at any time, triggering On
pointer unlocked. The Unadjusted movement parameter can be checked to disable system
adjustments to the mouse movement, such as acceleration, instead accessing the raw
mouse input.
Release pointer lock

Page 714 of 1146

Construct 3 Official Manual

If pointer lock is active, this ends pointer lock and restores the normal mouse cursor
behavior.

Mouse expressions
AbsoluteX
AbsoluteY

Return the position of the mouse cursor over the canvas area in the page. This is (0, 0) at the
top left of the canvas and goes up to the window size. It is not affected by any scrolling or
scaling in the project.
X
Y

Return the position of the mouse cursor in layout co-ordinates. This is (0, 0) at the top left of
the layout. It changes to reflect scrolling and scaling. However, if an individual layer has been
scrolled, scaled or rotated, these expressions do not take that in to account - for that case,
use the layer versions below.
X(layer)
Y(layer)

Return the position of the mouse cursor in layer co-ordinates, with scrolling, scaling and
rotation taken in to account for the given layer. The layer can be identified either by a string
of its name or its zero-based index, e.g. Mouse.X("HUD") .

WheelDeltaX
WheelDeltaY
WheelDeltaZ

In On mouse wheel, these values provide the direction and magnitude of the wheel
movement. Typically this will alter WheelDeltaY representing vertical movement, with the
value being positive or negative depending on whether it is up or down movement. The
magnitude can also vary depending on the speed of the movement, the system settings, and
the type of device. The other values support other kind of hardware devices, such as an
additional horizontal scrolling wheel on some mouse devices, or pan scrolling on a laptop
trackpad.
MovementX
MovementY

In the trigger On movement, these values provide the amount of horizontal and vertical
movement.

Page 715 of 1146

Construct 3 Official Manual

MULTIPLAYER
View online: https://www.construct.net/en/make-games/manuals/construct-3/plugin-reference/multiplayer

The Multiplayer object provides features to develop real-time online multiplayer games. It uses
WebRTC DataChannels, a peer-to-peer networking feature of modern browsers, to transmit
gameplay data.

Scripting
When using JavaScript or TypeScript coding, the features of this object can be accessed via the
IMultiplayerObjectType script interface.

Multiplayer features
The Multiplayer object supports a number of features to enable low-latency gameplay over the
Internet:
UDP-based transmission for minimal latency avoiding head-of-line blocking, with optional
reliable modes
NAT traversal to connect through common router/network setups
Compensation for poor quality connections with high latency, packet delay variation (PDV),
and packet loss
Interpolation and extrapolation modes to ensure smooth in-game motion
Scirra-hosted signalling server to connect peers to each other
Scirra-hosted TURN server to improve connectivity across some types of networks
Authoritative host model to prevent cheating, with local input prediction to hide input latency
LAN game support for near-zero latency gameplay, including support for mixed LAN/Internet
games
Automatic data compression to save bandwidth
Automatic bandwidth reduction when objects are not changing, avoiding redundant repeated
transmissions of identical data
Binary transmission with control over specific datatypes to minimise bandwidth
Large binary transfers, such as to send an entire file between peers
Latency and packet loss simulation for realistic local testing
Support for lag compensation
Support for both peer-to-peer games (not needing a server) and centrally-hosted games
(using a server)
Page 716 of 1146

Construct 3 Official Manual

Learning to make Multiplayer games
Designing Multiplayer games is challenging. It is essential to follow the introductory tutorial
series to gain an understanding of how to use the Multiplayer object correctly. You are likely to
struggle if you try to skip ahead and start making a game without fully understanding how
various aspects of multiplayer games work. Mistakes can also result in degraded gameplay
quality, with unnecessary lag.
The four introductory tutorials are:
1

Multiplayer tutorial 1: concepts

2

Multiplayer tutorial 2: chat room

3

Multiplayer tutorial 3: pong

4

Multiplayer tutorial 4: real-time game

You can also find examples of the Multiplayer features by searching for Multiplayer in the Start
Page.

Signalling and hosting
The signalling server is a central server where players go to find each other. Scirra host an
official signalling server at wss://multiplayer.construct.net. The signalling server does not
transmit any gameplay data; it serves only to connect peers to the game host by relaying
connection information like IP addresses. Players must connect and log in to the signalling
server before they can join any rooms.
The first player in to a room becomes the host. The host acts as the server for the game,
transferring actual gameplay data. Any player can be the host. This means games can run
without needing any server hosting, saving you from having to pay bandwidth bills to run your
multiplayer game.
If you have a large or particularly latency-sensitive game you can still run your game with a
dedicated server host to take advantage of its better quality connection. This can be achieved by
starting a browser on the server, starting the game and make sure the server is the first to join
the room so it becomes the host. Now the server connection will be hosting the game. You can
host multiple games on a server by opening multiple browser tabs (a hosted game can continue
to work in a background tab). Note this means your server is genuinely running the game - as
mentioned, the signalling server only helps peers connect to the room host, and actual gameplay
data will be transmitted through your server if it is the room host. It is not necessary to run your
own signalling server to achieve this.

Peer IDs
The signalling server assigns every player who connects a Peer ID. This is a short string of
random characters that uniquely identifies them, such as "ABCD". When designing multiplayer

Page 717 of 1146

Construct 3 Official Manual

games, it is best to identify peers by their peer ID instead of their alias (display name), since their
alias could potentially change but their peer ID never changes so long as they remain connected.

Sending messages
Peers only connect to the host. In other words, the host has a connection to every peer, and
peers only have one connection to the host. In order for two peers to communicate, the
information must be relayed via the host.
Consequently, the host can directly message any peer in the room, but peers can only directly
message the host. See the chat tutorial for an example of how to relay messages through the
host so other peers can receive messages from another peer.
The host also has the unique ability to broadcast a message. This sends the same message to
every peer in the room.
Messages can be sent with different reliability modes. These are:
Reliable ordered: all messages are guaranteed to arrive, and the order received will be the
same as the order sent. However this can have the highest latency since a lost message will
need retransmitting and will hold up every message sent after it. This mode is suitable for
chat messages.
Reliable unordered: all messages are guaranteed to arrive, but the order received can be
different from the order sent. This allows improved latency since a lost message will be held
up as it is retransmitted, but subsequent messages can still get through quickly without
being held up. This mode is suitable for gameplay events that occur independently of each
other, such as "door opened" or "explosion occurred".
Unreliable: messages are not guaranteed to arrive, and the order received can be different
from the order sent. The network will make a "best effort" attempt to deliver the message,
but the message may be dropped and the recipient will never receive it and will have no
indication it was even attempted to be sent. This mode is suitable for high-bandwidth or
regularly-sent messages, where if a message is dropped it is likely to be shortly followed up
by another one. Note the Multiplayer object uses this mode internally for object positions and
data when using Sync object; avoid re-implementing this functionality with this mode.

Updating games
The host is authoritative for both gameplay data and its settings. If you change any aspect of
your game, such as the synced objects or variables, the client input values, or bandwidth profile,
the host's values are authoritative when there is a mismatch between the peer and the host. In
order to avoid confusion or broken games, use a different game instance name when
distributing an update, so only peers using the same version end up connecting to each other.

Binary transfers
The Multiplayer object supports sending binary messages by transmitting the contents of a
Binary Data object. However due to the underlying networking technologies, a single binary
Page 718 of 1146

Construct 3 Official Manual

message cannot be too large (common limits are in the range 64 KB - 256 KB), which poses a
problem if you want to send a larger file to another peer.
The Multiplayer object provides a Binary transfer feature to help send larger amounts of data.
See the Multiplayer file transfer example for a demonstration of how it works. When making a
binary transfer, the process works like this:
1

The sending peer starts a binary transfer. The receive started event fires for the receiving peer,
where the receiver can access metadata like the filename and transfer size.

2

The Multiplayer object internally splits the data up into smaller chunks that can each be safely
transmitted. The sending peer then starts sending these chunks over the network. Both sides
will fire progress triggers to be able to observe how the transfer is progressing.

3

Once all chunks have been successfully transmitted, the transfer completes and the receiving
peer as an identical copy of the binary data that was transmitted.

Binary transfers can have an optional tag assigned to identify different transfers. For
convenience each transfer can also specify a filename and MIME type that the receiver can also
access for purposes like transferring a named file. Transfers can also be cancelled while still in
progress, such as if a user aborts a transfer. Transfers also benefit from automatic data
compression to save bandwidth. Binary data transfers don't allow specifying a reliability mode they always implicitly send with reliable ordered mode as the feature is designed to guarantee
transmission of an identical copy of the data.
As noted in the section above, peers only connect to the host and so direct communication is
only possible between the host and peers. However the binary transfer feature supports an
automatic relay through the host. This means two non-host peers can transfer binary data to
each other. In this case each chunk will be sent first to the host, and then the host will send it on
to the destination peer. This saves you having to implement a relay yourself. However it is
important to note the privacy and security implications of this. While data transmitted over the
network is automatically encrypted, the host will see unencrypted binary transfers while relaying
them. Bear this in mind if transferring any privacy or security sensitive data between non-host
peers. Also note this will increase the bandwidth used by the host, especially if multiple binary
transfers occur simultaneously.

Multiplayer conditions
On (binary transfer) complete
On any (binary transfer) complete

Triggered on the receiving end of a binary transfer when the transfer has completed. The full
transferred data is then available in the chosen Binary Data object. The On complete trigger
fires only for the specified transfer tag, whereas the any variant trigger fires for any transfer
(with the tag available in the Tag expression).
On (binary transfer) event

Page 719 of 1146

Construct 3 Official Manual

On any (binary transfer) event

These triggers fire at various stages of a binary transfer, either for a transfer with a specific
tag, or for any transfer (with the tag available in the Tag expression). The types of events are:
receive started: triggered for the receiving peer when a binary transfer starts. Metadata is
available through expressions like Filename and TransferSize.
progress: triggered for both sending and receiving peers as the transfer progresses, with
the progess available in the TransferProgress expression.
cancelled: triggered for both sending and receiving peers when a transfer is explicitly
cancelled by the sender with the Cancel binary transfer action.
send complete: triggered for the sending peer when the transfer has finished being sent
(as the On complete trigger is only fired by the receiver).
Compare peer count

Compare the number of peers currently in the room, if a room has been joined. The peer
count includes the host so is at least 1 if in a room.
Is host

True if in a room and acting as the host. The host of the room is effectively the server for the
game. Peers only connect to the host, and the host must relay data if two other peers are to
communicate.
On any peer message

Triggered when a message with any tag is received. The Message, Tag, FromID and
FromAlias expressions can be used to retrieve information about the received message. The
order messages are received, or whether a sent message is received at all, depends on the
reliability mode chosen when the message was originally sent.
On kicked

Triggered if kicked from the current room. This can occur if the host quits, the connection to
the host could not be established, or the host otherwise decides to forcibly remove you from
the room. After On kicked the player is no longer in the room and must re-join a room to be
able to participate in a game.
On peer connected

Page 720 of 1146

Construct 3 Official Manual

Triggered when another peer joins the same room. It also triggers once per peer already in
the room when joining an existing room, including the host. The PeerID and PeerAlias
expressions identify the relevant peer.
On peer disconnected

Triggered when a peer disconnects from the room. The PeerID and PeerAlias expressions
identify the peer that left. The LeaveReason expression can indicate why the peer left, such
as if they intentionally quit or timed out.
On host disconnected

Triggered when a peer is disconnected from the host. This trigger works the same as using
On peer disconnected and checking that the disconnected peer ID is the host's ID. When the
host disconnects, it ends all communication as the host was the peer's only point of contact,
and typically represents the end of the session.
On peer message

Triggered when a message sent with a specific tag is received. The Message, FromID and
FromAlias expressions can be used to retrieve information about the received message. The
order messages are received, or whether a sent message is received at all, depends on the
reliability mode chosen when the message was originally sent.
On peer binary message

As with On peer message, but triggered when receiving a binary message sent with the Send
binary message action. The received data is stored in the chosen Binary Data object. Note
that binary messages do not have tags, but this data can be included in the transmitted
binary data.
Is ready for input

True when a peer is ready to send input to the host. This means On client update has
triggered at least once, or is about to trigger. Do not allow players using input prediction to
move or act before this condition is true or On client update has triggered: doing so will
simply cause an input prediction error since the host is not yet ready to receive input.
On client update

Triggered when a peer is about to send its input state to the host. The input state should be
updated in this trigger using the Set client state action.
Is connected

Page 721 of 1146

Construct 3 Official Manual

True if currently connected to the signalling server. It is not necessary to be connected to a
signalling server once connected to the room host.
Is in room

True if currently in a room on the signalling server.
Is logged in

True if currently connected to the signalling server and successfully logged in.
On connected

Triggered after successfully connecting to the signalling server. In order to join rooms, it is
necessary to next log in to the server.
On disconnected

Triggered after disconnecting from the signalling server.
On error

Triggered if an error occurs with the signalling server. The ErrorMessage expression indicates
the type of error that occurred.
On game instance list

Triggered after Request game instance list when the list has been received from the
signalling server. The List... expressions can be used to retrieve the list details.