# Manual Construct 3  Parte 28 (líneas 3240133600)

## Resumen
- Construct uses an internal list of built-in browser API names which the minifier uses to avoid (línea 7)
- renaming built-in functions and properties. For example the names console and log are on the (línea 8)
- In some cases a browser API may not be on the internal list, for example if it was only just added (línea 10)
- not renamed. (línea 12)
- Object and variable names from Construct (línea 14)
- Some runtime APIs use the names of things from the Construct editor, such as (línea 19)
- runtime.objects.Sprite (which takes the name Sprite from the name of an object). These (línea 20)
- properties are all consistently renamed with everything else in your code, so you should access (línea 21)
- them normally as dot properties, to make sure your code still works after minifying. (línea 22)
- Only object names that are valid JavaScript identifiers will be renamed. For example (línea 23)
- Sprite will be renamed, but 0Sprite will not. The reason for that is because 0Sprite is (línea 24)
- not a valid JavaScript identifier, it cannot be used as a dot property (e.g. (línea 25)
- runtime.objects.0Sprite is invalid). It must always be referred to as a string property (e.g. (línea 26)
- Consider always using valid JavaScript property names for object names to avoid any (línea 28)
- confusion. (línea 29)
- The main mistake that breaks code with advanced minification is mixing normal properties (línea 32)
- code which will be broken: (línea 34)
- This uses both string syntax and normal syntax for the property name apples. Normally this (línea 40)
- code works (logging the number 1), but after advanced minification only one of the properties is (línea 41)
- renamed, resulting in code like this: (línea 42)

## Contenido

Construct uses an internal list of built-in browser API names which the minifier uses to avoid
renaming built-in functions and properties. For example the names console and log are on the
list, so it never renames the properties in built-in calls like console.log("Hello") .
In some cases a browser API may not be on the internal list, for example if it was only just added
in the latest browser release. In this case you can access it with string properties to ensure it's
not renamed.

Object and variable names from Construct
Page 913 of 1146

Construct 3 Official Manual

Some runtime APIs use the names of things from the Construct editor, such as
runtime.objects.Sprite (which takes the name Sprite from the name of an object). These
properties are all consistently renamed with everything else in your code, so you should access
them normally as dot properties, to make sure your code still works after minifying.
Only object names that are valid JavaScript identifiers will be renamed. For example
Sprite will be renamed, but 0Sprite will not. The reason for that is because 0Sprite is
not a valid JavaScript identifier, it cannot be used as a dot property (e.g.
runtime.objects.0Sprite is invalid). It must always be referred to as a string property (e.g.
runtime.objects["0Sprite"] ), and string properties are not changed by the minifier.
Consider always using valid JavaScript property names for object names to avoid any
confusion.

Don't mix property styles
The main mistake that breaks code with advanced minification is mixing normal properties
(which are renamed) with string properties (which are not). For example consider the following
code which will be broken:
const obj = {
"apples": 1
};
console.log(obj.apples);

This uses both string syntax and normal syntax for the property name apples. Normally this
code works (logging the number 1), but after advanced minification only one of the properties is
renamed, resulting in code like this:
const obj = {
"apples": 1
};
console.log(obj.a);

Notice how "apples" had its name preserved (because it uses string syntax), but obj.apples
was renamed to obj.a . That property does not exist on the object, so now the code logs
undefined instead of 1.
The solution is to always use the same syntax consistently. So long as a property name
consistently never uses string syntax, or consistently always does use string syntax, it will work
correctly. Code is only broken if the two types are mixed.
There are several less-obvious ways string properties can end up mixed up. For example
Object.defineProperty() only takes a string of a property name. Since strings are never
renamed, if you use this method, that property name must always be referred to with string
syntax.
Page 914 of 1146

Construct 3 Official Manual

Global variables
One extra requirement of Advanced minifying is that global variables must always be referred to
as a property of the global object. For example the code below shows a problem due to a global
variable not being referred to as a property.
globalThis.myGlobal = 1;
console.log(myGlobal);

The use of console.log(myGlobal) normally does refer to the global variable. However this will
fail to minify in advanced mode. (This is due to the difficulty of automatically renaming global
variables that are written the same way as local variables.) The solution is to always refer to
global variables as a property of the global object, i.e. with a dot, as shown below:
globalThis.myGlobal = 1;
console.log(globalThis.myGlobal);

Debugging problems
If Advanced minification appears to be breaking your code and you're finding it difficult to
identify the problem, one option that can help is to choose the Debug advanced minify option. In
this mode all properties that get renamed are changed to something that preserves the original
name - for example obj.apples may be renamed to obj._$apples$_ . This means anything that
is broken by properties being renamed will still be broken, but you can see in the source code
which property it is attempting to read. For example if an error occurs because obj._$apples$_
is undefined, and you can see in the debugger that obj.apples exists, it would indicate that the
property apples is inconsistently using both dot and string syntax. This mode also "beautifies"
the output to help make it more readable.

Conclusion
Script minification helps compress the size of the code and makes reverse engineering more
difficult. Advanced minification provides the best compression and protection, but requires
some care in writing code to ensure it won't be broken by property mangling. Often code will
work just fine without any specific changes in advanced mode. The only cases to be aware of
are:
1

Calling external library functions (or new browser APIs that aren't on Construct's built-in names
list)

2

Mixing string property syntax with normal property syntax

3

Consistently referring to global variables as global properties

If you make sure your code handles the above correctly, then you should be able to safely use
advanced minification mode with your own code in Construct.

Page 915 of 1146

Construct 3 Official Manual

USING IMPORT MAPS
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/guides/using-importmaps

Construct allows using import maps to customize how you write import statements.
Normally you must import a script by its file path, such as:
// Standard path-based import
import * as MyModule from "./mymodule.js";

However with an import map you can write something like this instead:
// Standard path-based import
import * as MyModule from "mymodule";

The import map then determines what path to use for "mymodule".

Adding an import map
Import maps are defined as JSON files. To add an import map to your project, follow these
steps.
1

In the Project Bar, right-click on Files and select New►JSON

2

Name the file something like importMap.json.

3

Click the file in the Project Bar to show its properties in the Properties Bar.

4

Change the Purpose property to Import map.

For the contents of the import map, use some JSON data like the following. Refer to the MDN
article linked above for full details on the format.
{
"imports": {
"mymodule": "./mymodule-v1.js"
}
}

Now if you write this in a script file:
// Standard path-based import
import * as MyModule from "mymodule";

Page 916 of 1146

Construct 3 Official Manual

...the import map means that importing "mymodule" will load the path "./mymodule-v1.js".

Why to use import maps
You don't have to use import maps, but they can be a handy way to organize your imports. To
illustrate this, using the example above, suppose you import "mymodule" in lots of places. You
can then change that from importing "./mymodule-v1.js" to importing "./mymodule-v2.js" merely
by changing the entry in the import map - you don't have to go through every place it's imported
and update it. So import maps can help manage complex sets of imports more easily.
Some third-party libraries like three.js also rely on import maps, and so supporting them makes
it easier to use these libraries. You can find an example of this in the Integrated 3D engine
example.

Limitations
As of September 2024, browsers don't support using import maps in web workers. Therefore if
you use import maps, your project will run in DOM mode and not be able to use worker mode.
Currently Construct only supports the "imports" field in an import map. The "scopes" and
"integrity" fields are supported by browsers, but are not yet supported in exported projects,
as these need special handling for cases like minified exports.

Page 917 of 1146

Construct 3 Official Manual

SCRIPTING REFERENCE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scripting-reference

This section of the manual has a comprehensive reference covering all the APIs available in the
scripting feature. You can use this to explore the available APIs or learn more about APIs of
particular interest.

Commonly used APIs
The following classes may be a good place to start to learn more about Construct's scripting
APIs.
IRuntime is the runtime script interface representing the Construct engine and is typically the
entry point to all other APIs. It's typically accessed by a variable named runtime .
IInstance is the base class of all object instances, and its derivative IWorldInstance is the
base class of all object instances that appear in the layout.
See also the Plugin interfaces and Behavior interfaces sections, which cover APIs for things
like the Sprite plugin and Bullet behavior.

Page 918 of 1146

Construct 3 Official Manual

RUNTIME SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/iruntime

The IRuntime script interface provides a way for JavaScript code in Construct to interact with
the engine.

Accessing the runtime script interface
The runtime script interface is typically accessed with the name runtime . Note however this is
not in a global variable: it is only passed in specific places.
All scripts in event sheets have the runtime interface passed to them as a parameter named
runtime . For more information see Scripts in event sheets.
In script files, the runtime interface is only passed to the runOnStartup() method. Outside of
that, it is your responsibility to pass it along wherever else it is needed. For more information see
Script files.

Runtime events
The following events can be listened for using the addEventListener method.

Many input events are also fired on the runtime interface. This is so they can be used in
worker mode, where the window and document objects are not available, and so input
events cannot be listened for. The runtime passes copies of the event objects, since they
may have had to be posted over a MessageChannel to the worker.

"resize"

Fires when the display size changes, such as upon window resizes. The event object has
cssWidth and cssHeight properties with the size of the main canvas in CSS units, and
deviceWidth and deviceHeight properties with the size of the main canvas in device units.

"pretick"
"tick"
"tick2"

These events fire every tick, at different points during ticking the engine. Each tick,
"pretick" fires first, then behaviors are ticked, then "tick" fires, then it runs event sheets,

Page 919 of 1146

Construct 3 Official Manual

then "tick2" fires. Use the runtime.dt property to access delta-time and step the game's
logic by that amount of time.
"beforeprojectstart"
"afterprojectstart"

Fired once only when the first layout in the project starts. "beforeprojectstart" fires before
"beforelayoutstart" on the first layout, which in turn is before On start of layout triggers.
"afterprojectstart" fires after "afterlayoutstart" on the first layout, which in turn is
after On start of layout triggers. In both events, all instances on the first layout are created
and available to modify.
These events can use async handler functions, and the runtime will wait for them to
finish before continuing.

"beforeanylayoutstart"
"afteranylayoutstart"
"beforeanylayoutend"
"afteranylayoutend"

Fired whenever any layout starts or ends. The start events fire before and after the On start
of layout trigger, and the end events fire before and after the On end of layout trigger. The
event object has the property layout which is the ILayout for the layout that is starting or
ending.
These events can use async handler functions, and the runtime will wait for them to
finish before continuing.

"keydown"
"keyup"

Fired when keys are pressed and release on the keyboard. These pass copies of a
KeyboardEvent.
"mousedown"
"mousemove"
"mouseup"
"dblclick"

Fired when mouse input is received. These pass copies of a MouseEvent.

Page 920 of 1146

Construct 3 Official Manual

You can use pointer events like "pointermove" instead of mouse events to cover both
mouse and touch input.

"wheel"

Fired when mouse wheel input is received. This passes a copy of a WheelEvent.
"pointerdown"
"pointermove"
"pointerup"
"pointercancel"

Fired when pointer input is received. This covers mouse, pen and touch input. These pass
copies of a PointerEvent. Construct also adds a lastButtons property for "mouse" type
pointers with the previous buttons state, which makes it easier to detect if different mouse
buttons have been pressed or released in this event.
See also the Tracking pointers example for a demonstration of how multiple
simultaneous pointers can be tracked with JavaScript code.

"deviceorientation"
"devicemotion"

Fired when device orientation or motion sensor input is received. These pass copies of a
DeviceOrientationEvent or DeviceMotionEvent respectively.
These events require permission to be granted before they will fire. See the
requestPermission() method in the Touch script interface.

"suspend"
"resume"

Triggered when the browser/app suspends and resumes execution. Normally when the app
goes in to the background (e.g. minimized, or switched back to the home screen), execution
of the app is suspended to conserve system resources and save battery power, firing the
"suspend" event. When the app is reopened, the "resume" event is fired and execution
resumes. The isSuspended property also reflects the current suspend state.

"save"

Page 921 of 1146

Construct 3 Official Manual

"load"

Fired when the savegame system saves or loads the state of the game. The saveData
property of the event object is extra JSON data to save in the "save" event, and the
corresponding last saved data in the "load" event. This allows custom data stored in scripts
to be integrated with the savegame system. Note this is serialized to JSON so things like
object references and complex types cannot be saved directly.
These events can use async handler functions, and the runtime will wait for them to
finish before continuing.

"instancecreate"

Fired whenever any new instance is created. The event object has an instance property
referring to the IInstance (or derivative) that was created.
"hierarchyready"

Fired for the root instance in a hierarchy after all instances have finished creating - see the
IWorldInstance event for more details. When fired on IRuntime, the event object has an
instance property referring to the IWorldInstance (or derivative) that was created.

"instancedestroy"

Fired whenever any instance is destroyed. After this event, all references to the instance are
now invalid, so any remaining references to the instance should be removed or cleared to
null in this event. Accessing an instance after it is destroyed will throw exceptions or
return invalid data. The event object has an instance property referring to the IInstance (or
derivative) that was destroyed. It also has an isEndingLayout property to indicate if the
object is being destroyed because it's the end of a layout, or destroyed for other reasons.
"loadingprogress"

Fired during a loader layout when the value of the loadingProgress property changes.

Runtime APIs
addEventListener(eventName, callback)
removeEventListener(eventName, callback)

Add or remove a callback function for an event. See Runtime events above for the available
events.
See the Handling multiple events example for a way to conveniently handle events.

Page 922 of 1146

Construct 3 Official Manual

objects

An object with a property for each object class in the project. For example if the project has
an object named Sprite, then runtime.objects.Sprite will refer to the IObjectClass interface
for Sprite.
In some cases, objects may have names that aren't valid JavaScript identifiers. In this
case you can use the string property syntax, e.g. runtime.objects["Sprite"] .

getInstanceByUid(uid)

Get an instance (an IInstance or derivative) by its UID (Unique ID), a unique number assigned
to each instance and accessible via its uid property.

globalVars

An object with a property for each global variable on an event sheet in the project. For
example if the project has a global variable on an event sheet named Score, then
runtime.globalVars.Score provides access to the global variable from script.
In some cases, event variables may have names that aren't valid JavaScript identifiers. In
this case you can use the string property syntax, e.g. runtime.globalVars["Score"] .

mouse

A shorthand reference to the Mouse script interface. This is only set if the Mouse plugin is
added to the project.
keyboard

A shorthand reference to the Keyboard script interface. This is only set if the Keyboard plugin
is added to the project.
touch

A shorthand reference to the Touch script interface. This is only set if the Touch plugin is
added to the project.
timelineController

A shorthand reference to the Timeline Controller script interface. This is only set if the
Timeline Controller plugin is added to the project.
platformInfo

Page 923 of 1146

Construct 3 Official Manual

A shorthand reference to the IPlatformInfo script interface. Note this always available
regardless of whether the Platform Info plugin has been added to the project.
collisions

The ICollisionEngine interface providing access to collision APIs.
layout

An ILayout interface representing the current layout.
getLayout(layoutNameOrIndex)

Get an ILayout interface for a layout in the project, by a case-insensitive string of its name or
its zero-based index in the project.
getAllLayouts()

Return an array of ILayout interfaces representing all the layouts in the project, in the
sequence they appear in the Project Bar.
goToLayout(layoutNameOrIndex)

End the current layout and switch to a new layout given by a case-insensitive string of its
name, or its zero-based index in the project (which is the order layouts appear in the Project
Bar with all folders expanded). Note the layout switch does not take place until the end of the
current tick.
renderer

The IRenderer script interface representing Construct's renderer, which is used for drawing
content. Note that content can only be drawn in certain events, such as ILayer's
"beforedraw" and "afterdraw" events. However you may use the renderer to load
resources such as textures at any time, including on startup.
assets

An IAssetManager interface providing access to project assets like sound and music files or
other project files, as well as audio decoding utilities.
storage

An IStorage interface providing access to storage from scripts. Storage is shared with the
Local Storage plugin.
projectId

Page 924 of 1146

Construct 3 Official Manual

A string of the project ID, as specified in Project Properties.
projectName

A string of the project name, as specified in Project Properties.
projectUniqueId

A string of random characters that Construct automatically generated to uniquely identify
this specific project.
projectVersion

A string of the project version, as specified in Project Properties.
viewportWidth
viewportHeight
getViewportSize()

Read-only numbers with the project viewport size, as specified in Project Properties. The
method returns both values at the same time.
loadingProgress

Return the current load progress on a loader layout in the range 0 to 1. This is the same as
the LoadingProgress system expression. For more information, see the tutorial how to make
a custom loading screen.
imageLoadingProgress

Return the current loading progress of any memory management Load system actions that
are currently busy, on a scale of 0-1. This is the same as the ImageLoadingProgress system
expression.
sampling

A read-only string indicating the project's Sampling property with one of the strings
"nearest" , "bilinear" or "trilinear" .

isPixelRoundingEnabled

A read-only boolean indicating the project's Pixel rounding setting.
gameTime

Page 925 of 1146

Construct 3 Official Manual

Return the in-game time in seconds, which is affected by the time scale. This is equivalent to
the time system expression.
wallTime

Return the in-game time in seconds, which is not affected by the time scale.
Note this is not exactly equivalent to the wallclocktime system expression, as it only
measures time elapsed in-game, rather than since the project started.

tickCount

A read-only number with the number of ticks that have run since the project started.
timeScale

Set or get a number that determines the rate at which time passes in the project, e.g. 1.0 for
normal speed, 2.0 for twice as fast, etc. This is useful for slow-motion effects or pausing.
dt

Return the value of delta-time, i.e. the time since the last frame, in seconds.
dtRaw

Return the wall-clock time in seconds since the last frame. Unlike dt, the "raw" value is not
affected by the game time scale or the min/max delta-time clamping.
minDt
maxDt

Set the limits on the delta-time ( dt ) measurement. If the real-world delta-time increases
above the maximum delta-time, it stops increasing the measurement used by Construct,
corresponding to a dropping framerate causing the project to run in slow-motion. Conversely
if the real-world delta-time decreases below the minimum delta-time, it stops decreasing the
measurement used by Construct, corresponding to an increasing framerate causing the
project to run in fast-forward. The defaults are a minimum delta-time of 0 (meaning the
project never goes in to fast-forward mode) and a maximum delta-time of 1 / 30
(corresponding to a framerate of 30 FPS), meaning the project begins to go in to slowmotion as the framerate drops below 30 FPS. Going in to fast-forward can be useful for a
"catch-up time" mode, and going in to slow-motion with low framerates is useful to prevent
objects stepping too far every frame which can result in skipped collisions and unstable
gameplay.

Page 926 of 1146

Construct 3 Official Manual

Note the inverse relationship between the framerate and delta-time: an increasing
framerate results in an decreasing delta-time, and a decreasing framerate results in
increasing delta-time.

framerateMode

Change the project Framerate mode property at runtime. This can be one of the following
strings: "vsync" , "unlimited-tick" or "unlimited-frame" . For more details, see the
corresponding project property.
framesPerSecond

A read-only number indicating how many frames per second (FPS) the project is rendering.
The most common display refresh rate is 60 Hz, so typically an efficiently designed project
will render at 60 FPS. Note however if nothing is changing on-screen, then nothing is
rendered, and so the FPS measurement may fall to 0 or display a lower result; this does not
indicate poor performance, only that fewer frames are necessary to render. The
ticksPerSecond property indicates how frequently the engine is stepping, which may be
different to the frames rendered per second.
ticksPerSecond

A read-only number indicating how many ticks per second (TPS) the project is running at.
Each tick processes the logic of the game. Usually a new frame is also rendered every tick,
but if nothing changes then rendering a frame is skipped; further, depending on the framerate
mode, stepping the engine and drawing frames may happen at different rates. Therefore the
ticks per second may produce a different measurement to the frames per second. Usually
the project will continually tick even if nothing is visually changing, and only stop ticking if the
project is suspended, such as by being minimized or going in to the background.
cpuUtilisation

A timer-based estimate of Construct's main thread CPU usage over the past second, as a
percentage in the range 0-1. This can help with performance measurements. Note however
this only measures time in function calls that Construct knows about, so it may not include
time spent running custom JavaScript code. Timer-based measurements can also be
unreliable as most modern CPUs deliberately slow down if not fully loaded in order to save
power, so the reading can be misleadingly high unless the system is under full load.
gpuUtilisation

A timer-based estimate of the GPU usage over the past second, as a percentage in the range
0-1. Not all devices support this, in which case this returns NaN . Timer-based
measurements can also be unreliable as most modern GPUs deliberately slow down if not

Page 927 of 1146

Construct 3 Official Manual

fully loaded in order to save power, so the reading can be misleadingly high unless the
system is under full load.
isSuspended

A read-only boolean indicating if the runtime is currently suspended. When suspended, the
runtime stops ticking and drawing anything, and remains inactive. This is normally done to
save resources while in the background, such as when a browser tab is in the background or
the application window minimized. The "suspend" and "resume" events are fired when this
property changes.
exportDate

A read-only Date object representing the time the project was exported from Construct. In
preview mode, this is the time the preview was launched.
callFunction(name, ...params)

Call a function in an event sheet, by a case-insensitive string of its name. Each parameter
added after the name is passed to the function. There must be at least as many parameters
provided as the function uses, although any additional parameters will be ignored. If the
function has a return value, it will be returned from this method, else it returns null .

setReturnValue(value)

This can only be called from a script in an event sheet function with a return type other than
None. It is essentially equivalent to the Set return value action. However the fact this method
can be called from script can make it easier to return a value from script from an event sheet
function. For example an event sheet function could contain a single script action with the
code runtime.setReturnValue(getMyValue()) , which means anywhere the event sheet
function is called it returns the value of calling getMyValue() in JavaScript.

signal(tag)

Triggers On signal, resumes any events waiting for a signal with the given tag, and resolves
any promise returned by waitForSignal().

waitForSignal(tag)

Returns a Promise that resolves when the given tag is signalled. It may be signalled by either
the script API or an event sheet.
random()

Return a random number in the range [0, 1). This is similar to Math.random() , but can
produce a deterministic sequence of values if the Advanced Random object overrides the

Page 928 of 1146

Construct 3 Official Manual

system random.
sortZOrder(iterable, callback)

Sort the relative Z order of all the IWorldInstances given by iterable, using a custom sort
function as the callback which receives two IWorldInstance to compare as arguments. An
example using a myZOrder instance variable for sorting a Sprite object's instances is given
below.
runtime.sortZOrder(runtime.objects.Sprite.instances(),
(a, b) => a.instVars.myZOrder - b.instVars.myZOrder);

saveCanvasImage(format, quality, areaRect)

Take a screenshot of the current display canvas. All parameters are optional - if none are
specified, the entire canvas is saved in PNG format. The format parameter is a string of the
MIME type of the image format to use, e.g. "image/png". Where a lossy format is used like
"image/jpeg", the quality parameter is a number from 0-1 for the compression quality. A
subset of the canvas area can be saved (e.g. for saving a cropped image) by specifying a
DOMRect for the areaRect parameter using units of device pixels. The method returns a
Promise that resolves with a Blob of the resulting image.
invokeDownload(url, filename)

Invoke a download of the resource at the given url, downloading with the given filename.
Locally-generated content can be downloaded with this method using either a data URI or
blob URL for url.
isInWorker

A read-only boolean indicating if the runtime is currently running in the context of a Web
Worker. This is controlled by the Use worker project property. In worker mode, a more limited
set of browser APIs is available. See Functions and classes available to Web Workers.
getHTMLLayer(index)

Retrieve the HTML element used to contain all HTML content on a given HTML layer in the
project. The index is the zero-based index of the HTML layer (not the Construct layer). This
method can only be used in DOM mode - if the project property Use worker is Yes then calling
this method will throw an exception. This method is useful to obtain a parent element in
which to insert custom HTML content such that it appears layered according to one of
Construct's HTML layers. For more information see HTML layers.
async alert(message)

Page 929 of 1146

Construct 3 Official Manual

Show an alert message prompt using the alert() method. This is provided as a runtime
method since it forwards the call to the DOM in worker mode. Note that unlike the standard
browser alert() method, this is an async method - in worker mode it returns a promise
that is resolved when the alert is closed, and execution in the worker will continue while the
alert is showing. In DOM mode, the alert is blocking and will stop all execution while the alert
is showing (but it still returns a promise that resolves when the alert is closed).
This method is also made available as a global alert() function in worker mode. This
is to help make sure simple test code works as expected, even if the code is
unintentionally run in the context of a Web Worker, where the browser alert() method
is not normally available.

Runtime SDK events and APIs
These events and APIs are normally only needed for use with the Addon SDK and should not
normally be used when using JavaScript coding in Construct. However as they are also part of
the IRuntime interface they are also documented here.

SDK events
"afterload"

Fired after the _loadFromJson() call after the rest of the runtime has finished loading some
saved state. This means all objects are available and can be looked up by their UID. For
example to save a reference to an instance, save its UID to JSON, load its UID and store it in
_loadFromJson() , and then look it up with getInstanceByUid() in the "afterload" event.

SDK APIs
sdk

Access the ISDKUtils interface which implements more APIs specific to the addon SDK.

Page 930 of 1146

Construct 3 Official Manual

8 DIRECTION BEHAVIOR SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/direction

The I8DirectionBehaviorInstance interface derives from IBehaviorInstance to add APIs specific
to the 8 direction behavior.

8 direction behavior APIs
stop()

Stop the movement, setting the speed to 0.
reverse()

Invert the direction of motion. Useful as a simple way to bounce the object off an obstacle.
simulateControl(control)

Simulate one of the movement controls being held down. Useful when isDefaultControls is
disabled. The control is provided as a string and must be one of "left" , "right" , "up" ,
"down" .

speed

Set or get the current speed in pixels per second. Note this cannot exceed maxSpeed .

maxSpeed

Set or get the maximum speed in pixels per second.
acceleration
deceleration

Set or get the acceleration/deceleration of the movement in pixels per second per second.
vectorX
vectorY
setVector(vectorX, vectorY)
getVector()

Page 931 of 1146

Construct 3 Official Manual

Set or get the X and Y components of the movement in pixels per second. The methods
allow setting or getting both values at the same time.
isAllowSliding

A boolean indicating if the behavior is allowed to slide along solids (corresponding to the
Allow sliding property).
isDefaultControls

A boolean indicating if the default controls (using the arrow keys) are enabled.
isIgnoringInput

A boolean indicating if input is currently being ignored. If input is ignored, pressing any of the
control keys has no effect. However, unlike disabling the behavior, the object can continue to
move.
isEnabled

A boolean indicating if the behavior is enabled. If disabled, the behavior no longer has any
effect on the object.

Page 932 of 1146

Construct 3 Official Manual

ANCHOR BEHAVIOR SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/anchor

The IAnchorBehaviorInstance interface derives from IBehaviorInstance to add APIs specific to
the Anchor behavior.

Anchor behavior APIs
isEnabled

A boolean indicating if the behavior is enabled. If disabled, the behavior no longer has any
effect on the object.

Page 933 of 1146

Construct 3 Official Manual

BULLET BEHAVIOR SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/bullet

The IBulletBehaviorInstance interface derives from IBehaviorInstance to add APIs specific to
the Bullet behavior.

Bullet behavior APIs
speed

Set or get the current speed in pixels per second.
acceleration

Set or get the acceleration of the movement in pixels per second per second.
gravity

Set or get the downwards acceleration caused by gravity in pixels per second per second.
angleOfMotion

Set or get the current angle of movement in radians.
bounceOffSolids

A boolean indicating if the Bounce off solids property is enabled.
distanceTravelled

A number indicating the distance the bullet has travelled so far in pixels. Note this can also
be set, such as to reset the counter.
isEnabled

A boolean indicating if the behavior is enabled. If disabled, the behavior no longer has any
effect on the object.

Page 934 of 1146

Construct 3 Official Manual

CAR BEHAVIOR SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/car

The ICarBehaviorInstance interface derives from IBehaviorInstance to add APIs specific to the
Car behavior.

Car behavior APIs
stop()

Stop the movement, setting the speed to 0.
simulateControl(control)

Simulate one of the movement controls being held down. Useful when isDefaultControls is
disabled. The control is provided as a string and must be one of "left" , "right" , "up" ,
"down" .

speed

Set or get the current speed in pixels per second. Note this cannot exceed maxSpeed .

maxSpeed

Set or get the maximum speed in pixels per second.
acceleration
deceleration

Set or get the acceleration/deceleration of the movement in pixels per second per second.
vectorX
vectorY
getVector()

Get the read-only X and Y components of the movement in pixels per second. The method
returns both values at the same time.
angleOfMotion

The read-only current angle of the movement in radians.

Page 935 of 1146

Construct 3 Official Manual

steerSpeed

Set or get the rate the car rotates at when steering, in radians per second.
driftRecover

Set or get the rate the car recovers from drifts, in radians per second. In other words, this is
the rate the angle of motion catches up with the object angle. The angle of motion can never
be more than 90 degrees off the object angle. If the drift recover is greater or equal to
steerSpeed, no drifting ever occurs. The lower the drift recover, the more the car will drift on
corners.
friction

Set or get the amount of speed lost when colliding with a solid, from 0 (stop dead) to 1
(speed not affected at all). For example, 0.5 will slow the speed down by half when colliding
with a solid.
turnWhileStopped

A boolean indicating if the Turn while stopped behavior property is enabled. When enabled, it
allows rotation while not moving.
isDefaultControls

A boolean indicating if the default controls (using the arrow keys) are enabled.
isIgnoringInput

A boolean indicating if input is currently being ignored. If input is ignored, pressing any of the
control keys has no effect. However, unlike disabling the behavior, the object can continue to
move.
isEnabled

A boolean indicating if the behavior is enabled. If disabled, the behavior no longer has any
effect on the object.

Page 936 of 1146

Construct 3 Official Manual

DRAG & DROP BEHAVIOR SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/drag-drop

The IDragDropBehaviorInstance interface derives from IBehaviorInstance to add APIs specific
to the Drag & Drop behavior.

Drag & Drop behavior events
See behavior instance event for standard behavior instance event object properties.
"dragstart"

Fired when the object starts being dragged.
"drop"

Fired when the object is dropped after being dragged.

Drag & Drop behavior APIs
axes

Set or get a string indicating if the dragging is locked to a specific axes, which must be one
of "horizontal" , "vertical" or "both" .

drop()

Call while dragging to force the object to be dropped.
isDragging

A read-only boolean indicating if the object is currently being dragged.
isEnabled

A boolean indicating if the behavior is enabled. If disabled, the behavior no longer has any
effect on the object.

Page 937 of 1146

Construct 3 Official Manual

FADE BEHAVIOR SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/fade

The IFadeBehaviorInstance interface derives from IBehaviorInstance to add APIs specific to the
Fade behavior.

Example
Below is a sample code snippet demonstrating starting a fade for inst (assumed to be an
instance with the Fade behavior) and logging to the console when the fade finishes.
// Handle "fadeoutend" event which logs to console when
// the fade has finished
inst.behaviors.Fade.addEventListener("fadeoutend", e =>
{
console.log("Fade finished!");
});
// Start the Fade effect running
inst.behaviors.Fade.startFade();

Fade behavior events
See behavior instance event for standard behavior instance event object properties.
"fadeinend"

Fired when the fade in stage finishes, moving on to the wait stage.
"waitend"

Fired when the wait stage finishes, moving on to the fade out stage.
"fadeoutend"

Fired when the fade out stage finishes. The object may also be destroyed immediately after
this event if the Destroy property of the behavior is enabled.

Fade behavior APIs
startFade()

Page 938 of 1146

Construct 3 Official Manual

Start the fade effect running if it is not already running.
restartFade()

Force the fade effect to restart from the beginning.
fadeInTime

Set or get the fade in time in seconds. Set to 0 to skip this stage.
waitTime

Set or get the wait time, in between the fade in and fade out, in seconds. Set to 0 to skip this
stage.
fadeOutTime

Set or get the fade out time in seconds. Set to 0 to skip this stage.

Page 939 of 1146

Construct 3 Official Manual

FLASH BEHAVIOR SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/flash

The IFlashBehaviorInstance interface derives from IBehaviorInstance to add APIs specific to
the Flash behavior.

Example
Below is a sample code snippet demonstrating flashing inst (assumed to be an instance with
the Flash behavior) and logging to the console when the flash finishes.
// Handle "flashend" event which logs to console when
// the flash has finished
inst.behaviors.Flash.addEventListener("flashend", e =>
{
console.log("Flash finished!");
});
// Start flashing with the Flash behavior for 2 seconds
inst.behaviors.Flash.flash(0.1, 0.1, 2);

Flash behavior events
See behavior instance event for standard behavior instance event object properties.
"flashend"

Fired when a flash finishes.

Flash behavior APIs
flash(onTime, offTime, duration)

Start flashing for the given duration with the object shown visible for the onTime and
invisible for the offTime , with all times in seconds.

stop()

Stop any currently active flash effect, returning the object to a visible state.

Page 940 of 1146

Construct 3 Official Manual

isFlashing

A read-only boolean indicating if the object is currently flashing.

Page 941 of 1146

Construct 3 Official Manual

FOLLOW BEHAVIOR SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/follow

The IFollowBehaviorInstance interface derives from IBehaviorInstance to add APIs specific to
the Follow behavior.

Built-in property strings
The Follow behavior uses the following strings to refer to built-in properties in some APIs: "x" ,
"y" , "z-elevation" , "width" , "height" , "angle" , "opacity" , "visibility" , "destroyed" .

Interpolation strings
The following strings are used to refer to interpolation modes: "step" , "linear" , "angular" .

Follow behavior APIs
startFollowing(inst, fromCurrentPosition = false)

Begin following the specified IInstance. This starts recording the changes over time of the
specified object, and after the delay period has passed, it will then start following the
changes for the enabled properties. Until the delay has passed, hasFollowData will be false
as there is not yet any data to follow. Alternatively the fromCurrentPosition parameter can
be set to true , which allows immediate following. When enabled this creates an initial
history entry based on the following object's current state in the past at the delay time.
Therefore hasFollowData is immediately true and the object is able to immediately start
updating. This has the effect of interpolating from the following object's starting position to
the followed object's starting position over the delay time.
stopFollowing()

Stops recording the history of a followed object. Any recorded history of the object that was
followed is still preserved, and it will still continue following changes up until the time that
this action was used.
followInstance

A read-only reference to the IInstance being followed, or null if none.

mode

Page 942 of 1146

Construct 3 Official Manual

Set or get a string corresponding to the follow mode, which may be one of "time" or
"distance" .

delay
maxDelay
historyRate

Set or get the corresponding behavior properties. See the Follow behavior manual entry for
more details.
clearHistory()

Erases any recorded history about the object being followed. This will cause hasFollowData
to become false and stop updating the object until enough data has been collected again.
This is useful for resetting the behavior.
rewindHistory(time)

Rewinds the follow time by the given time in seconds, deletes history entries past that time,
and then continues recording history. Note that it is not possible to rewind further than the
max delay, as data beyond that time is erased. This action allows for implementing a 'rewind
time' feature where an object can go backwards in time and then continue from a different
location, while preserving the history prior to the time it continued from.
hasFollowData

A read-only boolean indicating if the behavior has enough data to be able to start following
on a delay. For example if the behavior starts following an object on a 5 second time delay,
then for the first 5 seconds there is no follow data and so the object will not be updated, and
hasFollowData will be false. Once 5 seconds has elapsed it then starts updating and
hasFollowData will be true. Note that if following starts with fromCurrentPosition set to
true , then that counts as having follow data immediately.

setFollowingProperty(prop, isEnabled)
isFollowingProperty(prop)

Set or get whether a built-in property is being followed. See the section Built-in property
strings above for the strings that can be specified for prop .

setPropertyInterpolation(prop, interpolation)
getPropertyInterpolation(prop)

Set or get the interpolation mode of one of the built-in properties. See the section Built-in
property strings above for the strings that can be specified for prop , and Interpolation

Page 943 of 1146

Construct 3 Official Manual

strings for the strings that can be specified for interp . Generally this is used to change one
of the built-in properties from smooth interpolation to step interpolation. For example
mirroring an object with the Platform behavior should always update the width instantly, and
not interpolate any in-between values.
startFollowingCustomProperty(customProperty, interpolation)
stopFollowingCustomProperty(customProperty)
isFollowingCustomProperty(customProperty)

Start, stop, or test if following a custom property. This allows the Follow behavior to track a
custom value other than one of the built-in properties such as the X and Y position. Multiple
custom properties can be followed, each identified by a case-insensitive string. The
interpolation parameter determines how values in between history entries are determined
(see the section Interpolation strings for the strings that can be specified). Step does not
interpolate and just uses the previous history entry. Linear interpolation is suitable for linear
values like position and size. Angular interpolation is suitable for rotational values like angles.
Note that if a custom property value is a string, then only step interpolation is supported. The
value to be recorded must be set with setCustomPropertyValue() , and then the value to be
followed can be retrieved with getDelayedCustomPropertyValue() .

setCustomPropertyValue(customProperty, value)

Set the current value of a custom property that is being followed. The custom property is
identified by a case-insensitive string. The value parameter can be either a string or a
number, but if it is a string then it will only use step interpolation mode. This method should
be used every tick while following a custom property, so that the latest value is available
when the behavior decides to add a history entry.
getDelayedCustomPropertyValue(customProperty)

Retrieve the current value to be followed for a custom property, specified by a caseinsensitive string.
isPaused

Set or get whether following is paused. While paused, no further history is recorded, but it
also stops advancing the follow time. Upon resuming, the behavior will restart recording the
history of the followed object. If the followed object has substantially changed while
following was paused, then it will skip to the new position as it follows the history, as no
changes in between will have been saved.
saveHistoryToJSON(maxDelay = 0)

Save the current recorded history of the followed object to a JSON object. This can then be
loaded again later using loadHistoryFromJSON() . The maxDelay parameter can be used to
save only a portion of the most recent history, rather than all the recorded history, suitable for
Page 944 of 1146

Construct 3 Official Manual

a record/replay feature when the recording duration is less than the behavior's max delay. If
maxDelay is 0, then it saves all the history.

loadHistoryFromJSON(json)

Load the recorded history of the object being followed from a JSON object previously saved
by saveHistoryToJSON() . This also sets the delay to the time of the oldest history entry
loaded, so it then immediately follows the amount of data originally saved. This allows for
creating a record/replay feature.
isEnabled

Set or get a boolean indicating whether the behavior is enabled. If disabled it will be
completely inactive, without recording any history or updating the object at all.

Page 945 of 1146

Construct 3 Official Manual

JUMP-THRU BEHAVIOR SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/behavior-interfaces/jump-thru

The IJumpthruBehaviorInstance interface derives from IBehaviorInstance to add APIs specific
to the Jump-thru behavior.

Jump-thru behavior APIs
isEnabled

A boolean indicating if the behavior is enabled. If disabled, the behavior no longer has any
effect on the object.

Page 946 of 1146

Construct 3 Official Manual