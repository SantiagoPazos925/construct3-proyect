# Manual Construct 3  Parte 32 (líneas 3720138400)

## Resumen
- from the event sheet can also be read from script, and vice versa. Note however that Construct (línea 7)
- expressions can only be strings or numbers, so if a script stores a different type it cannot be (línea 8)
- used in the event sheet. (línea 9)
- As with the Local Storage plugin, the storage is unique to the specific project. It is not shared (línea 10)
- with any other projects or other website storage, even on the same origin. (línea 11)
- Examples (línea 13)
- See the Local storage - script example for a demonstration of using these storage APIs to track a (línea 14)
- high score. (línea 15)
- Storage APIs (línea 17)
- async getItem(key) (línea 18)
- Read an item from storage. Returns a promise that resolves to the value of the item if it (línea 20)
- exists in storage, else null if the item does not exist in storage. (línea 21)
- If an error occurs when reading from storage, this resolves with null instead of (línea 22)
- throwing an exception. (línea 23)
- async setItem(key, value) (línea 25)
- Write an item to storage. Returns a promise that resolves when the write has completed. (línea 27)
- If the write fails - most commonly due to using up all available storage space - the (línea 28)
- promise will reject. To ensure this does not crash the game, ensure calls are in a (línea 29)
- try...catch block. (línea 30)
- async removeItem(key) (línea 32)

## Contenido

from the event sheet can also be read from script, and vice versa. Note however that Construct
expressions can only be strings or numbers, so if a script stores a different type it cannot be
used in the event sheet.
As with the Local Storage plugin, the storage is unique to the specific project. It is not shared
with any other projects or other website storage, even on the same origin.

Examples
See the Local storage - script example for a demonstration of using these storage APIs to track a
high score.

Storage APIs
async getItem(key)

Read an item from storage. Returns a promise that resolves to the value of the item if it
exists in storage, else null if the item does not exist in storage.
If an error occurs when reading from storage, this resolves with null instead of
throwing an exception.

async setItem(key, value)

Write an item to storage. Returns a promise that resolves when the write has completed.
If the write fails - most commonly due to using up all available storage space - the
promise will reject. To ensure this does not crash the game, ensure calls are in a
try...catch block.

async removeItem(key)

Page 1048 of 1146

Construct 3 Official Manual

Delete an item from storage. Returns a promise that resolves when the removal has
completed.
async clear()

Delete all items from storage. Returns a promise that resolves when the clear has
completed.
async keys()

Retrieve a list of all keys in storage. Returns a promise that resolves to an array of key
names.

Page 1049 of 1146

Construct 3 Official Manual

TIMELINE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/itimelinestate

The ITimelineState represents an actively running timeline. It derives from ITimelineStateBase
which implements APIs in common between timelines and tweens. Many general playback APIs
are part of ITimelineStateBase ; the ITimelineState interface only provides APIs specific to
timelines that do not also apply to tweens.
Timelines can be created using the play() method on the Timeline Controller script interface.

Once a timeline finishes, this interface is destroyed and all its properties will throw
exceptions upon access. The only exception to this is the isReleased property which
provides a read-only boolean that indicates if the interface has been released and is now
invalid.

Timeline APIs
name

A read-only string with the name of the timeline.

Page 1050 of 1146

Construct 3 Official Manual

ITIMELINESTATEBASE SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/itimelinestatebase

The ITimelineStateBase is the base class of ITimelineState and ITweenState, allowing common
APIs to be shared between timelines and tweens, as tweens are a kind of temporary timeline.
Unless otherwise stated, where this documentation refers to a timeline, it also applies to a
tween.
Once a timeline finishes, this interface is destroyed and all its properties will throw
exceptions upon access. The only exception to this is the isReleased property which
provides a read-only boolean that indicates if the interface has been released and is now
invalid.

ITimelineStateBase APIs
finished

A promise that resolves when the timeline finishes playing. This can be awaited in order to
wait until the timeline finishes before proceeding to do something else.
pause()
resume()

Pause or resume playback of the timeline.
isPlaying
isPaused

Read-only booleans indicating whether playback is active or paused.
time

Set or get the current playback time of the timeline in seconds.
totalTime

Set or get the total time (i.e. the duration) of the timeline in seconds.

Page 1051 of 1146

Construct 3 Official Manual

progress

A read-only number representing the playback progress from 0 to 1 (i.e. the time divided by
the total time).
isLooping

Set or get a boolean indicating whether playback will repeat when it finishes.
isPingPong

Set or get a boolean indicating whether the playback direction will alternately reverse when
repeating.
playbackRate

Set or get the speed of playback as a multiplier, e.g. 1 is normal speed, 2 is twice as fast, etc.
tags

A read-only array of strings representing the tags for this timeline.
hasTags(tags)

Return a boolean indicating if the timeline matches all the provided tags, given by a spaceseparated string.
isReleased

A read-only boolean indicating if the interface was released, which happens after the timeline
finishes. Once released accessing any other property (apart from this one) will throw an
exception, as the underlying timeline state no longer exists.

Page 1052 of 1146

Construct 3 Official Manual

TWEEN SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/interfaces/itweenstate

The ITweenState interface represents an actively running tween. It derives from
ITimelineStateBase which implements APIs in common between timelines and tweens, as a
tween is a kind of temporary timeline. Many general playback APIs are part of
ITimelineStateBase ; the ITweenState interface only provides APIs specific to tweens that do
not also apply to timelines.
Tweens can be created using the startTween() method on the Tween behavior script interface.

Once a tween finishes, this interface is destroyed and all its properties will throw exceptions
upon access. The only exception to this is the isReleased property (inherited from
ITimelineState ) which provides a read-only boolean that indicates if the interface has been
released and is now invalid.

Tween APIs
stop()

Stops playback and immediately ends the tween. The interface is released in this call and so
it cannot be used any further after this call.
instance

A read-only property with a reference to the IWorldInstance the tween is running on.
isDestroyOnComplete

Set or get a boolean indicating whether the corresponding instance will be automatically
destroyed once the tween finishes.
value

A read-only number providing the current value of a value tween.
setEase(easeName)

Set the ease function used for the tween by a string of its name. Refer to the Tween behavior
script interface for a list of valid built-in ease names, or use the name of a custom ease.

Page 1053 of 1146

Construct 3 Official Manual

3D CAMERA SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/3d-camera

The I3DCameraObjectType interface derives from IObjectClass to add APIs specific to the 3D
Camera plugin.
Note this class derives from the object class interface, not the instance interface. Its default
name is not a valid JavaScript identifier as it starts with a number, meaning it needs to be
accessed with the syntax runtime.objects["3DCamera"] . You may wish to rename the object to
a valid JavaScript identifier such as Camera3D, so that it can be accessed more conveniently
with the syntax runtime.objects.Camera3D .

3D Camera APIs
lookAtPosition(camX, camY, camZ, lookX, lookY, lookZ, upX, upY, upZ)

Set the position and orientation of the 3D Camera using a camera position, a position for the
camera to look towards, and an up vector. The camera and look-at positions are given as 3D
co-ordinates. The up vector is a 3D vector specifying which way is up, as this is also
necessary to determine how to orient the camera towards the look-at position. The default
up vector is (0, 1, 0), i.e. up is the positive direction on the Y axis, suitable for a top-down
view.
lookParallelToLayout(camX, camY, camZ, lookAngle)

Set the position and orientation of the 3D Camera using a camera position and a camera
angle in radians. Whereas the default view is top-down, this sets a camera position looking
along the layout, such that the layout appears as the floor at the bottom of the screen. This is
a shortcut for using the Look at position action looking towards a 2D angle with an up vector
of (0, 0, 1).
restore2DCamera()

Restore the camera to its default 2D behavior, using the standard scrolling features to move
the view.
moveAlongLayoutAxis(distance, axis, which)

Move the camera position, the look position, or both, a distance along an axis relative to the
layout. The distance can be negative to move in the opposite direction to the given axis. axis
must be a string of "x" , "y" or "z" . which must be a string of "camera" , "look" or
"both" .

Page 1054 of 1146

Construct 3 Official Manual

Note the scale on the Z axis is different to the X and Y axes.

moveAlongCameraAxis(distance, axis, which)

Move the camera position, the look position, or both, a distance along an axis relative to the
current camera orientation. The distance can be negative to move in the opposite direction
to the given axis. axis must be a string of "forward", "up" or "right". which must be a string of
"camera" , "look" or "both" .
Note the scale on the Z axis is different to the X and Y axes.

rotateCamera(rotateX, rotateY, minPolar, maxPolar)

Moves the camera look-at position according to X and Y rotations in radians. Note that a 3D
Camera must first have been enabled using the lookAtPosition() or
lookParallelToLayout() methods, since these also define the starting orientation for the
camera to rotate around. Typically the rotation values will be provided by the mouse
movement for "mouse look". The min/max polar values are also in radians and limit the Y
rotation, stopping the camera rotating too close to directly upwards or downwards.
getCameraPosition()

Return an array of [x, y, z] with the current 3D position of the camera.

getLookPosition()

Return an array of [x, y, z] with the current 3D position of the position the camera is
pointing at.
getLookVector()

Return an array of [x, y, z] with the current vector of the direction the camera is pointing
in, including camera rotation.
getForwardVector()

Return an array of [x, y, z] with a 3D unit vector pointing in the direction of the camera.
Note this does not include camera rotation. Use getLookVector() to get the vector of
the direction the camera is pointing in including camera rotation.

getRightVector()

Page 1055 of 1146

Construct 3 Official Manual

Return an array of [x, y, z] with a 3D unit vector pointing to the right of the camera,
perpendicular to the forward vector.
getUpVector()

Return an array of [x, y, z] with the camera up vector, which helps determine the camera
orientation. Note this is recomputed from the given camera and look positions, so may not
be exactly the same as the up vector given in lookAtPosition().
zScale

A read-only number with the number of pixels per unit on the Z axis. See the Z scale property
in the 3D Camera manual entry for more details.
fieldOfView

Set or get the angle of the field of view in radians. Note this only has an effect when Z Axis
scale is set to Regular in Project Properties. The default field of view is also set in Project
Properties.

Page 1056 of 1146

Construct 3 Official Manual

3D SHAPE SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/3d-shape

The I3DShapeInstance interface derives from IWorldInstance to add APIs specific to the 3D
shape plugin.

3D Shape APIs
shape

Set or get a string representing the the current shape being displayed. This must be one of
"box" , "prism" , "wedge" , "pyramid" , "corner-out" and "corner-in" .

zHeight

Set or get the current Z height (i.e. depth) of the 3D shape. Note the Z height must be greater
or equal to 0.
setFaceVisible(face, visible)

Set whether a face is visible or invisible based on the boolean visible. The face parameter is a
string identifying the face which must be one of "back" , "front" , "left" , "right" ,
"top" and "bottom" .

isFaceVisible(face)

Return a boolean indicating whether a given face is visible. The face parameter is a string
identifying the face which must be one of "back" , "front" , "left" , "right" , "top" and
"bottom" .

setFaceImage(face, image)

Change one of the shape faces to use one of the other face images. For example this allows
swapping the front face image for the back face image. To restore the original image, use the
same face for both parameters. Both parameters are strings identifying the face to use,
which must be one of "back" , "front" , "left" , "right" , "top" and "bottom" .
This also undoes setFaceObject , restoring the 3D shape's own face image instead of
another object's image.

setFaceObject(face, objectClass)

Page 1057 of 1146

Construct 3 Official Manual

Replace the image used for a face of the shape with the image used by a Sprite, Tiled
Background or 9-Patch object. An instance of the given object must exist on the current
layout. The face parameter is a string identifying the face which must be one of "back" ,
"front" , "left" , "right" , "top" and "bottom" . The objectClass parameter is an
IObjectClass referencing the object to set for the given face. Only Sprite, Tiled Background
and 9-Patch object types are supported.
This method can be undone with setFaceImage .

isBackFaceCulling

Set or get a boolean corresponding to the Back face culling property. When enabled, back
face culling automatically hides faces of the shape that are pointing away from the camera.
zTilingFactor

Set or get the Z tiling factor property of the 3D shape. For more information, refer to the 3D
shape plugin manual entry.
getImagePointCount()

Return the number of image points on the back face.
getImagePointX(nameOrIndex)
getImagePointY(nameOrIndex)
getImagePoint(nameOrIndex)

Return the location of an image point on the back face in layout co-ordinates. Image points
are identified either by a case-insensitive string of their name, or their index. Note image
point 0 is the origin, so index 1 is the first image point. If the image point is not found, this
returns the origin instead. The getImagePoint variant returns [x, y] .

getFaceImagePointCount(face)
getFaceImagePointX(face, nameOrIndex)
getFaceImagePointY(face, nameOrIndex)
getFaceImagePointZ(face, nameOrIndex)
getFaceImagePoint(face, nameOrIndex)

Return the count and 3D location of image points on any of the six possible faces of the 3D
shape. The face is identified by a string which must be one of "back" , "front" , "left" ,
"right" , "top" , "bottom" . Image points are identified either by a case-insensitive string
of their name, or their index. Note as image point 0 refers to the origin, index 1 is the first

Page 1058 of 1146

Construct 3 Official Manual

image point. If the image point is not found, this returns the origin instead. The
getFaceImagePoint variant returns [x, y, z] .

Page 1059 of 1146

Construct 3 Official Manual

ADVANCED RANDOM SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/advanced-random

The IAdvancedRandomObjectType interface derives from IObjectClass to add APIs specific to the
Advanced Random plugin.
Note this class derives from the object class interface, not the instance interface. Typically it is
used through runtime.objects.AdvancedRandom .

Advanced Random APIs
seed

Set or get a string with the current seed for the pseudo-random number generator. The same
seed will produce the same sequence of pseudo-random numbers.
octaves

Set or get the number of octaves used for coherent noise generation, from 1-16. The default
is 1. This affects the Billow, Classic and Ridged noise functions only. Using additional
octaves adds layers of increasing detail to the noise functions, but is also slower to process.
billow2d(x, y)
billow3d(x, y, z)

Generate a random number using billow noise in the range 0-1, using either 2D or 3D coordinates.
cellular2d(x, y)
cellular3d(x, y, z)

Generate a random number using cellular noise in the range 0-1, using either 2D or 3D coordinates.[/dd classic2d(x, y)
classic3d(x, y, z)
Generate a random number using classic (perlin) noise in the range 0-1, using either 2D or 3D
co-ordinates.
ridged2d(x, y)
ridged3d(x, y, z)

Page 1060 of 1146

Construct 3 Official Manual

Generate a random number using ridged noise in the range 0-1, using either 2D or 3D coordinates.
voronoi2d(x, y)
voronoi3d(x, y, z)

Generate a random number using Voronoi noise in the range 0-1, using either 2D or 3D coordinates.
createGradient(name, mode)

Create a new gradient with a given string for its name. The mode must be one of "float"
or "rgb" .

setCurrentGradient(name)

Set the current gradient that is the default to sample from.
addGradientStop(position, value)

Adds a stop to the current gradient. The stop position can be any number, but is generally
kept within the 0-1 range so it can be used with the random expressions.
sampleGradient(name, position)

Sample a gradient at the given position. The name can be omitted (pass null ) to use the
current gradient; otherwise it specifies a case-insensitive string of the gradient to sample.
createProbabilityTable(name)

Create a new probability table, using a string of its name to identify it.
createProbabilityTableFromJSON(name, jsonStr)

Create a new probability table with a name, using a string of JSON data from a prior call to
getProbabilityTableAsJSON() for its entries.

getProbabilityTableAsJSON()

Return a string of JSON data representing the current probability table.
setCurrentProbabilityTable(name)

Set the current probability table by a string of its name.
addProbabilityTableEntry(weight, value)

Page 1061 of 1146

Construct 3 Official Manual
y

y(

g

,

)

Add an entry to the current probability table with the given weight and value.
removeProbabilityTableEntry(weight, value)

Remove an existing entry from the current probability table. If a weight of 0 is specified, the
first entry with the given value is removed regardless of its weight. Otherwise an entry is only
removed if it matches both the value and the weight.
sampleProbabilityTable(name)

Get a random value from a probability table. The relative likelihood of values is affected by
their weight. The name can be omitted (pass null ) to use the current probability table;
otherwise it specifies a case-insensitive string of the probability table to sample.
createPermutationTable(length, offset)

Generate a randomly ordered sequence of numbers. The length parameter is how many
numbers to generate, and offset is the first number in the sequence. For example a
length of 3 with an offset of 1 will generate the numbers 1, 2 and 3, and then randomly
shuffle them.
shufflePermutationTable()

Re-shuffle an existing permutation table.
getPermutation(index)

Get a value at a zero-based index in the permutation table.

Page 1062 of 1146

Construct 3 Official Manual

ARRAY SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/array

The IArrayInstance interface derives from IInstance to add APIs specific to the Array plugin.

The Array object can only store strings and numbers, since these are the only types
Construct uses in expressions. Use normal JavaScript arrays to store other types.

Array APIs
width
height
depth

Retrieve the current dimensions of the array.
setSize(w, h = 1, d = 1)

Set the size of the array in up to three dimensions. For one or two dimensional arrays, the
later parameters can be omitted as they default to 1. (Note passing 0 for any dimension will
create an array with zero elements that cannot store any data.) If the array grows, new
elements have the value 0. If the array shrinks, elements are removed.
getAt(x, y = 0, z = 0)

Retrieve an element from the array at the given X, Y and Z co-ordinates. For one or two
dimensional access, the later parameters can be omitted as they default to 0.
setAt(val, x, y = 0, z = 0)

Set an element in the array at the given X, Y and Z co-ordinates. val must be a number or
string. For one or two dimensional arrays, the later parameters can be omitted as they
default to 0.

Page 1063 of 1146

Construct 3 Official Manual

AUDIO SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/audio

The IAudioObjectType interface derives from IObjectClass to add APIs specific to the Audio
plugin.
The script interface essentially just provides access to the underlying AudioContext (part of the
Web Audio API) that the Audio plugin uses internally for audio playback. However this is
sufficient to provide complete control over audio playback, including setting up complex graphs
of audio processing nodes. It is also convenient, since Construct manages some awkward
details such as ensuring playback is enabled as soon as possible given most browsers impose
autoplay restrictions. Adding the Audio object and using its script interface saves you from
having to re-implement these details yourself.
Note this class derives from the object class interface, not the instance interface. Typically it is
used through runtime.objects.Audio .

Since the Web Audio API is not available in Web Workers, the Audio object's script interface
can only be used in DOM mode, i.e. with the project Use worker option turned off.

Examples
The following examples demonstrate using the Web Audio API for audio playback.
Audio scripting demonstrates loading audio files and playing them
Sound synthesis demonstrates generating sounds with code

Audio APIs
audioContext

The Audio plugin's internal AudioContext used for audio playback.
destinationNode

The destination node to connect any additional audio nodes to.
While AudioContext has its own destination property, in some cases Construct
redirects the audio output to another destination, such as when recording playback. To
achieve this it creates its own destination node which it can redirect the output from. By

Page 1064 of 1146

Construct 3 Official Manual

connecting your own nodes to this destination your script's audio output will properly
integrate with other Construct features like recording.

isSilent

Set or get a boolean indicating whether Silent mode is enabled. In silent mode all currently
playing sounds are muted and no new sounds will play.
masterVolume

Set or get the current master volume, which is applied to all audio playback, in dB.
stopAll()

Stop all currently playing sounds.

Page 1065 of 1146

Construct 3 Official Manual

BINARY DATA SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/binary-data

The IBinaryDataInstance interface derives from IInstance to add APIs specific to the Binary
Data plugin. This makes it possible to read and alter the binary data from scripts, which is often
more convenient than trying to do so from events.
Binary Data stores its data as an ArrayBuffer, which cannot be directly modified. In JavaScript,
data can be read and written to an ArrayBuffer using typed arrays or DataView.

Binary Data APIs
setArrayBufferCopy(viewOrBuffer)

Set the contents of the Binary Data object by an ArrayBuffer or typed array which is copied.
This means it is safe to continue using the passed data after this call.
setArrayBufferTransfer(arrayBuffer)

Set the contents of the Binary Data object by an ArrayBuffer which the Binary Data object
takes ownership of. You must not use the passed ArrayBuffer after this call, since it is now
managed by the Binary Data object. Since this method does not copy the passed ArrayBuffer,
it is more efficient if the ArrayBuffer won't be used again in your code. Note this method does
not accept a typed array.
getArrayBufferCopy()

Return the contents of the Binary Data object as an ArrayBuffer which is a copy of the
internal ArrayBuffer. This means it is safe to modify the returned ArrayBuffer without
affecting the state of the Binary Data object.
getArrayBufferReadOnly()

Return the contents of the Binary Data object as a read-only reference to the internal
ArrayBuffer. This ArrayBuffer must not be modified since it is managed by the Binary Data
object. However it is more efficient to use this method if the data is only read from, e.g. to
send over the network, since it does not copy the ArrayBuffer.

Page 1066 of 1146

Construct 3 Official Manual

BUTTON SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/button

The IButtonInstance interface derives from IDOMInstance to add APIs specific to the Button
plugin.

Button events
See instance event for standard instance event object properties.
"click"

Fired when the button is clicked, or the checkbox state is toggled.

Button APIs
text

The string currently displayed as the button or checkbox label.
tooltip

The string used as the tooltip for the button or checkbox.
isEnabled

A boolean indicating if the control is enabled or disabled.
isChecked

A boolean indicating if the checkbox is checked. For button style controls this is always false.

Page 1067 of 1146

Construct 3 Official Manual

CONSTRUCT GAME SERVICES
SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/construct-game-services

The ICGSObjectType interface derives from IObjectType to add APIs specific to the Construct
Game Services plugin. Construct Game Services is also written as CGS for short.

Using the REST APIs
Construct Game Services have a comprehensive set of REST APIs available. When writing code
it is possible to use those entirely independently of this plugin. This option may be of interest to
advanced users - see the Construct Game Services manual for details.
The CGS script interface also provides the sessionKey when signed in. This can be used to
make REST API calls with the user's current authentication. This allows using the CGS script
interface solely for authentication, and then using the resulting sessionKey to make REST API
calls.
For completeness the CGS script interface does provide equivalent features to the plugin, but
note this is a subset of all the available features in the REST API.

CGS APIs
isSignedIn

Read-only boolean indicating if the player is currently signed in.
canSignInPersistent

Read-only boolean indicating if persistent sign in with signInPersistent() is available.

playerId

A read-only string of the unique player ID when signed in.
playerName

A read-only string of the player display name when signed in.
gameId

A read-only string of the game ID signed in to when signed in.
Page 1068 of 1146

Construct 3 Official Manual

sessionKey

When signed in, a string with the session key for this sign in. This can be used to make REST
API calls using the same authentication.
signInWithProvider(provider, gameId, options)

Attempt to sign the user in with a third-party identity service like Google or Microsoft.
provider must be one of: "Apple" , "BattleNet" , "BattleNetChina" , "Discord" ,
"Facebook" , "Github" , "Google" , "ItchIO" , "Microsoft" , "Reddit" , "Steam" , "X" ,
"Yandex" . The game ID to sign in to from your Construct Game Services account must be
provided. options is an optional object that may provide the following properties:
allowPersisting : if true

a successful sign in is remembered, and may be re-used in
future with signInPersistent() . The default is true .
expiryMins : the time in minutes that sessions remain active. The default is 1440 (24

hours).
and popupWindowHeight : Signing in with a provider will open a popup
window, and you can also specify the size of this popup window with these properties.
The default is 800x800.
popupWindowWidth

The method returns a Promise that resolves when sign in has completed successfully, or
rejects if sign in fails or is cancelled.
Note that in some cases, sign in may be cancelled in a way that cannot be detected, and
so the returned promise will not settle. Be sure to design your project with this in mind for example do not block the user interface until sign in finishes, as you cannot reliably
detect that.

signInPersistent(gameId)

Attempt to sign in re-using a previous successful sign in that allowed persisting. This can
only be used when canSignInPersistent is true. This returns a Promise that resolves when
the persistent sign in has completed.
signOut()

Sign out of any account the user is currently signed in to, and also delete any remembered
sign in if it allowed persisting. Locally this operation completes immediately. For
completeness signing out will send a request in the background to ensure the session is
ended on the server-side as well, but that is optional and if it fails the session will time out
anyway. This method returns a Promise that resolves when the background request
completes, but failure should not be considered significant.
Page 1069 of 1146

Construct 3 Official Manual

submitScore(score, leaderboardId)

Submit a score to a leaderboard. score must be an integer (fractional scores are not
supported). leaderboardId may be omitted to submit a score on the Construct Arcade,
which does not require authentication. Otherwise it must be set to the leaderboard ID to
submit the score to, in which case authentication is required. This method returns a Promise
that resolves when the score has been successfully submitted.
getLeaderboardScores(leaderboardId, options)

Request a page of scores from a given leaderboard ID. This does not require authentication.
The returned scores can optionally be filtered with several options, which may include:
resultsPerPage : the number of results to fetch. The default is 20.

page : zero-based index of the page to fetch. The default is 0 to retrieve the first page.

country : an ISO 3166-1 alpha-2 country code filter can be provided, e.g. "US" to only

return scores submitted in the United States of America.
range : a time range to filter results by, which if provided must be one of "Daily" ,
"Weekly" , "Monthly"

or "Yearly" . For example using "Daily" will return today's
scores. Weekly leaderboards run from Monday to Sunday. If this property is omitted it
returns all scores (which is the default).
rangeOffset : an offset to return a prior time range when range

is specified. For
example specifying a "Daily" range with a rangeOffset of 1 will return yesterday's
scores.
culture : a locale to use for returned values. By default it will use the leaderboard's

default culture.
This method returns a Promise that resolves with the following object upon success:
totalPageCount : the total number of pages available

scores : an array of returned scores, each being an object with the following properties:
score : a number representing this score.

formattedScore : a string with the score formatted according to the culture.

Page 1070 of 1146

Construct 3 Official Manual

rank : a number representing the score rank.

formattedRank : a string with the rank formatted according to the culture.

country : a string of the ISO 3166-1 alpha-2 country code the score was submitted

from.
playerId : a string of the unique player ID who submitted the score.

playerName : a string of the player display name who submitted the score.

Page 1071 of 1146

Construct 3 Official Manual

CSV SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/csv

The ICSVObjectType interface provides APIs specific to the CSV plugin. This allows reading and
writing CSV data (and other delimiter-based formats like TSV) from JavaScript code.
The script interface uses JavaScript data types directly and so does not need to use an Array
object for storage, which is necessary when using CSV in event sheets.

CSV APIs
parseCsv(str, delimiter = ",", dataType = "auto")

Parse a given string of CSV data using the provided delimiter. The dataType parameter must
be one of "auto" , "string" or "number" . The return value is an array of arrays with values,
representing the two-dimensional array of values in the data.
generateCsv(arr, delimiter = ",")

Generate a string of CSV data using the provided delimiter, from a two-dimensional array of
values.

Page 1072 of 1146

Construct 3 Official Manual

DICTIONARY SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/dictionary

The IDictionaryInstance interface derives from IInstance to add APIs specific to the Dictionary
plugin.
The Dictionary object can only use strings as keys, and strings/numbers as values, since
these are the only types supported by the plugin. Use your own independent JavaScript
Maps to use other types.

Dictionary APIs
getDataMap()

Return the Map which is used as the underlying data storage for the Dictionary object. This
allows access to add, change, remove and iterate items.
Only use string keys, and only store number or string primitives as key values, or the
plugin will cease to work correctly.

Page 1073 of 1146

Construct 3 Official Manual

DRAWING CANVAS SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/drawing-canvas

The IDrawingCanvasInstance interface derives from IWorldInstance to add APIs specific to the
Drawing Canvas plugin.

Examples
See the Drawing Canvas: Generate Image example for a demonstration of programmatically
generating an image for Drawing Canvas.

Drawing co-ordinates
The co-ordinate system used in drawing APIs work the same as they do for actions. For more
information refer to the Drawing Canvas object documentation.

Colors in drawing methods
In some of the drawing APIs, there are parameters that accept a color. These are represented
using an array with either three components e.g. [r, g, b] , in which case the alpha is treated
as opaque, or four components e.g. [r, g, b, a] to specify the alpha as well. Each component
is a normalized float value in the range 0-1.
For example [1, 0, 0] represents opaque red, and [0, 0, 1, 0.5] represents blue at 50%
opacity.

Drawing Canvas events
See instance event for standard instance event object properties.
"resolutionchange"

Fired at the same time as the On resolution changed trigger. For more details see the section
on resizing and resolution in the Drawing Canvas plugin manual entry.

Drawing Canvas APIs
clearCanvas(color)

Clear the entire canvas to a given color.

Page 1074 of 1146

Construct 3 Official Manual

clearRect(left, top, right, bottom, color)

Clear a rectangular area on the canvas to a given color. This overwrites any existing pixel
data in the canvas.
fillRect(left, top, right, bottom, color)

Fill a rectangular area on the canvas with a given color. This draws over any existing pixel
data in the canvas (relevant when the opacity is not 1).
outlineRect(left, top, right, bottom, color, thickness)

Draw four lines around a rectangular area on the canvas with a given color and line
thickness.
fillLinearGradient(left, top, right, bottom, color1, color2, direction = "horizontal")

Fill a rectangular area on the canvas with a linear gradient from color1 to color2 . The
direction must be one of "horizontal" or "vertical" .

fillEllipse(x, y, radiusX, radiusY, color, isSmooth = true)
outlineEllipse(x, y, radiusX, radiusY, color, thickness, isSmooth = true)

Fill or outline an elliptical area on the canvas with a given color. The position is the center of
the ellipse and the radius parameters determine the shape of the ellipse (set both to the
same value to draw a circle). When drawing an outline, the thickness parameter is the line
thickness. By default the edges of the drawn area are smoothed; for a pixellated style set
isSmooth to false .

line(x1, y1, x2, y2, color, thickness, lineCap = "butt")
lineDashed(x1, y1, x2, y2, color, thickness, dashLength, lineCap = "butt")

Draw either a solid or a dashed line between two points with a given color and line thickness.
The dashed variant also takes a dashLength parameter to set how long the dashes are.
lineCap must be one of "butt" (which ends the line exactly at the start and end positions)
or "square" (which squares off the line endings so it extends a little past the start and end
positions).
fillPoly(polyPoints, color, isConvex = false)
linePoly(polyPoints, color, thickness, lineCap = "butt")
lineDashedPoly(polyPoints, color, thickness, dashLength, lineCap = "butt")

Fill or outline a polygon area with a given color. The polygon is specified as an array of twoelement arrays with co-ordinates for polyPoints , e.g. [[x1, y1], [x2, y2], ...] . For the
line variants, the thickness , dashLength and lineCap parameters are the same as used
Page 1075 of 1146

Construct 3 Official Manual

for the line() and lineDashed() methods.
With fillPoly() the polygon must provide at least three points, and may be convex or
concave. However concave polygons are internally converted in to multiple convex polygons.
This process can sometimes fail due to floating point precision issues in the geometric
calculations, and result in a glitchy rendering. If you know the shape you are rendering is
convex, pass true for the isConvex parameter, which will bypass the internal conversion;
however this will not render correctly if the polygon is in fact concave.
Note that self-intersecting polygons are not supported with fillPoly() and will not
draw correctly.

setDrawBlend(blendMode)

Set the blend mode used for draw operations on to the canvas. This is different to the blend
used to draw the canvas itself to the layout. The blend mode is specified as a string and
must be one of "normal" , "additive" , "copy" , "destination-over" , "source-in" ,
"destination-in" , "source-out" , "destination-out" , "source-atop" or "destinationatop" .

async pasteInstances(instancesArr, includeEffects = true)

Draw a list of instances that are currently overlapping the canvas at their current positions,
given as an array of IWorldInstance. By default objects are drawn exactly as they appear,
taking in to account any effects added to them; set includeEffects to false to draw
without effects, as if all the object's effects were disabled. Note that the drawing actually
happens at the end of the tick, and so this method is async so it can be awaited to ensure
the paste has completed.
Note if an object is destroyed immediately after pasting without waiting for completion,
it will not be drawn, as it will be destroyed before it gets to be drawn.

setFixedResolutionMode(fixedWidth, fixedHeight)
setAutoResolutionMode()

Switch between fixed and auto resolution modes. For more information refer to the Drawing
Canvas object documentation.
surfaceDeviceWidth
surfaceDeviceHeight
getSurfaceDeviceSize()

Read-only values representing the size of the Drawing Canvas rendering surface in device
pixels. The method returns both values at the same time.

Page 1076 of 1146

Construct 3 Official Manual

pixelScale

A read-only value with the size of a single canvas pixel in object co-ordinates. See the section
Co-ordinate systems in the Drawing Canvas object documentation for more information.
async getImagePixelData()

Takes a snapshot of the drawing canvas pixel state on the GPU, and reads it back to the CPU
asynchronously. Resolves with an ImageData representing the pixel data. Note this uses
unpremultiplied alpha, whereas the surface on the GPU is premultiplied, so technically this is
lossy.
loadImagePixelData(imageData, premultiplyAlpha = false)

Load pixel data in an ImageData in to the Drawing Canvas rendering surface. The ImageData
must have a size equal to surfaceDeviceWidth and surfaceDeviceHeight . If the optional
premultiplyAlpha parameter is set to true , the pixel data will premultiply the alpha
(multiplying the RGB components by the A component). This can be left disabled if the pixel
data is already premultiplied, which is also faster since the premultiplication step can be
skipped.
saveImage(format, quality, areaRect)

Save the current canvas image in a compressed format (e.g. PNG or JPEG). All parameters
are optional - if none are specified, the entire canvas is saved in PNG format. The format
parameter is a string of the MIME type of the image format to use, e.g. "image/png". Where a
lossy format is used like "image/jpeg", the quality parameter is a number from 0-1 for the
compression quality. A subset of the canvas area can be saved (e.g. for saving a cropped
image) by specifying a DOMRect for the areaRect parameter using units of device pixels.
The method returns a Promise that resolves with a Blob of the resulting image.

Page 1077 of 1146

Construct 3 Official Manual

FACEBOOK SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/facebook

The IFacebookObjectType interface derives from IObjectClass to add APIs specific to the
Facebook plugin. Note this class derives from the object class interface, not the instance
interface. It would typically be accessed via runtime.objects.Facebook .
This script interface exists mainly to provide the access token so you can write code to access
the Facebook SDK for JavaScript using the existing authentication provided by Construct's
Facebook plugin. This may also be useful for third-party addons developed with Construct's
addon SDK.

Facebook APIs
getAccessToken()

A string of the access token provided by the Facebook SDK after a successful login. If the
user is not logged in, this will return an empty string.

Page 1078 of 1146

Construct 3 Official Manual

FILE CHOOSER SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/file-chooser

The IFileChooserInstance interface derives from IDOMInstance to add APIs specific to the File
Chooser plugin.

File Chooser events
See instance event for standard instance event object properties.
"change"

Fired when a file or set of files has been chosen from the input control.

File Chooser APIs
click()

Acts as if the file chooser was clicked, which brings up the system file picker. This allows the
button to be completely customized, as the actual File Chooser object can be moved
offscreen, and a custom sprite or other object used to activate the click() method instead.
The browser may only allow this method in a user gesture (e.g. mouse click).

clear()

Reset the control to its initial state with no selection, clearing any prior picked file.
getFiles()

Return an array of File objects representing the currently chosen files.

Page 1079 of 1146

Construct 3 Official Manual

HTML ELEMENT SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/html-element

The IHTMLElementInstance interface derives from IDOMInstance to add APIs specific to the
HTML Element plugin.
In DOM mode the HTML Element can be accessed with standard DOM APIs using the
getElement() method of IDOMInstance . However these methods can all still be used in worker
mode. Most of the methods are asynchronous as in this case updates are managed by posting
messages between the worker and the DOM.

HTML Element events
See instance event for standard instance event object properties.
"click"

Fired when any part of the HTML Element or its content is clicked. This event fires repeatedly
for the target element followed by all parent elements up to the main HTML element,
simulating event bubbling. The event object has two additional properties targetId and
targetClass that can be used to identify the element clicked.

"animationend"

Fired when any CSS animation inside the HTML element finishes (based on the DOM event
of the same name, but note this event is dispatched by Construct and not the DOM). The
event object has three additional properties: targetId and targetClass , which can be used
to identify the element whose animation ended, and animationName which identifies the
name of the CSS animation that ended (as defined by the @keyframes rule).

HTML Element APIs
async setContent(str, type = "html", selector = "", isAll = false)

Replaces some content inside the HTML element with the given string str . The string is
interpreted according to type which must be one of "html" , "bbcode" or "text" . The
location to replace content is specified by a CSS selector string. This can be left blank to
replace the content of the entire main HTML element. The isAll flag will update all
elements matching the selector if set, otherwise only the first matching element is updated.
async insertContent(str, type = "html", atEnd = true, selector = "", isAll = false)

Page 1080 of 1146

Construct 3 Official Manual

Insert the string of content str inside the HTML element. The string is interpreted
according to type which must be one of "html" , "bbcode" or "text" . The location to
insert content is specified by a CSS selector string. This can be left blank to insert the
content to the main HTML element. The atEnd flag inserts content at the end if true, or the
beginning if false. The isAll flag will update all elements matching the selector if set,
otherwise only the first matching element is updated.
async setContentClass(mode, classArr, selector, isAll = false)

Adds, toggles or removes element classes according to mode , which must be one of "add" ,
"toggle" or "remove" . The classes to modify are given as an array of strings in classArr .
The location to change is specified by a CSS selector string. This can be left blank to change
the classes of the main HTML element. The isAll flag will update all elements matching
the selector if set, otherwise only the first matching element is updated.
async setContentAttribute(mode, attrib, value, selector, isAll = false)

Adds or removes element attributes according to mode , which must be one of "set" or
"remove" . The string of the attribute name to modify is specified by attrib , and its value
as a string of value (ignored if removing the attribute). The location to change is specified
by a CSS selector string. This can be left blank to change the attributes of the main HTML
element. The isAll flag will update all elements matching the selector if set, otherwise only
the first matching element is updated.
async setContentCssStyle(propName, value, selector, isAll)

Sets an element's style . The string of the CSS property name to modify is specified by
propName , which may use either CSS naming (e.g. "font-size" ) or JavaScript naming (e.g.
"fontSize" ). The value to set for this property is given by a string of value ; set an empty
string to revert the style to default. The location to change is specified by a CSS selector
string. This can be left blank to change the style of the main HTML element. The isAll flag
will update all elements matching the selector if set, otherwise only the first matching
element is updated.
async setScrollPosition(selector, direction, position)

Set the horizontal or vertical scroll position of an element. The HTML element to scroll is
given by the CSS selector string selector , which can be set to an empty string to scroll the
main HTML element. This action only scrolls one element matching the selector. direction
must be set to either "left" to set the scroll left (horizontal) position or "top" to set the
scroll top (vertical) position. The position value is the scroll position to set in CSS pixels.
htmlContent

Page 1081 of 1146

Construct 3 Official Manual

A string of the complete inner HTML of the main HTML element. This can also be assigned
to change the full content of the HTML element.
Methods that change the HTML element, including assigning this property, are
asynchronous. This means reading the value back won't update until the asynchronous
methods have completed.

textContent

A string of the complete inner text of the main HTML element, in plain text form (with no
HTML tags). This can also be assigned to change the full text content of the HTML element.
Methods that change the HTML element, including assigning this property, are
asynchronous. This means reading the value back won't update until the asynchronous
methods have completed.

async createSpriteImgElement(spriteInst, selector, insertAt, id, class_)

Creates an <img> element with the content of a given ISpriteInstance's current image, and
inserts it to the HTML element. The location to insert is specified by a CSS selector string.
The insertAt parameter must be a string of one of "start" , "end" or "replace"
indicating how to insert the image element. The id and class_ parameters are optional
strings to set an ID or class for the inserted image element, which helps make it easy to style
the inserted image with CSS.
This method provides a simple way to show a Sprite image on top of a HTML element,
since normally HTML elements always show on top of Sprites.

async positionInstanceAtElement(worldInst, selector)

Sets the position and size of a given IWorldInstance to match the position and size of a
specific HTML element given by a CSS selector string.
This method provides a way to use invisible HTML and CSS for complex layouts, while
displaying the actual content with other objects, allowing for full use of Z order, effects
and so on.

Page 1082 of 1146

Construct 3 Official Manual

INTERNATIONALIZATION SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/internationalization

The IInternationalizationObjectType interface derives from IObjectType to add APIs specific
to the Internationalization plugin.
Internationalization is sometimes written as the shorthand i18n, referring to the fact the
word starts with an I, ends with an N, and has 18 other letters in between.

Supported APIs
Many features of the Internationalization plugin merely access the browser-provided Intl APIs,
such as for formatting dates and times, identifying plural types, and so on. When writing code,
you may as well access these APIs directly rather than through the script interface, so those
APIs are not duplicated here. Instead the script interface only provides access to string lookups
for translations.

Internationalization APIs
locale

Set or get a string representing the currently set locale as a BCP 47 language tag, e.g. "enUS" .

addString(context, str)

Add a localized string to the provided context in the localization data for the current locale.
saveToJSONString()

Returns a string of JSON representing the state of the Internationalization object.
loadFromJSONString(str)

Load the state of the Internationalization object from a string of JSON data.
setContext(context)
getContext()

Page 1083 of 1146
