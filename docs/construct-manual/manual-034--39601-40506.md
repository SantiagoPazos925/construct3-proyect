# Manual Construct 3  Parte 34 (líneas 3960140506)

## Resumen
- textDirection (línea 7)
- direction of the text flow. See the Text direction property of the Text object for more details. (línea 10)
- wordWrapMode (línea 11)
- A string specifying the way to wrap text when it reaches the end of a line. This can be either (línea 13)
- punctuation. (línea 16)
- setFixedResolutionMode(scale) (línea 17)
- setAutoResolutionMode() (línea 18)
- By default Text objects use Automatic resolution mode, which means the resolution of the (línea 20)
- text adjusts according to the 2D display scale. This produces the best quality display, but (línea 21)
- only works with 2D display, and can also cause the text to constantly re-render when being (línea 22)
- smoothly scaled, which can sometimes have a significant performance overhead. Fixed (línea 23)
- resolution mode causes the text to render at a fixed resolution according to a provided scale (línea 24)
- factor, and ignore the display scale. This usually results in a reduced display quality but (línea 25)
- better performance. (línea 26)
- textWidth (línea 32)
- textHeight (línea 33)
- getTextSize() (línea 34)
- rectangle. The method allows getting both values at the same time. (línea 37)
- hasTagAtPosition(tag, x, y) (línea 38)
- Return a boolean indicating if there is text with a specific tag at the given position (case (línea 40)

## Contenido

textDirection

Set or get a string of either "ltr" (left-to-right) or "rtl" (right-to-left) specifying the
direction of the text flow. See the Text direction property of the Text object for more details.
wordWrapMode

A string specifying the way to wrap text when it reaches the end of a line. This can be either
"word" to wrap entire space-separated words, "character" to wrap at any character, or
"cjk" to wrap at any character but with special handling for Chinese, Japanese and Korean
punctuation.
setFixedResolutionMode(scale)
setAutoResolutionMode()

By default Text objects use Automatic resolution mode, which means the resolution of the
text adjusts according to the 2D display scale. This produces the best quality display, but
only works with 2D display, and can also cause the text to constantly re-render when being
smoothly scaled, which can sometimes have a significant performance overhead. Fixed
resolution mode causes the text to render at a fixed resolution according to a provided scale
factor, and ignore the display scale. This usually results in a reduced display quality but
better performance.

Page 1118 of 1146

Construct 3 Official Manual

textWidth
textHeight
getTextSize()

Read-only values indicating the size of the actual text content within the text object's
rectangle. The method allows getting both values at the same time.
hasTagAtPosition(tag, x, y)

Return a boolean indicating if there is text with a specific tag at the given position (case
insensitive). For example if the text has the BBcode Hello [tag=mytag]world[/tag] , then
testing if the tag "mytag" is at a given position return true if that position is over just the
part of the text that says "world", else false .

getTagAtPosition(x, y)

Look up the tag for a part of the text at a given position and return the tag if any, else return
an empty string if no tag is specified. For example if the text has the BBcode Hello
[tag=mytag]world[/tag] , then the tag at a position over the word "world" is "mytag", and the
tag at a position over the word "Hello" is "".
getTagCount(tag)
getTagPositionAndSize(tag, index)

Get the number of fragments, and the size and position of each fragment by its zero-based
index, for a given tag. Note that a single tag may be broken in to multiple fragments - see the
section Tagged range fragmentation in the Text object manual entry for more details. The
getTagPositionAndSize() method returns the position and size as an object with the
properties {x, y, width, height} .

changeIconSet(objectClass)

Changes the Icon set property, replacing the Sprite used for BBcode icons to the one
specified by the given IObjectClass (which must be from a Sprite object). This can be used to
change the set of icons displayed by the Text object. Note if the new Sprite object does not
have the same number of animation frames, or the same animation frame tags, then some
icons may disappear.
async getAsHtmlString()

Converts the contents of the Text object, including any icons, in to a string of HTML. This
process is asynchronous so the method must be awaited. It resolves with a string of HTML
code. The result is cached (and updates the AsHTML expression) so repeat calls will resolve
with the same HTML string, until the Text object contents is modified, after which the next
call will regenerate the HTML string again.

Page 1119 of 1146

Construct 3 Official Manual

TEXT INPUT SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/text-input

The ITextInputInstance interface derives from IDOMInstance to add APIs specific to the Text
Input plugin.

Text Input events
See instance event for standard instance event object properties.
"click"
"dblclick"

Fired when the control is clicked or double-clicked.
"change"

Fired when user input causes the text property to change.

Text Input APIs
text

The current string entered in the input field.
placeholder

A string of text that appears faintly when the field is empty. This can be used for hints for
what the field is for, e.g. Username.
tooltip

A tooltip that appears if the user hovers the mouse over the text box and waits. An empty
string indicates no tooltip.
isEnabled

A boolean indicating if the control is enabled or disabled.
isReadOnly

A boolean indicating if the input field is read-only, which means the text cannot be modified
but can still be selected. This is different to disabling the field, where text cannot be selected.
Page 1120 of 1146

Construct 3 Official Manual

scrollToBottom()

Scroll to the bottom of the control. Only has an effect when set to the textarea type, since it is
the only multiline mode. This is useful for chat or log style textareas.
maxLength

Set or get the maximum number of characters allowed to be entered in the field. The value -1
indicates no limit, which is the default.

Page 1121 of 1146

Construct 3 Official Manual

TILED BACKGROUND SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/tiled-background

The ITiledBackgroundInstance interface derives from IWorldInstance to add APIs specific to the
Tiled Background plugin.

Tiled Background APIs
imageWidth
imageHeight
getImageSize()

The original dimensions of the Tiled Background's current image in pixels. This does not
include tiling - it returns the size as shown in Construct's image editor. The method allows
retrieving both values at the same time.
imageOffsetX
imageOffsetY
setImageOffset(imageOffsetX, imageOffsetY)
getImageOffset()

The offset of the displayed Tiled Background image in pixels. The methods allow setting or
getting both values at the same time.
imageScaleX
imageScaleY
setImageScale(imageScaleX, imageScaleY)
getImageScale()

The scale of the displayed Tiled Background image, defaulting to 1 for original size. The
methods allow setting or getting both values at the same time.
imageAngle

The angle of the displayed Tiled Background image in radians. If this is changed,
imageAngleDegrees updates accordingly.

imageAngleDegrees

Page 1122 of 1146

Construct 3 Official Manual

The angle of the displayed Tiled Background image in degrees. If this is changed,
imageAngle updates accordingly.

enableTileRandomization

A boolean indicating whether tile randomization is enabled.
tileXRandom
tileYRandom
setTileRandom(tileXRandom, tileYRandom)
getTileRandom()

When tile randomization is enabled, the amount of random horizontal and vertical offset to
use, as a percentage in the range 0-1. The methods allow setting or getting both values at
the same time.
tileAngleRandom

When tile randomization is enabled, the amount of random rotation to use, as a percentage
in the range 0-1.
tileBlendMarginX
tileBlendMarginY
setTileBlendMargin(tileBlendMarginX, tileBlendMarginY)
getTileBlendMargin()

When tile randomization is enabled, the percentage of the tile width or height which will fade
in to the adjacent tile, as a percentage in the range 0-1. The methods allow setting or getting
both values at the same time.
async replaceImage(blob)

Replace the current image with the contents of a Blob representing an image file such as a
PNG image. The blob can be locally generated or retrieved from a URL, for example:
// Loading an image from a URL
const response = await fetch(url);
const blob = await response.blob();
await tbInst.replaceImage(blob);

Page 1123 of 1146

Construct 3 Official Manual

TILEMAP SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/tilemap

The ITilemapInstance interface derives from IWorldInstance to add APIs specific to the
Tilemap plugin.

Tile numbers
Tiles in the tilemap are represented as a single 32-bit integer number and can be rotated and
flipped. To support this they consist of two parts using a bitmask:
The tile ID in the lower 29 bits - this is the number of the tile as shown in the Tilemap Bar
when hovering the tile
Tile flags in the upper 3 bits
There is also a special tile number -1 indicating an empty tile.

Tile flags
The Tilemap script interface exposes the following flags and masks which can be used to
manipulate tile numbers:
ITilemapInstance.TILE_FLIPPED_HORIZONTAL = -0x80000000;
ITilemapInstance.TILE_FLIPPED_VERTICAL = 0x40000000;
ITilemapInstance.TILE_FLIPPED_DIAGONAL = 0x20000000;
ITilemapInstance.TILE_FLAGS_MASK = 0xE0000000;
ITilemapInstance.TILE_ID_MASK = 0x1FFFFFFF;

For example, to flip tile ID 2 horizontally, you would use bitwise OR combining the tile ID and the
flag, e.g. 2 | ITilemapInstance.TILE_FLIPPED_HORIZONTAL . Similarly you can test if the bit is set
using tile & ITilemapInstance.TILE_FLIPPED_HORIZONTAL .
You can also use the masks to extract each component of the tile number. For example tile &
ITilemapInstance.TILE_ID_MASK will return just the tile ID, since it removes all the flag bits.

Be sure to first check if the tile is the special value -1 indicating an empty tile. This is a
special value that doesn't use the bit representation so won't work when combined with flags
or masks.

Tilemap APIs
Page 1124 of 1146

Construct 3 Official Manual

mapWidth
mapHeight
getMapSize()

Read-only numbers representing the size of the tilemap in tiles. The method allows getting
both values at the same time.
mapDisplayWidth
mapDisplayHeight
getMapDisplaySize()

Read-only numbers with the displayed size of the tilemap, in tiles. The method allows getting
both values at the same time.
This can differ from mapWidth and mapHeight if the Tilemap is resized smaller at
runtime - in that case the display size will be smaller, but the map size will stay the same.

tileWidth
tileHeight
getTileSize()

Read-only numbers with the size of a tile in pixels. The method allows getting both values at
the same time.
getTileAt(x, y)

Get the tile at a given position in tiles (i.e. (0, 0) is the top-left tile of the tilemap, regardless of
the tilemap's position or the tile size). Returns -1 for empty tiles or tiles outside the tilemap;
otherwise use bit operations to determine tile ID or flags separately.
setTileAt(x, y, tile)

Set the tile at a given position in tiles. Use -1 to set a tile empty; otherwise use bit operations
to combine the tile ID and flags.
async replaceImage(blob)

Replace the current tilemap image with the contents of a Blob representing an image file
such as a PNG image. The blob can be locally generated or retrieved from a URL, for
example:
// Loading an image from a URL
const response = await fetch(url);

Page 1125 of 1146

Construct 3 Official Manual

const blob = await response.blob();
await tmInst.replaceImage(blob);

Page 1126 of 1146

Construct 3 Official Manual

TIMELINE CONTROLLER SCRIPT
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/timeline-controller

The ITimelineControllerObjectType interface derives from IObjectClass to add APIs specific to
the Timeline Controller plugin.
Note this class derives from the object class interface, not the instance interface. Typically it is
used through runtime.timelineController instead of the named object.

Timeline controller APIs
play(timeline, tags)

Start playback of a timeline specified by a string of its name. The tags to associate with this
playback are optional, and can be specified as a space-separated string, or an array of
strings. The method returns an ITimelineState representing the playback state of the
timeline.
setInstances(instances, trackId)

Set one or more instances to be used for the next timeline playback. The instances
parameter can be either an IWorldInstance or an array of IWorldInstance in order to set
multiple instances. The instances can be different to the ones used in the editor. The
instance will be set to the track with the corresponding trackId , specified as a string. The
trackId is also optional: if omitted it uses the first track in the timeline. It can also be used
repeatedly omitting the trackId to keep setting the tracks in the timeline in sequence. When
the timeline is played it will then affect the specified instances instead of the ones used in
the editor. This method is equivalent to the Set instance action; for more information see the
Timeline Controller manual entry.
*allTimelines()

Iterates all ITimelineState representing all the currently playing timelines.
*timelinesByTags(tags)

Iterates ITimelineStates matching the specified tags, which can be specified as either a
space-separated string, or an array of strings.

Page 1127 of 1146

Construct 3 Official Manual

TOUCH SCRIPT INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/plugin-interfaces/touch

The ITouchObjectType interface derives from IObjectClass to add APIs specific to the Touch
plugin.
Note this class derives from the object class interface, not the instance interface. Typically it is
used through runtime.touch instead of the named object.

Examples
The Tracking pointers example demonstrates how both mouse and touch input can be tracked
simultaneously using pointer events.

Events
To detect touch input events, use the events fired on the Runtime script interface, such as
"pointerdown" . There are also "deviceorientation" and "devicemotion" events which can be
used to detect device movement.

Touch APIs
async requestPermission(type)

Request permission to use device orientation or motion sensors. The "deviceorientation"
and "devicemotion" events will not fire unless this method has been called and permission
granted. type must be "orientation" or "motion" . The user may be prompted to allow
permission. Note some browsers merge both types in to one permission prompt in which
case only one permission request is necessary to access both orientation and motion.
Returns a promise that resolves with "granted" if permission was allowed, else "denied"
if the user declined.

Page 1128 of 1146

Construct 3 Official Manual

ADDON SDK SCRIPT INTERFACES
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces

The script interfaces in this section of the scripting reference are intended for use with
Construct's Addon SDK, which allows developers to create custom plugins and behaviors. These
features are not normally used when writing code in Construct projects, so this section of the
documentation ought to be disregarded by anyone not using the Addon SDK.
You can learn more about the Addon SDK in the Addon SDK documentation.

Coding conventions
As JavaScript has limited support for encapsulation, some methods which are only intended for
use by the Construct runtime can still be accessed from Construct's scripting feature. With
JavaScript, properties and methods are public by default, or can use private properties with the
# prefix which can only be used by the same class. Construct needs a middle-ground status
where outside callers should not use a property or method, but it must be accessible to
Construct's runtime. JavaScript currently has no such language feature, and so such properties
and methods have to be public. Instead Construct uses a special naming scheme: properties or
methods that begin with an underscore _ should be considered "protected", i.e. they are only
for use by the Construct runtime and not should be used by any other caller. Do not use any such
properties or methods other than for the purposes for which they are documented.
Do not ignore this naming convention. If you use properties or methods beginning with an
underscore in a way that is not supported, you may cause your project to become unstable,
or it may break in future, and if this happens Scirra will not provide any support.

Page 1129 of 1146

Construct 3 Official Manual

ILOOPINGCONDITIONCONTEXT
ADDON SDK INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/iloopingconditioncontext

The ILoopingConditionContext interface is used to implement looping conditions. It is created
by the ISDKUtils method createLoopingConditionContext() .

ILoopingConditionContext APIs
retrigger()

Execute all subsequent conditions, actions and sub-events within this call. This essentially
runs a single iteration of the looping condition.
isStopped

A read-only boolean that is set to true when the loop is stopped using the system Stop loop
action.
release()

This must be called after the looping condition finishes in order to clean up resources and
reset state that was applied during the looping condition.

Page 1130 of 1146

Construct 3 Official Manual

ISDKPLUGINBASE ADDON SDK
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkbehaviorbase

The ISDKBehaviorBase interface is used in the runtime as a base class for behaviors created
with the addon SDK. It derives from IBehavior.

ISDKBehaviorBase APIs
The ISDKBehaviorBase interface does not currently have any of its own APIs.

Page 1131 of 1146

Construct 3 Official Manual

ISDKBEHAVIORINSTANCEBASE
ADDON SDK INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkbehaviorinstancebase

The ISDKBehaviorInstanceBase interface is used as a runtime base class for behavior instances
in the addon SDK. It derives from IBehaviorInstance.

ISDKBehaviorInstanceBase APIs
_postCreate()

Optional override called after the associated object instance has finished being created. This
can be useful since the behavior instance constructor is called during instance creation, so
the final state is not ready yet.
_release()

Optional override for when the corresponding instance is released. Clean up any other
resources that need releasing in this method. It must also call super._release() to release
all engine resources.
_getInitProperties()

Call this in the constructor to get an array of the behavior instance's properties.
_trigger(method)
_triggerAsync(method)

Fire a trigger condition. The condition must be declared as a trigger in aces.json. Pass a full
reference to the condition method, e.g.
this._trigger(C3.Behaviors.MyBehavior.Cnds.MyTrigger) . The async variant returns a
Promise that resolves when the trigger has finished executing, which can be used to support
Construct's debugger, as it may wait if it hits a breakpoint inside the trigger.
_setTicking(isTicking)
_setTicking2(isTicking)
_setPostTicking(isTicking)
_isTicking()
_isTicking2()

Page 1132 of 1146

Construct 3 Official Manual

_isPostTicking()

Utility methods to start or stop the runtime calling the _tick() . _tick2() or _postTick()
methods of your behavior instance every tick, and also to check whether ticking is active. It is
recommended to stop ticking whenever the tick method is no longer needed to reduce the
performance overhead of ticking. Redundant calls to start or stop ticking are ignored. The
first call always takes effect (i.e. calls do not stack - if you make 3 calls to start ticking then 1
call to stop ticking, ticking is stopped).
_tick()

Optional override that is called every tick just before events are run after _setTicking(true)
has been called.
_tick2()

Optional override that is called every tick just after events are run after _setTicking2(true)
has been called.
_postTick()

Optional override that is called every tick just after all other behaviors have had their
_tick() methods called. This allows behaviors to observe the state applied by other
behavior's ticking. Note you should use _tick() rather than _postTick() where possible,
since it is not possible to reliably observe the state applied by other behavior's post-ticking.
_getDebuggerProperties()

Override to return properties to display in the debugger. For more information see runtime
scripts.
_saveToJson()

Optional override to return a JSON object that represents the state of the behavior instance
for savegames.
_loadFromJson(o)

Optional override accepting a JSON object returned by a prior call to _saveToJson() that
represents the state of a behavior instance to load, for savegames.

Page 1133 of 1146

Construct 3 Official Manual

ISDKBEHAVIORTYPEBASE ADDON
SDK INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkbehaviortypebase

The ISDKBehaviorTypeBase is used in the runtime as a base class for behavior types in the
addon SDK (i.e. behaviors at the same level as object types). It derives from IBehaviorType.

ISDKBehaviorTypeBase APIs
_onCreate()

Optional override called when the runtime starts up and creates all behavior types before the
project starts.

Page 1134 of 1146

Construct 3 Official Manual

ISDKDOMINSTANCEBASE ADDON
SDK INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkdominstancebase

The ISDKDOMInstanceBase interface is used as a runtime base class for DOM instances (which
create a HTML element) in the addon SDK. It derives from ISDKWorldInstanceBase.

ISDKDOMInstanceBase APIs
_postToDOMElement(handler, data)
_postToDOMElementAsync(handler, data)

Post a message from the runtime instance to the DOM side. The message is received using
AddDOMElementMessageHandler() in DOMElementHandler. handler is a string identifying the
kind of message. data is a JSON object that is forwarded with the message to provide
additional details. The async variant returns a promise that awaits an async handler on the
DOM side and forwards the return value back to the runtime, which the returned promise
resolves with. The non-async variant simply posts a message and ignores the result (i.e. fireand-forget).
_postToDOMElementMaybeSync(handler, data)

As with _postToDOMElement() , but when the runtime is in DOM mode, calls the DOM handler
synchronously inside the call. When the runtime is in worker mode, this still posts a message
which is handled later. Usually this method is not necessary, but it can be used to work
around some user input restrictions in some browsers in DOM mode only.
_createElement(data)

Instruct the runtime to create a DOM element for this instance. It will end up calling
CreateElement() in DOMElementHandler with data (an optional object with additional
details to create with). The runtime associates the resulting element with this instance.
focusElement()
blurElement()

Helper methods to manage calling focus() and blur() on the instance's associated DOM
element.
isElementFocused()

Page 1135 of 1146

Construct 3 Official Manual

Helper method to identify whether the associated HTML element is currently focused.
setElementCSSStyle(prop, val)

Helper method to set a CSS style on the instance's associated HTML element. For example
setElementCSSStyle("font-family", "sans-serif") will be forwarded to
elem.style.fontFamily = "sans-serif" on the DOM side.

setElementAttribute(attribName, value)
removeElementAttribute(attribName)

Helper method to set or remove an attribute on the instance's associated HTML element.
setElementVisible(isVisible)

Set whether the associated HTML element is visible or invisible. This sets the CSS style
display: none when invisible.

_getElementState()

Override to return a JSON object representing the state of the DOM element, e.g. the text
content. This is used by CreateElement() and UpdateElementState() to retrieve state to
pass to the DOM side.
_updateElementState()

Send a message from the runtime to the DOM side with the element state (retrieved from
GetElementState() ). This results in a call to UpdateState(elem, e) on the DOM side. This is
a convenient way to make sure any changes to the DOM element are applied.
_getElementInDOMMode()

When the runtime is in DOM mode, this returns the HTML element associated with this
instance. When the runtime is in worker mode this method will throw an exception, as the
DOM is not directly accessible from a Web Worker.

Page 1136 of 1146

Construct 3 Official Manual

ISDKDOMPLUGINBASE ADDON SDK
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkdompluginbase

The ISDKDOMPluginBase interface is used in the runtime as a base class for DOM plugins (that
create a HTML element) in the addon SDK. It derives from ISDKPluginBase.

ISDKDOMPluginBase APIs
_addElementMessageHandler(handler, func)
_addElementMessageHandlers(arr)

Add a message handler to receive messages posted by PostToRuntimeElement() in
DOMElementHandler. handler must match the string passed to PostToRuntimeElement() .
func accepts two arguments: the associated instance, and an optional object with extra
details passed to PostToRuntimeElement() . Typically this function just forwards the handler
to an instance method, e.g. this._addElementMessageHandler("click", (inst, e) =>
inst._onClick(e)); . The _addElementMessageHandlers variant accepts an array of [handler,
callback] which is convenient when adding multiple handlers.

Page 1137 of 1146

Construct 3 Official Manual

ISDKINSTANCEBASE ADDON SDK
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkinstancebase

The ISDKInstanceBase interface is used as a runtime base class for instances in the addon SDK.
It derives from IInstance.

ISDKInstanceBase APIs
_release()

Optional override for when an instance is released. Clean up any other resources that need
releasing in this method. It must also call super._release() to release all engine resources.

_getInitProperties()

Call this in the constructor to get an array of the instance's properties to create the instance
with.
_trigger(method)
_triggerAsync(method)

Fire a trigger condition. The condition must be declared as a trigger in aces.json. Pass a full
reference to the condition method, e.g.
this._trigger(C3.Plugins.MyPlugin.Cnds.MyTrigger) . The async variant returns a Promise
that resolves when the trigger has finished executing, which can be used to support
Construct's debugger, as it may wait if it hits a breakpoint inside the trigger.
_addDOMMessageHandler(handler, callback)
_addDOMMessageHandlers(arr)

Add a callback to be run to handle a message posted from a DOM-side script. The handler is
a string identifier. The callback receives the posted data as an argument. Note that if the
caller in the DOM-side script originally used the PostToRuntimeAsync method, the callback
may be an async function, and the return value is posted back to the DOM-side script. The
_addDOMMessageHandlers variant accepts an array of [handler, callback] which is
convenient when adding multiple handlers.
_postToDOM(handler, data)
_postToDOMAsync(handler, data)

Page 1138 of 1146

Construct 3 Official Manual

Post a message to a DOM-side script. The handler is a string identifier. The data must be
structurally clonable (since it is posted down a MessageChannel).
The async method returns a promise that resolves with the DOM-side callback's return value.
The non-async method does not return a value and the DOM-side callback's return value is
discarded (i.e. a "fire and forget" message).
_postToDOMMaybeSync(handler, data)

As with _postToDOM() , but when the runtime is in DOM mode, calls the DOM handler
synchronously inside the call. When the runtime is in worker mode, this still posts a message
which is handled later. Usually this method is not necessary, but it can be used to work
around some user input restrictions in some browsers in DOM mode only.
_setTicking(isTicking)
_setTicking2(isTicking)
_isTicking()
_isTicking2()

Utility methods to start or stop the runtime calling the _tick() or _tick2() methods of
your instance every tick, and also to check whether ticking is active. It is recommended to
stop ticking whenever the tick method is no longer needed to reduce the performance
overhead of ticking. Redundant calls to start or stop ticking are ignored. The first call always
takes effect (i.e. calls do not stack - if you make 3 calls to start ticking then 1 call to stop
ticking, ticking is stopped).
_tick()

Optional override that is called every tick just before events are run after _setTicking(true)
has been called.
_tick2()

Optional override that is called every tick just after events are run after _setTicking2(true)
has been called.
_getDebuggerProperties()

Override to return properties to display in the debugger. For more information see runtime
scripts.
_saveToJson()

Optional override to return a JSON object that represents the state of the instance for
savegames.

Page 1139 of 1146

Construct 3 Official Manual

_loadFromJson(o)

Optional override accepting a JSON object returned by a prior call to _saveToJson() that
represents the state of an instance to load, for savegames.

Wrapper extension methods
These methods relate to the use of wrapper extensions. Refer to that manual section for more
details; for completeness the relevant methods are also included here.
_isWrapperExtensionAvailable()

Returns a boolean indicating whether the corresponding wrapper extension was successfully
loaded. If this returns false then no messages sent to the wrapper extension will be received,
and async messages will return a promise that never resolves.
_addWrapperExtensionMessageHandler(messageId, callback)
_addWrapperMessageHandlers(list)

Add a callback to be run to handle a message posted from the corresponding wrapper
extension. The callback receives the JSON data sent from the wrapper extension as an
argument. The _addWrapperMessageHandlers variant accepts an array of [messageId,
callback] which is convenient when adding multiple handlers.

_sendWrapperExtensionMessage(messageId, params)
_sendWrapperExtensionMessageAsync(messageId, params)

Send a message to the wrapper extension. The message ID is used to identify the kind of
message. params is an optional array of parameters to provide. These may only be boolean,
number or string type values. The async variant returns a Promise that resolves when the
wrapper extension responds to the message. The promise resolves with the JSON data sent
from the wrapper extension.

Page 1140 of 1146

Construct 3 Official Manual

ISDKOBJECTTYPEBASE ADDON
SDK INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkobjecttypebase

The ISDKObjectTypeBase is used in the runtime as a base class for object types in the addon
SDK. It derives from IObjectClass.

ISDKObjectTypeBase APIs
_onCreate()

An optional override called when the runtime starts up and creates all object types before the
project starts. This call may be delayed when using a loader layout.
getImageInfo()

For plugins that use an image (by calling this._info.SetHasImage(true) in the editor plugin
code), returns an IImageInfo representing the object's image.
async _loadTextures(renderer)

Optional override called by the runtime when it wants your object type's textures to be
created. Use the passed IRenderer to load textures. This method should return a promise
that resolves when all textures have been loaded.
_releaseTextures(renderer)

Optional override called by the runtime when it wants your object type's textures to be
released. Use the passed IRenderer to release textures. This method is synchronous.
Release any textures and drop the references to them.
_onDynamicTextureLoadComplete()

Optional override called by the runtime when a dynamic texture load has completed. If an
object is created at runtime that does not already have its textures loaded, the runtime will
call _loadTextures() but continue running the project while the textures are loaded
asynchronously. When they finish loading, the runtime then calls this override so you have an
opportunity to update any references to the newly loaded texture.
async _preloadTexturesWithInstances(renderer)

Page 1141 of 1146

Construct 3 Official Manual

Optional override called just before starting a layout once all instances are created. This
provides an opportunity to load textures depending on the details of the instances on the
layout. Use the passed IRenderer to load textures. This may be used for purposes such as
rasterizing SVG at an appropriate resolution before the layout starts.

Page 1142 of 1146

Construct 3 Official Manual

ISDKPLUGINBASE ADDON SDK
INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkpluginbase

The ISDKPluginBase interface is used in the runtime as a base class for plugins created with the
addon SDK. It derives from IPlugin.

ISDKPluginBase APIs
The ISDKPluginBase interface does not currently have any of its own APIs.

Page 1143 of 1146

Construct 3 Official Manual

ISDKUTILS ADDON SDK INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkutils

The ISDKUtils interface provides general APIs intended for use with the Addon SDK. It is
normally accessed via runtime.sdk .

ISDKUtils APIs
addLoadPromise(promise)

Only valid while the project is still loading. Add a promise that the runtime will wait to resolve
before starting the first layout. This is useful if you want to make sure your addon loads an
asynchronous resource before the game starts.
Single-global plugins create their instance before loading, so this method can be used in
single-global instance constructors. Otherwise it can only be used in the plugin or
behavior constructor.

sendWrapperExtensionMessage(wrapperComponentId, messageId, params)
sendWrapperExtensionMessageAsync(wrapperComponentId, messageId, params)

These methods are equivalent to those in ISDKInstanceBase, but allow specifying an
arbitrary wrapper component ID. In general it is recommended to use the instance-specific
methods as cases where you need to message a different wrapper extension to your own
are rare.
getObjectClassBySid(sid)

Returns an IObjectClass with the given SID (Serialization ID), or null if none found. This can
be used to look up the IObjectClass for plugin "object" properties, which pass a SID at
runtime for the property value.
isAutoSuspendEnabled

Set or get a boolean indicating whether the runtime automatically suspends when it detects
the page or app going in to the background. This is enabled by default; by turning it off you
can then use setSuspended() to control when the runtime suspends and resumes. Note
however that even if automatic suspending is disabled, browsers may effectively suspend
background pages anyway through other means, such as throttling timers and callbacks.
Therefore disabling automatic suspending does not necessarily mean the runtime actually is
able to continue running in the background. This API exists mainly to comply with the
Page 1144 of 1146

Construct 3 Official Manual

requirements of platforms that provide their own suspend and resume events that are
required to be used.
setSuspended(isSuspended)

Pass true to suspend the runtime, and false to resume it. When suspended, the runtime
stops ticking and drawing anything, and remains inactive. Make sure that suspend and
resume calls are paired one-to-one: for example do not suspend once but resume twice.
The current suspended state can be read via the property runtime.isSuspended .

createLoopingConditionContext(loopName)

This method is intended specifically for looping conditions (where "isLooping": true is
specified in the condition definition). It allows "retriggering" the event, which executes all
subsequent conditions, actions and sub-events in one call; a loop is implemented by
repeatedly retriggering the event. The loop name is optional but allows passing the name to
the system loopindex condition to retrieve the index in nested loops. It returns an
ILoopingConditionContext. An example looping condition implementation is shown below.
// Sample looping condition method
TestLoop(count)
{
const loopCtx = this.runtime.sdk.createLoopingConditionContext();
for(let i = 0; i < count; ++i)
{
loopCtx.retrigger();
if (loopCtx.isStopped)
break;
}
loopCtx.release();
}

Page 1145 of 1146

Construct 3 Official Manual

ISDKWORLDINSTANCEBASE
ADDON SDK INTERFACE
View online: https://www.construct.net/en/make-games/manuals/construct-3/scripting/scriptingreference/addon-sdk-interfaces/isdkworldinstancebase

The ISDKWorldInstanceBase interface is used as a runtime base class for world instances in the
addon SDK. It derives from both ISDKInstanceBase and IWorldInstance.

ISDKWorldInstanceBase APIs
_draw(renderer)

An override for drawing plugins to draw their content using the passed IRenderer interface.
_handleRendererContextLoss()

Utility method to enable calling of the _onRendererContextLost() and
_onRendererContextRestored() methods.

_onRendererContextLost()
_onRendererContextRestored()

Optional overrides for handling renderer context loss. This is only necessary if your addon
creates any renderer resources. These overrides are only called if your instance first calls
_handleRendererContextLoss() (normally in the constructor to enable these callbacks for the
lifetime of the instance). In a context loss event, all renderer resources have been released,
so any references to them must be dropped. In a context restored event the resources may
be recreated again if necessary. Alternatively they can be left released if a lazy-loading
approach is used.

Page 1146 of 1146

